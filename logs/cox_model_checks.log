
. cap mkdir ./output/graphs

. cap mkdir ./output/tempdata

. cap mkdir ./output/tables

. * Pre-pandemic
. import delimited using ./output/survival/input_survival_pre.csv, clear
(39 vars, 1,000 obs)

. * First preparing dataset
. * Drop variables that make up COPD hospitalisation as not required
. drop copd_exacerbation_hospital copd_hospital lrti_hospital copd_any eth ethn
> icity_sus

. 
. * Assume deregistered on 1st of month
. gen dereg_dateA = date(dereg_date, "YM")
(950 missing values generated)

. format %dD/N/CY dereg_dateA

. drop dereg_date

. 
. * Format dates
. local a "mi_primary_admission stroke_primary_admission heart_failure_primary_
> admission vte_primary_admission t1dm_admission_primary t2dm_admission_primary
>  dm_keto_admission_primary asthma_exacerbation depression_primary_admission a
> nxiety_primary_admission smi_primary_admission self_harm_primary_admission cv
> d_admission_date dm_admission copd_hospitalisation_date mh_admission" 

. local b "mi_admit_date stroke_admit_date hf_admit_date vte_admit_date t1dm_ad
> mit_date t2dm_admit_date dm_keto_admit_date asthma_admit_date depress_admit_d
> ate anx_admit_date smi_admit_date sh_admit_date cvd_admit_date dm_admit_date 
> copd_admit_date mh_admit_date" 

. forvalues i=1/16 {
  2.     local c: word `i' of `a'
  3.     local d: word `i' of `b' 
  4.     count if `c'!=""   
  5.     gen `d'=date(`c', "YMD")
  6.     format %dD/N/CY `d'
  7.     drop `c'
  8.     }
  21
(979 missing values generated)
  33
(967 missing values generated)
  26
(974 missing values generated)
  28
(972 missing values generated)
  19
(981 missing values generated)
  26
(974 missing values generated)
  29
(971 missing values generated)
  27
(973 missing values generated)
  27
(973 missing values generated)
  23
(977 missing values generated)
  24
(976 missing values generated)
  22
(978 missing values generated)
  101
(899 missing values generated)
  72
(928 missing values generated)
  87
(913 missing values generated)
  94
(906 missing values generated)

. * Define index date
. gen index_date = date("01/03/2018", "DMY")

. * Define end of follow-up
. gen end_study = date("22/03/2020", "DMY")

. format %dD/N/CY index_date end_study

. egen end_date = rowmin(dereg_dateA end_study)

. format %dD/N/CY end_date

. 
. * Reorder ethnicity - white, asian, black, mixed, other
. *re-order ethnicity
.  gen eth5=1 if ethnicity==1
(790 missing values generated)

.  replace eth5=2 if ethnicity==3
(210 real changes made)

.  replace eth5=3 if ethnicity==4
(183 real changes made)

.  replace eth5=4 if ethnicity==2
(195 real changes made)

.  replace eth5=5 if ethnicity==5
(202 real changes made)

.  replace eth5=. if ethnicity==.
(0 real changes made)

. 
.  label define eth5                      1 "White"                            
>            ///
>                                                         2 "South Asian"      
>                    ///                                             
>                                                         3 "Black"            
>                            ///
>                                                         4 "Mixed"            
>                            ///
>                                                         5 "Other"            
>                            

.                                         
. 
. label values eth5 eth5

. safetab eth5, m
5

       eth5 |      Freq.     Percent        Cum.
------------+-----------------------------------
      White |        210       21.00       21.00
South Asian |        210       21.00       42.00
      Black |        183       18.30       60.30
      Mixed |        195       19.50       79.80
      Other |        202       20.20      100.00
------------+-----------------------------------
      Total |      1,000      100.00

. 
. * Make gender numeric
. gen male = 1 if sex == "M"
(512 missing values generated)

. replace male = 0 if sex == "F"
(501 real changes made)

. label define male 0"Female" 1"Male"

. label values male male

. safetab male, miss
5

       male |      Freq.     Percent        Cum.
------------+-----------------------------------
     Female |        501       50.10       50.10
       Male |        488       48.80       98.90
          . |         11        1.10      100.00
------------+-----------------------------------
      Total |      1,000      100.00

. drop sex

. 
. * Make region numeric
. generate region2=.
(1,000 missing values generated)

. replace region2=0 if region=="East"
(0 real changes made)

. replace region2=1 if region=="East Midlands"
(94 real changes made)

. replace region2=2 if region=="London"
(211 real changes made)

. replace region2=3 if region=="North East"
(109 real changes made)

. replace region2=4 if region=="North West"
(117 real changes made)

. replace region2=5 if region=="South East"
(181 real changes made)

. replace region2=6 if region=="South West"
(0 real changes made)

. replace region2=7 if region=="West Midlands"
(97 real changes made)

. replace region2=8 if region=="Yorkshire and The Humber"
(0 real changes made)

. drop region

. rename region2 region

. label var region "region of England"

. label define region 0 "East" 1 "East Midlands"  2 "London" 3 "North East" 4 "
> North West" 5 "South East" 6 "South West" 7 "West Midlands" 8 "Yorkshire and 
> The Humber"

. label values region region

. safetab region, miss
7

       region of England |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
           East Midlands |         94        9.40        9.40
                  London |        211       21.10       30.50
              North East |        109       10.90       41.40
              North West |        117       11.70       53.10
              South East |        181       18.10       71.20
           West Midlands |         97        9.70       80.90
                       . |        191       19.10      100.00
-------------------------+-----------------------------------
                   Total |      1,000      100.00

. 
. *create a 4 category rural urban variable 
. generate urban_rural_5=.
(1,000 missing values generated)

. la var urban_rural_5 "Rural Urban in five categories"

. replace urban_rural_5=1 if urban_rural==1
(112 real changes made)

. replace urban_rural_5=2 if urban_rural==2
(94 real changes made)

. replace urban_rural_5=3 if urban_rural==3|urban_rural==4
(200 real changes made)

. replace urban_rural_5=4 if urban_rural==5|urban_rural==6
(204 real changes made)

. replace urban_rural_5=5 if urban_rural==7|urban_rural==8
(390 real changes made)

. label define urban_rural_5 1 "Urban major conurbation" 2 "Urban minor conurba
> tion" 3 "Urban city and town" 4 "Rural town and fringe" 5 "Rural village and 
> dispersed"

. label values urban_rural_5 urban_rural_5

. safetab urban_rural_5, miss
14

        Rural Urban in five |
                 categories |      Freq.     Percent        Cum.
----------------------------+-----------------------------------
    Urban major conurbation |        112       11.20       11.20
    Urban minor conurbation |         94        9.40       20.60
        Urban city and town |        200       20.00       40.60
      Rural town and fringe |        204       20.40       61.00
Rural village and dispersed |        390       39.00      100.00
----------------------------+-----------------------------------
                      Total |      1,000      100.00

. 
. *generate a binary rural urban (with missing assigned to urban)
. generate urban_rural_bin=.
(1,000 missing values generated)

. replace urban_rural_bin=1 if urban_rural<=4|urban_rural==.
(406 real changes made)

. replace urban_rural_bin=0 if urban_rural>4 & urban_rural!=.
(594 real changes made)

. label define urban_rural_bin 0 "Rural" 1 "Urban"

. label values urban_rural_bin urban_rural_bin

. safetab urban_rural_bin urban_rural, miss
28

urban_rura |                      urban_rural
     l_bin |         1          2          3          4          5 |     Total
-----------+-------------------------------------------------------+----------
     Rural |         0          0          0          0         96 |       594 
     Urban |       112         94         93        107          0 |       406 
-----------+-------------------------------------------------------+----------
     Total |       112         94         93        107         96 |     1,000 


urban_rura |           urban_rural
     l_bin |         6          7          8 |     Total
-----------+---------------------------------+----------
     Rural |       108        202        188 |       594 
     Urban |         0          0          0 |       406 
-----------+---------------------------------+----------
     Total |       108        202        188 |     1,000 

. label var urban_rural_bin "Rural-Urban"

. 
. * Define age categories
. * Create age categories
. egen age_cat = cut(age), at(18, 40, 60, 80, 120) icodes
(215 missing values generated)

. label define age 0 "18 - 40 years" 1 "41 - 60 years" 2 "61 - 80 years" 3 ">80
>  years"

. label values age_cat age

. safetab age_cat, miss
8

      age_cat |      Freq.     Percent        Cum.
--------------+-----------------------------------
18 - 40 years |        301       30.10       30.10
41 - 60 years |        236       23.60       53.70
61 - 80 years |        200       20.00       73.70
    >80 years |         48        4.80       78.50
            . |        215       21.50      100.00
--------------+-----------------------------------
        Total |      1,000      100.00

. 
. * open file to write results to
. file open tablecontent using ./output/tables/cox_models.txt, write text repla
> ce
(note: file ./output/tables/cox_models.txt not found)

. file write tablecontent ("Association between ethnicity and outcomes pre-pand
> emic") _n

. file write tablecontent _tab ("Denominator") _tab ("Event") _tab ("Total pers
> on-weeks") _tab ("Rate per 1,000") _tab ("Crude") _tab _tab ("Age/Sex Adjuste
> d") _tab _tab ("Fully Adjusted") _tab _tab  _n

. file write tablecontent _tab _tab _tab _tab _tab   ("HR") _tab ("95% CI") _ta
> b ("HR") _tab ("95% CI") _tab ("HR") _tab ("95% CI") _tab _tab  _n

. 
. foreach sub in cvd dm copd mh mi stroke hf vte t1dm t2dm dm_keto asthma depre
> ss anx smi sh  {
  2.     * Cox model for each outcome category
.     * Generate flags and end dates for each outcome
.     gen `sub'_admit=(`sub'_admit_date!=.)
  3.     tab `sub'_admit
  4.     count if `sub'_admit_date==.
  5.     gen `sub'_end = end_date
  6.     replace `sub'_end = `sub'_admit_date if `sub'_admit==1
  7. 
.     stset `sub'_end, fail(`sub'_admit) id(patient_id) enter(index_date) origi
> n(index_date) scale(365.25) 
  8.     * Kaplan-Meier plot
.     sts graph, by(eth5)
  9.     graph export ./output/graphs/km_`sub'_pre_eth.svg, as(svg) replace
 10.     * Cox model - crude
.     stcox i.eth5
 11.     estimates save "./output/tempdata/crude_`sub'_eth", replace 
 12.     eststo model1
 13.     parmest, label eform format(estimate p lb ub) saving("./output/tempdat
> a/surv_crude_`sub'_eth16", replace) idstr("crude_`sub'_eth") 
 14.     estat phtest, detail
 15.     * Cox model - age and gender adjusted
.     stcox i.eth5 i.age_cat i.male
 16.     estimates save "./output/tempdata/model1_`sub'_eth", replace 
 17.     eststo model2
 18.     parmest, label eform format(estimate p lb ub) saving("./output/tempdat
> a/surv_model1_`sub'_eth", replace) idstr("model1_`sub'_eth") 
 19.     estat phtest, detail
 20.     * Cox model - fully adjusted
.     stcox i.eth5 i.age_cat i.male i.urban_rural_bin i.imd i.shielded
 21.     estimates save "./output/tempdata/model2_`sub'_eth", replace 
 22.     eststo model3
 23.     parmest, label eform format(estimate p lb ub) saving("./output/tempdat
> a/surv_model2_`sub'_eth", replace) idstr("model2_`sub'_eth") 
 24.     estat phtest, detail
 25.     esttab model1 model2 model3 using "./output/tables/estout_table_eth_.t
> xt", b(a2) ci(2) label wide compress eform ///
>         title ("`sub'") ///
>         varlabels(`e(labels)') ///
>         stats(N_sub) ///
>         append 
 26.     eststo clear
 27.    * Write results to table
.     * Column headings 
.     file write tablecontent ("`sub'") _n
 28. 
.     * eth16 labelled columns
. 
.     local lab1: label eth5 1
 29.     local lab2: label eth5 2
 30.     local lab3: label eth5 3
 31.     local lab4: label eth5 4
 32.     local lab5: label eth5 5
 33.     /* counts */
.     
.     * First row, eth16 = 1 (White British) reference cat
.     qui safecount if eth5==1
 34.     local denominator = r(N)
 35.     qui safecount if eth5 == 1 & `sub'_admit == 1
 36.     local event = r(N)
 37.     bysort eth5: egen total_follow_up = total(_t)
 38.     qui su total_follow_up if eth5 == 1
 39.     local person_week = r(mean)/7
 40.     local rate = 1000*(`event'/`person_week')
 41.     
.     file write tablecontent  ("`lab1'") _tab (`denominator') _tab (`event') _
> tab %10.0f (`person_week') _tab %3.2f (`rate') _tab
 42.     file write tablecontent ("1.00") _tab _tab ("1.00") _tab _tab ("1.00")
>   _tab _tab ("1.00") _tab _tab ("1.00") _n
 43.     
.     * Subsequent ethnic groups
.     forvalues eth=2/5 {
 44.         qui safecount if eth5==`eth'
 45.         local denominator = r(N)
 46.         qui safecount if eth5 == `eth' & `sub'_admit == 1
 47.         local event = r(N)
 48.         qui su total_follow_up if eth5 == `eth'
 49.         local person_week = r(mean)/7
 50.         local rate = 1000*(`event'/`person_week')
 51.         file write tablecontent  ("`lab`eth''") _tab (`denominator') _tab 
> (`event') _tab %10.0f (`person_week') _tab %3.2f (`rate') _tab  
 52.         cap estimates use "./output/tempdata/crude_`sub'_eth" 
 53.         cap lincom `eth'.eth5, eform
 54.         file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f (r(l
> b)) (" - ") %4.2f (r(ub)) (")") _tab 
 55.         cap estimates clear
 56.         cap estimates use "./output/tempdata/model1_`sub'_eth" 
 57.         cap lincom `eth'.eth5, eform
 58.         file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f (r(l
> b)) (" - ") %4.2f (r(ub)) (")") _tab 
 59.         cap estimates clear
 60.         cap estimates use "./output/tempdata/model2_`sub'_eth" 
 61.         cap lincom `eth'.eth5, eform
 62.         file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f (r(l
> b)) (" - ") %4.2f (r(ub)) (")") _tab _n
 63.         cap estimates clear
 64.     }  //end ethnic group
 65. drop total_follow_up
 66. 
. } //end outcomes

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        899       89.90       89.90
          1 |        101       10.10      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  899
(101 real changes made)

                id:  patient_id
     failure event:  cvd_admit != 0 & cvd_admit < .
obs. time interval:  (cvd_end[_n-1], cvd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
        101  failures in single-failure-per-subject data
  1,954.103  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_cvd_pre_eth.svg not found)
(file ./output/graphs/km_cvd_pre_eth.svg written in SVG format)

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -692.45484
Iteration 1:   log likelihood = -691.56931
Iteration 2:   log likelihood = -691.56334
Iteration 3:   log likelihood = -691.56334
Refining estimates:
Iteration 0:   log likelihood = -691.56334

Cox regression -- Breslow method for ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =          101
Time at risk    =  1954.102669
                                                LR chi2(4)       =        1.78
Log likelihood  =   -691.56334                  Prob > chi2      =      0.7756

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.006178   .3264476     0.02   0.985     .5327314    1.900384
      Black  |   1.154015   .3744129     0.44   0.659     .6110045    2.179608
      Mixed  |   1.070107   .3471895     0.21   0.835     .5665784     2.02113
      Other  |   1.412572   .4299252     1.13   0.256     .7779326    2.564951
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_cvd_eth.ster not found)
file ./output/tempdata/crude_cvd_eth.ster saved
(note: file ./output/tempdata/surv_crude_cvd_eth16.dta not found)
file ./output/tempdata/surv_crude_cvd_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.06561         0.43        1         0.5099
      3.eth5      |      0.01085         0.01        1         0.9132
      4.eth5      |      0.10493         1.11        1         0.2919
      5.eth5      |     -0.12072         1.47        1         0.2255
      ------------+---------------------------------------------------
      global test |                      6.15        4         0.1885
      ----------------------------------------------------------------

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -501.91748
Iteration 1:   log likelihood = -498.79542
Iteration 2:   log likelihood = -498.78131
Iteration 3:   log likelihood = -498.78131
Refining estimates:
Iteration 0:   log likelihood = -498.78131

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           76
Time at risk    =   1521.36345
                                                LR chi2(8)       =        6.27
Log likelihood  =   -498.78131                  Prob > chi2      =      0.6168

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .8099053   .2923724    -0.58   0.559     .3991665    1.643291
      Black  |   1.190125   .4255767     0.49   0.626     .5904882    2.398687
      Mixed  |   .7080495   .2743942    -0.89   0.373     .3312783    1.513332
      Other  |   1.246443    .416269     0.66   0.509     .6477399    2.398526
             |
     age_cat |
41 - 60 y..  |    .761836   .2275322    -0.91   0.362     .4242669    1.367993
61 - 80 y..  |   1.200019   .3306396     0.66   0.508     .6992909    2.059295
  >80 years  |   .8650722   .4612979    -0.27   0.786     .3041942    2.460106
             |
        male |
       Male  |   1.228259   .2862894     0.88   0.378     .7778344    1.939513
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_cvd_eth.ster not found)
file ./output/tempdata/model1_cvd_eth.ster saved
(note: file ./output/tempdata/surv_model1_cvd_eth.dta not found)
file ./output/tempdata/surv_model1_cvd_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.08773         0.59        1         0.4442
      3.eth5      |     -0.00345         0.00        1         0.9755
      4.eth5      |      0.09100         0.64        1         0.4224
      5.eth5      |     -0.14807         1.65        1         0.1987
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.33409         8.29        1         0.0040
      2.age_cat   |     -0.04530         0.16        1         0.6919
      3.age_cat   |     -0.18497         2.56        1         0.1094
      0b.male     |            .            .        1             .
      1.male      |      0.06682         0.35        1         0.5544
      ------------+---------------------------------------------------
      global test |                     15.80        8         0.0454
      ----------------------------------------------------------------

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -501.91748
Iteration 1:   log likelihood = -492.80542
Iteration 2:   log likelihood = -492.48627
Iteration 3:   log likelihood = -492.41784
Iteration 4:   log likelihood = -492.39271
Iteration 5:   log likelihood = -492.38347
Iteration 6:   log likelihood = -492.38007
Iteration 7:   log likelihood = -492.37882
Iteration 8:   log likelihood = -492.37836
Iteration 9:   log likelihood = -492.37819
Iteration 10:  log likelihood = -492.37813
Iteration 11:  log likelihood = -492.37811
Iteration 12:  log likelihood =  -492.3781
Iteration 13:  log likelihood =  -492.3781
Iteration 14:  log likelihood =  -492.3781
Iteration 15:  log likelihood =  -492.3781
Iteration 16:  log likelihood =  -492.3781
Iteration 17:  log likelihood =  -492.3781
Iteration 18:  log likelihood =  -492.3781
Iteration 19:  log likelihood =  -492.3781
Iteration 20:  log likelihood =  -492.3781
Iteration 21:  log likelihood =  -492.3781
Iteration 22:  log likelihood =  -492.3781
Iteration 23:  log likelihood =  -492.3781
Iteration 24:  log likelihood =  -492.3781
Iteration 25:  log likelihood =  -492.3781
Iteration 26:  log likelihood =  -492.3781
Iteration 27:  log likelihood =  -492.3781
Iteration 28:  log likelihood =  -492.3781
Iteration 29:  log likelihood =  -492.3781
Iteration 30:  log likelihood =  -492.3781
Iteration 31:  log likelihood =  -492.3781
Iteration 32:  log likelihood =  -492.3781
Iteration 33:  log likelihood =  -492.3781
Iteration 34:  log likelihood =  -492.3781
Refining estimates:
Iteration 0:   log likelihood =  -492.3781
Iteration 1:   log likelihood =  -492.3781
Iteration 2:   log likelihood =  -492.3781

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           76
Time at risk    =   1521.36345
                                                LR chi2(15)      =       19.08
Log likelihood  =    -492.3781                  Prob > chi2      =      0.2102

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .7550653   .2729221    -0.78   0.437     .3718035      1.5334
      Black  |   1.116889    .399507     0.31   0.757      .554037     2.25155
      Mixed  |   .6987473    .271153    -0.92   0.356     .3265926    1.494975
      Other  |   1.263211   .4230661     0.70   0.485     .6552354    2.435312
             |
     age_cat |
41 - 60 y..  |   .7380754   .2210054    -1.01   0.310     .4104133    1.327333
61 - 80 y..  |   1.155437    .320454     0.52   0.602     .6709196    1.989859
  >80 years  |   .8192979   .4398847    -0.37   0.710     .2860407     2.34669
             |
        male |
       Male  |   1.173468   .2739204     0.69   0.493      .742638    1.854239
             |
urban_rura~n |
      Urban  |   .9690524   .2298193    -0.13   0.895     .6088038    1.542472
             |
         imd |
          1  |   .8524347   .5458455    -0.25   0.803     .2429994    2.990316
          2  |   1.466883   .9032542     0.62   0.534     .4387889    4.903826
          3  |   .5225344    .356819    -0.95   0.342     .1370444    1.992362
          4  |   .5323577   .3574917    -0.94   0.348     .1427579    1.985213
          5  |   1.079025   .6786067     0.12   0.904     .3145611    3.701334
             |
  1.shielded |   2.29e-16   1.68e-08    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_cvd_eth.ster not found)
file ./output/tempdata/model2_cvd_eth.ster saved
(note: file ./output/tempdata/surv_model2_cvd_eth.dta not found)
file ./output/tempdata/surv_model2_cvd_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.09973         0.74        1         0.3907
      3.eth5      |      0.00671         0.00        1         0.9522
      4.eth5      |      0.08828         0.60        1         0.4372
      5.eth5      |     -0.13143         1.31        1         0.2531
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.34352         8.98        1         0.0027
      2.age_cat   |     -0.05452         0.24        1         0.6277
      3.age_cat   |     -0.17496         2.29        1         0.1299
      0b.male     |            .            .        1             .
      1.male      |      0.05209         0.21        1         0.6462
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.20564         3.38        1         0.0658
      0b.imd      |            .            .        1             .
      1.imd       |     -0.04558         0.16        1         0.6900
      2.imd       |      0.05872         0.26        1         0.6085
      3.imd       |      0.00738         0.00        1         0.9484
      4.imd       |     -0.02158         0.04        1         0.8488
      5.imd       |     -0.03233         0.08        1         0.7778
      0b.shielded |            .            .        1             .
      1.shielded  |      0.12901         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     23.28       15         0.0783
      ----------------------------------------------------------------
(note: file ./output/tables/estout_table_eth_.txt not found)
(output written to ./output/tables/estout_table_eth_.txt)

   dm_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        928       92.80       92.80
          1 |         72        7.20      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  928
(72 real changes made)

                id:  patient_id
     failure event:  dm_admit != 0 & dm_admit < .
obs. time interval:  (dm_end[_n-1], dm_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         72  failures in single-failure-per-subject data
  1,991.918  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  dm_admit
   analysis time _t:  (dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_dm_pre_eth.svg not found)
(file ./output/graphs/km_dm_pre_eth.svg written in SVG format)

         failure _d:  dm_admit
   analysis time _t:  (dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -494.73899
Iteration 1:   log likelihood = -489.30933
Iteration 2:   log likelihood = -489.16531
Iteration 3:   log likelihood = -489.16461
Iteration 4:   log likelihood = -489.16461
Refining estimates:
Iteration 0:   log likelihood = -489.16461

Cox regression -- Breslow method for ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           72
Time at risk    =  1991.917864
                                                LR chi2(4)       =       11.15
Log likelihood  =   -489.16461                  Prob > chi2      =      0.0249

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.649402   1.180149     2.19   0.029     1.106596    6.343177
      Black  |   1.480821   .7462648     0.78   0.436     .5514886    3.976202
      Mixed  |   3.020708   1.335593     2.50   0.012     1.269853    7.185612
      Other  |   2.943274   1.301371     2.44   0.015     1.237289    7.001483
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_dm_eth.ster not found)
file ./output/tempdata/crude_dm_eth.ster saved
(note: file ./output/tempdata/surv_crude_dm_eth16.dta not found)
file ./output/tempdata/surv_crude_dm_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.06761         0.33        1         0.5664
      3.eth5      |      0.07365         0.39        1         0.5321
      4.eth5      |     -0.02802         0.06        1         0.8122
      5.eth5      |     -0.10774         0.83        1         0.3612
      ------------+---------------------------------------------------
      global test |                      3.56        4         0.4690
      ----------------------------------------------------------------

         failure _d:  dm_admit
   analysis time _t:  (dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -377.17658
Iteration 1:   log likelihood = -371.10586
Iteration 2:   log likelihood = -370.96837
Iteration 3:   log likelihood = -370.96814
Iteration 4:   log likelihood = -370.96814
Refining estimates:
Iteration 0:   log likelihood = -370.96814

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           57
Time at risk    =  1542.652977
                                                LR chi2(8)       =       12.42
Log likelihood  =   -370.96814                  Prob > chi2      =      0.1336

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.535234   1.224816     1.93   0.054     .9835303    6.535041
      Black  |   1.060978   .6448294     0.10   0.922     .3223836    3.491726
      Mixed  |    2.93851   1.420823     2.23   0.026     1.139084    7.580511
      Other  |   3.041585   1.457026     2.32   0.020     1.189446    7.777775
             |
     age_cat |
41 - 60 y..  |    1.22357   .3930798     0.63   0.530      .651891    2.296587
61 - 80 y..  |   .9388826   .3350266    -0.18   0.860     .4665223    1.889514
  >80 years  |    1.55169   .7774507     0.88   0.381      .581197     4.14273
             |
        male |
       Male  |   .9634145   .2569143    -0.14   0.889     .5712455    1.624814
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_dm_eth.ster not found)
file ./output/tempdata/model1_dm_eth.ster saved
(note: file ./output/tempdata/surv_model1_dm_eth.dta not found)
file ./output/tempdata/surv_model1_dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.11110         0.71        1         0.4011
      3.eth5      |      0.11654         0.77        1         0.3802
      4.eth5      |     -0.05289         0.16        1         0.6917
      5.eth5      |     -0.17229         1.68        1         0.1944
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.01548         0.01        1         0.9073
      2.age_cat   |     -0.09570         0.52        1         0.4722
      3.age_cat   |      0.03211         0.06        1         0.8104
      0b.male     |            .            .        1             .
      1.male      |      0.06616         0.26        1         0.6125
      ------------+---------------------------------------------------
      global test |                      6.83        8         0.5552
      ----------------------------------------------------------------

         failure _d:  dm_admit
   analysis time _t:  (dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -377.17658
Iteration 1:   log likelihood = -368.11514
Iteration 2:   log likelihood = -367.36715
Iteration 3:   log likelihood = -367.14668
Iteration 4:   log likelihood = -367.06614
Iteration 5:   log likelihood = -367.03657
Iteration 6:   log likelihood =  -367.0257
Iteration 7:   log likelihood =  -367.0217
Iteration 8:   log likelihood = -367.02023
Iteration 9:   log likelihood = -367.01969
Iteration 10:  log likelihood = -367.01949
Iteration 11:  log likelihood = -367.01942
Iteration 12:  log likelihood = -367.01939
Iteration 13:  log likelihood = -367.01938
Iteration 14:  log likelihood = -367.01938
Iteration 15:  log likelihood = -367.01938
Iteration 16:  log likelihood = -367.01938
Iteration 17:  log likelihood = -367.01938
Iteration 18:  log likelihood = -367.01938
Iteration 19:  log likelihood = -367.01938
Iteration 20:  log likelihood = -367.01938
Iteration 21:  log likelihood = -367.01938
Iteration 22:  log likelihood = -367.01938
Iteration 23:  log likelihood = -367.01938
Iteration 24:  log likelihood = -367.01938
Iteration 25:  log likelihood = -367.01938
Iteration 26:  log likelihood = -367.01938
Iteration 27:  log likelihood = -367.01938
Iteration 28:  log likelihood = -367.01938
Iteration 29:  log likelihood = -367.01938
Iteration 30:  log likelihood = -367.01938
Iteration 31:  log likelihood = -367.01938
Refining estimates:
Iteration 0:   log likelihood = -367.01938
Iteration 1:   log likelihood = -367.01938
Iteration 2:   log likelihood = -367.01938
Iteration 3:   log likelihood = -367.01938
Iteration 4:   log likelihood = -367.01938
Iteration 5:   log likelihood = -367.01938
Iteration 6:   log likelihood = -367.01938
Iteration 7:   log likelihood = -367.01938
Iteration 8:   log likelihood = -367.01938
Iteration 9:   log likelihood = -367.01938
Iteration 10:  log likelihood = -367.01938

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           57
Time at risk    =  1542.652977
                                                LR chi2(14)      =       20.31
Log likelihood  =   -367.01938                  Prob > chi2      =      0.1205

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.445971   1.183615     1.85   0.065     .9474396    6.314676
      Black  |   1.099339   .6689851     0.16   0.876     .3335392    3.623403
      Mixed  |   2.857228   1.381763     2.17   0.030     1.107393    7.372048
      Other  |   2.972774    1.42476     2.27   0.023     1.162002    7.605307
             |
     age_cat |
41 - 60 y..  |   1.248371    .402255     0.69   0.491     .6638441    2.347584
61 - 80 y..  |   .9668886   .3469622    -0.09   0.925     .4785506    1.953552
  >80 years  |   1.621523   .8249682     0.95   0.342     .5982255    4.395229
             |
        male |
       Male  |   .9919169   .2659382    -0.03   0.976     .5864941    1.677594
             |
urban_rura~n |
      Urban  |   .9576312   .2624669    -0.16   0.874     .5596307    1.638683
             |
         imd |
          1  |   3.80e+08   1.89e+08    39.73   0.000     1.43e+08    1.01e+09
          2  |   5.64e+08   2.59e+08    43.87   0.000     2.29e+08    1.39e+09
          3  |   2.91e+08          .        .       .            .           .
          4  |   5.40e+08   2.51e+08    43.25   0.000     2.17e+08    1.34e+09
          5  |   4.01e+08   1.95e+08    40.62   0.000     1.54e+08    1.04e+09
             |
  1.shielded |   1.34e-18   1.31e-09    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_dm_eth.ster not found)
file ./output/tempdata/model2_dm_eth.ster saved
(note: file ./output/tempdata/surv_model2_dm_eth.dta not found)
file ./output/tempdata/surv_model2_dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.11328         0.75        1         0.3875
      3.eth5      |      0.10954         0.68        1         0.4094
      4.eth5      |     -0.04971         0.14        1         0.7101
      5.eth5      |     -0.17412         1.73        1         0.1879
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.00578         0.00        1         0.9657
      2.age_cat   |     -0.10887         0.69        1         0.4078
      3.age_cat   |      0.01262         0.01        1         0.9265
      0b.male     |            .            .        1             .
      1.male      |      0.06543         0.25        1         0.6201
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.11387         0.75        1         0.3869
      0b.imd      |            .            .        1             .
      1.imd       |      0.10431         0.61        1         0.4346
      2.imd       |      0.04904         0.14        1         0.7087
      3.imd       |            .            .        1             .
      4.imd       |      0.04649         0.12        1         0.7253
      5.imd       |      0.17609         1.76        1         0.1851
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.03102         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     10.05       14         0.7587
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

 copd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        913       91.30       91.30
          1 |         87        8.70      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  913
(87 real changes made)

                id:  patient_id
     failure event:  copd_admit != 0 & copd_admit < .
obs. time interval:  (copd_end[_n-1], copd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         87  failures in single-failure-per-subject data
  1,976.758  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  copd_admit
   analysis time _t:  (copd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_copd_pre_eth.svg not found)
(file ./output/graphs/km_copd_pre_eth.svg written in SVG format)

         failure _d:  copd_admit
   analysis time _t:  (copd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -597.12399
Iteration 1:   log likelihood = -596.93873
Iteration 2:   log likelihood = -596.93832
Iteration 3:   log likelihood = -596.93832
Refining estimates:
Iteration 0:   log likelihood = -596.93832

Cox regression -- Breslow method for ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           87
Time at risk    =  1976.758385
                                                LR chi2(4)       =        0.37
Log likelihood  =   -596.93832                  Prob > chi2      =      0.9848

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.025831   .3328295     0.08   0.937     .5431311    1.937524
      Black  |   .8445745   .2974789    -0.48   0.632     .4234722    1.684423
      Mixed  |   .9611865    .320892    -0.12   0.906     .4996135    1.849188
      Other  |   .9966246   .3278092    -0.01   0.992      .523064    1.898927
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_copd_eth.ster not found)
file ./output/tempdata/crude_copd_eth.ster saved
(note: file ./output/tempdata/surv_crude_copd_eth16.dta not found)
file ./output/tempdata/surv_crude_copd_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.29416         7.52        1         0.0061
      3.eth5      |     -0.07402         0.48        1         0.4901
      4.eth5      |      0.00080         0.00        1         0.9940
      5.eth5      |     -0.15445         2.07        1         0.1499
      ------------+---------------------------------------------------
      global test |                     10.38        4         0.0345
      ----------------------------------------------------------------

         failure _d:  copd_admit
   analysis time _t:  (copd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -442.89659
Iteration 1:   log likelihood = -441.04671
Iteration 2:   log likelihood = -441.03388
Iteration 3:   log likelihood = -441.03388
Refining estimates:
Iteration 0:   log likelihood = -441.03388

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           67
Time at risk    =  1531.288159
                                                LR chi2(8)       =        3.73
Log likelihood  =   -441.03388                  Prob > chi2      =      0.8810

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.140393   .4040719     0.37   0.711     .5694437      2.2838
      Black  |   .6316579   .2780135    -1.04   0.297     .2665877    1.496662
      Mixed  |   .8730905   .3386569    -0.35   0.726     .4082185     1.86735
      Other  |    1.10059   .4021267     0.26   0.793     .5377972    2.252331
             |
     age_cat |
41 - 60 y..  |   .8162689   .2415065    -0.69   0.493      .457079    1.457724
61 - 80 y..  |   .8034043   .2509745    -0.70   0.483     .4355403    1.481972
  >80 years  |    .622675   .3781686    -0.78   0.435      .189366    2.047485
             |
        male |
       Male  |   .8287663   .2041462    -0.76   0.446     .5113985    1.343089
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_copd_eth.ster not found)
file ./output/tempdata/model1_copd_eth.ster saved
(note: file ./output/tempdata/surv_model1_copd_eth.dta not found)
file ./output/tempdata/surv_model1_copd_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.24693         4.11        1         0.0427
      3.eth5      |     -0.04147         0.12        1         0.7326
      4.eth5      |      0.03307         0.07        1         0.7871
      5.eth5      |     -0.13749         1.27        1         0.2597
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.08290         0.46        1         0.4988
      2.age_cat   |     -0.20730         2.98        1         0.0842
      3.age_cat   |      0.00515         0.00        1         0.9663
      0b.male     |            .            .        1             .
      1.male      |     -0.12534         1.05        1         0.3054
      ------------+---------------------------------------------------
      global test |                     11.25        8         0.1881
      ----------------------------------------------------------------

         failure _d:  copd_admit
   analysis time _t:  (copd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -442.89659
Iteration 1:   log likelihood = -437.60922
Iteration 2:   log likelihood = -435.75153
Iteration 3:   log likelihood =  -435.7078
Iteration 4:   log likelihood = -435.70762
Refining estimates:
Iteration 0:   log likelihood = -435.70762

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           67
Time at risk    =  1531.288159
                                                LR chi2(15)      =       14.38
Log likelihood  =   -435.70762                  Prob > chi2      =      0.4971

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.264117   .4547507     0.65   0.515      .624565    2.558566
      Black  |   .7006813   .3114547    -0.80   0.424     .2931967    1.674487
      Mixed  |   .8337238   .3245551    -0.47   0.640     .3887437    1.788056
      Other  |   1.205735   .4456949     0.51   0.613     .5842638    2.488256
             |
     age_cat |
41 - 60 y..  |   .7496813   .2243566    -0.96   0.336      .417002    1.347768
61 - 80 y..  |   .7895044   .2484729    -0.75   0.453     .4260536    1.463001
  >80 years  |   .6757627   .4140009    -0.64   0.522     .2033818     2.24531
             |
        male |
       Male  |    .819758   .2027252    -0.80   0.422     .5048758    1.331027
             |
urban_rura~n |
      Urban  |   .8326241   .2131332    -0.72   0.474     .5041507     1.37511
             |
         imd |
          1  |   1.079668   .8276819     0.10   0.920      .240299    4.850964
          2  |   1.102371   .8422743     0.13   0.898     .2465819    4.928268
          3  |    1.61199   1.216154     0.63   0.527     .3674342    7.072043
          4  |    .883121   .6839793    -0.16   0.873     .1935364    4.029748
          5  |   .8088093   .6294904    -0.27   0.785      .175939    3.718178
             |
  1.shielded |   8.855114   5.631895     3.43   0.001      2.54581    30.80083
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_copd_eth.ster not found)
file ./output/tempdata/model2_copd_eth.ster saved
(note: file ./output/tempdata/surv_model2_copd_eth.dta not found)
file ./output/tempdata/surv_model2_copd_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.28358         5.51        1         0.0189
      3.eth5      |     -0.07978         0.43        1         0.5123
      4.eth5      |      0.03453         0.08        1         0.7776
      5.eth5      |     -0.17572         2.23        1         0.1353
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.04360         0.13        1         0.7225
      2.age_cat   |     -0.18465         2.39        1         0.1219
      3.age_cat   |      0.00456         0.00        1         0.9700
      0b.male     |            .            .        1             .
      1.male      |     -0.12061         0.96        1         0.3273
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.05894         0.25        1         0.6198
      0b.imd      |            .            .        1             .
      1.imd       |      0.13698         1.23        1         0.2681
      2.imd       |      0.06971         0.32        1         0.5691
      3.imd       |      0.10377         0.72        1         0.3958
      4.imd       |      0.10028         0.66        1         0.4169
      5.imd       |      0.10866         0.82        1         0.3641
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.24406         5.46        1         0.0195
      ------------+---------------------------------------------------
      global test |                     18.35       15         0.2445
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

   mh_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        906       90.60       90.60
          1 |         94        9.40      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  906
(93 real changes made)

                id:  patient_id
     failure event:  mh_admit != 0 & mh_admit < .
obs. time interval:  (mh_end[_n-1], mh_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         94  failures in single-failure-per-subject data
  1,963.693  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  mh_admit
   analysis time _t:  (mh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_mh_pre_eth.svg not found)
(file ./output/graphs/km_mh_pre_eth.svg written in SVG format)

         failure _d:  mh_admit
   analysis time _t:  (mh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -644.82115
Iteration 1:   log likelihood = -643.00402
Iteration 2:   log likelihood = -643.00148
Iteration 3:   log likelihood = -643.00148
Refining estimates:
Iteration 0:   log likelihood = -643.00148

Cox regression -- Breslow method for ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           94
Time at risk    =  1963.693361
                                                LR chi2(4)       =        3.64
Log likelihood  =   -643.00148                  Prob > chi2      =      0.4570

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .9958372   .3415705    -0.01   0.990     .5084259    1.950514
      Black  |   .9454579   .3412206    -0.16   0.877     .4660572    1.917985
      Mixed  |   1.481871   .4739753     1.23   0.219      .791688    2.773745
      Other  |   1.428669   .4569593     1.12   0.265     .7632643    2.674164
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_mh_eth.ster not found)
file ./output/tempdata/crude_mh_eth.ster saved
(note: file ./output/tempdata/surv_crude_mh_eth16.dta not found)
file ./output/tempdata/surv_crude_mh_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.05924         0.33        1         0.5659
      3.eth5      |     -0.03687         0.13        1         0.7209
      4.eth5      |      0.03859         0.14        1         0.7084
      5.eth5      |      0.02572         0.06        1         0.8032
      ------------+---------------------------------------------------
      global test |                      0.97        4         0.9146
      ----------------------------------------------------------------

         failure _d:  mh_admit
   analysis time _t:  (mh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -501.92016
Iteration 1:   log likelihood = -498.55578
Iteration 2:   log likelihood = -498.46972
Iteration 3:   log likelihood = -498.46868
Iteration 4:   log likelihood = -498.46868
Refining estimates:
Iteration 0:   log likelihood = -498.46868

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           76
Time at risk    =  1522.332649
                                                LR chi2(8)       =        6.90
Log likelihood  =   -498.46868                  Prob > chi2      =      0.5471

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .9653238   .3649391    -0.09   0.926      .460127    2.025202
      Black  |   .8598347   .3581301    -0.36   0.717     .3800849    1.945133
      Mixed  |   1.446119   .5160068     1.03   0.301     .7185824    2.910256
      Other  |   1.572662    .548356     1.30   0.194     .7940326    3.114817
             |
     age_cat |
41 - 60 y..  |   1.027843    .282084     0.10   0.920      .600234    1.760082
61 - 80 y..  |   .9770573   .2829427    -0.08   0.936       .55389    1.723521
  >80 years  |   .4088519   .2988049    -1.22   0.221     .0976056    1.712606
             |
        male |
       Male  |   .8237838   .1907772    -0.84   0.403     .5232226       1.297
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_mh_eth.ster not found)
file ./output/tempdata/model1_mh_eth.ster saved
(note: file ./output/tempdata/surv_model1_mh_eth.dta not found)
file ./output/tempdata/surv_model1_mh_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.09178         0.64        1         0.4226
      3.eth5      |     -0.03221         0.08        1         0.7758
      4.eth5      |      0.04637         0.16        1         0.6871
      5.eth5      |      0.04571         0.16        1         0.6880
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.12645         1.18        1         0.2774
      2.age_cat   |      0.02053         0.03        1         0.8569
      3.age_cat   |     -0.15547         1.83        1         0.1758
      0b.male     |            .            .        1             .
      1.male      |     -0.08079         0.52        1         0.4723
      ------------+---------------------------------------------------
      global test |                      4.97        8         0.7608
      ----------------------------------------------------------------

         failure _d:  mh_admit
   analysis time _t:  (mh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -501.92016
Iteration 1:   log likelihood =  -494.9512
Iteration 2:   log likelihood =  -494.8347
Iteration 3:   log likelihood = -494.83365
Iteration 4:   log likelihood = -494.83365
Refining estimates:
Iteration 0:   log likelihood = -494.83365

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           76
Time at risk    =  1522.332649
                                                LR chi2(15)      =       14.17
Log likelihood  =   -494.83365                  Prob > chi2      =      0.5125

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.009478   .3837414     0.02   0.980      .479206    2.126529
      Black  |   .8406256   .3529172    -0.41   0.679      .369186    1.914079
      Mixed  |   1.442656   .5158913     1.02   0.305     .7157721     2.90771
      Other  |   1.591978   .5568849     1.33   0.184     .8020121    3.160045
             |
     age_cat |
41 - 60 y..  |   1.031577   .2843916     0.11   0.910     .6009485    1.770787
61 - 80 y..  |   .9599636   .2804116    -0.14   0.889     .5415185    1.701752
  >80 years  |    .378709   .2781027    -1.32   0.186     .0897906    1.597277
             |
        male |
       Male  |   .8074203    .187843    -0.92   0.358     .5117656    1.273879
             |
urban_rura~n |
      Urban  |   1.175916   .2736229     0.70   0.486     .7452658    1.855418
             |
         imd |
          1  |   1.590976   1.190586     0.62   0.535     .3670103    6.896822
          2  |   .7874878   .6110054    -0.31   0.758     .1721089    3.603165
          3  |   1.331697   1.007611     0.38   0.705     .3022423    5.867536
          4  |   .7141479   .5589552    -0.43   0.667     .1540149    3.311415
          5  |   1.160135   .8785633     0.20   0.845     .2629653    5.118214
             |
  1.shielded |   1.225848   1.246291     0.20   0.841     .1671247    8.991517
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_mh_eth.ster not found)
file ./output/tempdata/model2_mh_eth.ster saved
(note: file ./output/tempdata/surv_model2_mh_eth.dta not found)
file ./output/tempdata/surv_model2_mh_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.07910         0.49        1         0.4846
      3.eth5      |     -0.02208         0.04        1         0.8410
      4.eth5      |      0.03714         0.10        1         0.7486
      5.eth5      |      0.02657         0.05        1         0.8155
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.12634         1.19        1         0.2758
      2.age_cat   |      0.01196         0.01        1         0.9145
      3.age_cat   |     -0.16463         2.04        1         0.1536
      0b.male     |            .            .        1             .
      1.male      |     -0.07042         0.40        1         0.5288
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.19087         2.88        1         0.0898
      0b.imd      |            .            .        1             .
      1.imd       |      0.19920         3.05        1         0.0807
      2.imd       |      0.16841         2.24        1         0.1342
      3.imd       |      0.21060         3.49        1         0.0619
      4.imd       |      0.17164         2.27        1         0.1322
      5.imd       |      0.23627         4.32        1         0.0377
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.08574         0.55        1         0.4578
      ------------+---------------------------------------------------
      global test |                     12.93       15         0.6074
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

   mi_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        979       97.90       97.90
          1 |         21        2.10      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  979
(21 real changes made)

                id:  patient_id
     failure event:  mi_admit != 0 & mi_admit < .
obs. time interval:  (mi_end[_n-1], mi_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         21  failures in single-failure-per-subject data
  2,035.619  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  mi_admit
   analysis time _t:  (mi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_mi_pre_eth.svg not found)
(file ./output/graphs/km_mi_pre_eth.svg written in SVG format)

         failure _d:  mi_admit
   analysis time _t:  (mi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -144.85141
Iteration 1:   log likelihood = -143.44108
Iteration 2:   log likelihood = -143.37433
Iteration 3:   log likelihood = -143.37416
Iteration 4:   log likelihood = -143.37416
Refining estimates:
Iteration 0:   log likelihood = -143.37416

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           21
Time at risk    =  2035.619439
                                                LR chi2(4)       =        2.95
Log likelihood  =   -143.37416                  Prob > chi2      =      0.5655

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .4979485   .4312362    -0.81   0.421     .0912057     2.71861
      Black  |   1.745711   1.126857     0.86   0.388     .4926309    6.186187
      Mixed  |   1.073038   .7587531     0.10   0.921     .2683639    4.290481
      Other  |    1.31111   .8795204     0.40   0.686     .3520751     4.88251
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_mi_eth.ster not found)
file ./output/tempdata/crude_mi_eth.ster saved
(note: file ./output/tempdata/surv_crude_mi_eth16.dta not found)
file ./output/tempdata/surv_crude_mi_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.03052         0.02        1         0.8888
      3.eth5      |     -0.28724         1.73        1         0.1885
      4.eth5      |      0.24556         1.27        1         0.2607
      5.eth5      |     -0.30940         2.01        1         0.1565
      ------------+---------------------------------------------------
      global test |                      9.44        4         0.0511
      ----------------------------------------------------------------

         failure _d:  mi_admit
   analysis time _t:  (mi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -112.94408
Iteration 1:   log likelihood = -108.28248
Iteration 2:   log likelihood = -107.83655
Iteration 3:   log likelihood = -107.75491
Iteration 4:   log likelihood = -107.72679
Iteration 5:   log likelihood = -107.71648
Iteration 6:   log likelihood = -107.71269
Iteration 7:   log likelihood = -107.71129
Iteration 8:   log likelihood = -107.71078
Iteration 9:   log likelihood = -107.71059
Iteration 10:  log likelihood = -107.71052
Iteration 11:  log likelihood =  -107.7105
Iteration 12:  log likelihood = -107.71049
Iteration 13:  log likelihood = -107.71048
Iteration 14:  log likelihood = -107.71048
Iteration 15:  log likelihood = -107.71048
Iteration 16:  log likelihood = -107.71048
Iteration 17:  log likelihood = -107.71048
Iteration 18:  log likelihood = -107.71048
Iteration 19:  log likelihood = -107.71048
Iteration 20:  log likelihood = -107.71048
Iteration 21:  log likelihood = -107.71048
Iteration 22:  log likelihood = -107.71048
Iteration 23:  log likelihood = -107.71048
Iteration 24:  log likelihood = -107.71048
Iteration 25:  log likelihood = -107.71048
Iteration 26:  log likelihood = -107.71048
Iteration 27:  log likelihood = -107.71048
Iteration 28:  log likelihood = -107.71048
Iteration 29:  log likelihood = -107.71048
Iteration 30:  log likelihood = -107.71048
Iteration 31:  log likelihood = -107.71048
Iteration 32:  log likelihood = -107.71048
Iteration 33:  log likelihood = -107.71048
Iteration 34:  log likelihood = -107.71048
Iteration 35:  log likelihood = -107.71048
Iteration 36:  log likelihood = -107.71048
Iteration 37:  log likelihood = -107.71048
Iteration 38:  log likelihood = -107.71048
Iteration 39:  log likelihood = -107.71048
Iteration 40:  log likelihood = -107.71048
Iteration 41:  log likelihood = -107.71048
Refining estimates:
Iteration 0:   log likelihood = -107.71048
Iteration 1:   log likelihood = -107.71048
Iteration 2:   log likelihood = -107.71048

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           17
Time at risk    =  1579.663244
                                                LR chi2(8)       =       10.47
Log likelihood  =   -107.71048                  Prob > chi2      =      0.2338

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |    .237532   .2656342    -1.29   0.199     .0265348     2.12632
      Black  |   1.586429    1.07311     0.68   0.495     .4213486    5.973099
      Mixed  |   .8034046   .6144398    -0.29   0.775     .1794484    3.596905
      Other  |   1.058037    .748412     0.08   0.936     .2644818    4.232588
             |
     age_cat |
41 - 60 y..  |   .5191262   .3081602    -1.10   0.269     .1621767    1.661719
61 - 80 y..  |   .4444262   .2941156    -1.23   0.220     .1214745    1.625976
  >80 years  |   1.26e-19   2.92e-10    -0.00   1.000            0           .
             |
        male |
       Male  |   2.003795   1.026145     1.36   0.175     .7344328    5.467067
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_mi_eth.ster not found)
file ./output/tempdata/model1_mi_eth.ster saved
(note: file ./output/tempdata/surv_model1_mi_eth.dta not found)
file ./output/tempdata/surv_model1_mi_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.10604         0.19        1         0.6629
      3.eth5      |     -0.21902         0.84        1         0.3604
      4.eth5      |      0.25003         1.08        1         0.2987
      5.eth5      |     -0.28884         1.45        1         0.2286
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.43480         3.10        1         0.0785
      2.age_cat   |     -0.09443         0.15        1         0.7029
      3.age_cat   |     -0.49959         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |      0.35526         2.37        1         0.1237
      ------------+---------------------------------------------------
      global test |                     12.31        8         0.1380
      ----------------------------------------------------------------

         failure _d:  mi_admit
   analysis time _t:  (mi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -112.94408
Iteration 1:   log likelihood = -104.39906
Iteration 2:   log likelihood = -103.91654
Iteration 3:   log likelihood = -103.82615
Iteration 4:   log likelihood =  -103.7944
Iteration 5:   log likelihood = -103.78271
Iteration 6:   log likelihood =  -103.7784
Iteration 7:   log likelihood = -103.77682
Iteration 8:   log likelihood = -103.77624
Iteration 9:   log likelihood = -103.77602
Iteration 10:  log likelihood = -103.77595
Iteration 11:  log likelihood = -103.77592
Iteration 12:  log likelihood = -103.77591
Iteration 13:  log likelihood =  -103.7759
Iteration 14:  log likelihood =  -103.7759
Iteration 15:  log likelihood =  -103.7759
Iteration 16:  log likelihood =  -103.7759
Iteration 17:  log likelihood =  -103.7759
Iteration 18:  log likelihood =  -103.7759
Iteration 19:  log likelihood =  -103.7759
Iteration 20:  log likelihood =  -103.7759
Iteration 21:  log likelihood =  -103.7759
Iteration 22:  log likelihood =  -103.7759
Iteration 23:  log likelihood =  -103.7759
Iteration 24:  log likelihood =  -103.7759
Iteration 25:  log likelihood =  -103.7759
Iteration 26:  log likelihood =  -103.7759
Iteration 27:  log likelihood =  -103.7759
Iteration 28:  log likelihood =  -103.7759
Iteration 29:  log likelihood =  -103.7759
Iteration 30:  log likelihood =  -103.7759
Iteration 31:  log likelihood =  -103.7759
Iteration 32:  log likelihood =  -103.7759
Iteration 33:  log likelihood =  -103.7759
Iteration 34:  log likelihood =  -103.7759
Iteration 35:  log likelihood =  -103.7759
Iteration 36:  log likelihood =  -103.7759
Iteration 37:  log likelihood =  -103.7759
Iteration 38:  log likelihood =  -103.7759
Iteration 39:  log likelihood =  -103.7759
Refining estimates:
Iteration 0:   log likelihood =  -103.7759
Iteration 1:   log likelihood =  -103.7759

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           17
Time at risk    =  1579.663244
                                                LR chi2(15)      =       18.34
Log likelihood  =    -103.7759                  Prob > chi2      =      0.2454

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .2353927   .2636574    -1.29   0.197      .026205    2.114474
      Black  |   1.461391   .9861457     0.56   0.574     .3893824    5.484747
      Mixed  |   .8345845   .6433153    -0.23   0.815      .184224    3.780893
      Other  |   1.030846   .7342921     0.04   0.966     .2551913    4.164104
             |
     age_cat |
41 - 60 y..  |   .4949285   .2954737    -1.18   0.239     .1535935    1.594822
61 - 80 y..  |   .4617313   .3080757    -1.16   0.247     .1248682    1.707367
  >80 years  |   2.42e-18   1.29e-09    -0.00   1.000            0           .
             |
        male |
       Male  |   1.788644   .9202943     1.13   0.258     .6524741    4.903257
             |
urban_rura~n |
      Urban  |   1.801927   .9085112     1.17   0.243     .6707657    4.840646
             |
         imd |
          1  |   .3304242   .4097297    -0.89   0.372     .0290785    3.754665
          2  |   .9303882    1.02005    -0.07   0.948     .1085007    7.978035
          3  |   .2969262   .3713774    -0.97   0.332     .0255869     3.44572
          4  |   .1637247   .2337862    -1.27   0.205     .0099693    2.688836
          5  |   .7775915   .8676184    -0.23   0.822     .0872973    6.926316
             |
  1.shielded |   4.34e-18   4.94e-09    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_mi_eth.ster not found)
file ./output/tempdata/model2_mi_eth.ster saved
(note: file ./output/tempdata/surv_model2_mi_eth.dta not found)
file ./output/tempdata/surv_model2_mi_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.10944         0.20        1         0.6583
      3.eth5      |     -0.19389         0.68        1         0.4110
      4.eth5      |      0.18915         0.65        1         0.4202
      5.eth5      |     -0.31472         1.81        1         0.1784
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.37289         2.54        1         0.1107
      2.age_cat   |     -0.10330         0.18        1         0.6679
      3.age_cat   |     -0.07424         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |      0.38001         2.76        1         0.0965
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.14639         0.40        1         0.5273
      0b.imd      |            .            .        1             .
      1.imd       |      0.13094         0.30        1         0.5831
      2.imd       |      0.23834         0.97        1         0.3235
      3.imd       |      0.42720         3.40        1         0.0651
      4.imd       |      0.19102         0.60        1         0.4367
      5.imd       |      0.11685         0.25        1         0.6187
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.06847         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     18.03       15         0.2610
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

stroke_admi |
          t |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        967       96.70       96.70
          1 |         33        3.30      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  967
(33 real changes made)

                id:  patient_id
     failure event:  stroke_admit != 0 & stroke_admit < .
obs. time interval:  (stroke_end[_n-1], stroke_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         33  failures in single-failure-per-subject data
  2,025.552  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  stroke_admit
   analysis time _t:  (stroke_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_stroke_pre_eth.svg not found)
(file ./output/graphs/km_stroke_pre_eth.svg written in SVG format)

         failure _d:  stroke_admit
   analysis time _t:  (stroke_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -227.42004
Iteration 1:   log likelihood = -227.19909
Iteration 2:   log likelihood = -227.19876
Iteration 3:   log likelihood = -227.19876
Refining estimates:
Iteration 0:   log likelihood = -227.19876

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           33
Time at risk    =  2025.552361
                                                LR chi2(4)       =        0.44
Log likelihood  =   -227.19876                  Prob > chi2      =      0.9788

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |    1.35313   .7307756     0.56   0.575     .4695015    3.899798
      Black  |    1.15073   .6643747     0.24   0.808     .3711345    3.567921
      Mixed  |   1.265391   .7039996     0.42   0.672     .4252648    3.765219
      Other  |   1.042081   .6016462     0.07   0.943     .3360929    3.231047
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_stroke_eth.ster not found)
file ./output/tempdata/crude_stroke_eth.ster saved
(note: file ./output/tempdata/surv_crude_stroke_eth16.dta not found)
file ./output/tempdata/surv_crude_stroke_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.33378         3.67        1         0.0554
      3.eth5      |     -0.05562         0.10        1         0.7494
      4.eth5      |     -0.12371         0.50        1         0.4775
      5.eth5      |     -0.05028         0.08        1         0.7728
      ------------+---------------------------------------------------
      global test |                      4.79        4         0.3099
      ----------------------------------------------------------------

         failure _d:  stroke_admit
   analysis time _t:  (stroke_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -146.08956
Iteration 1:   log likelihood = -141.91276
Iteration 2:   log likelihood = -141.53875
Iteration 3:   log likelihood = -141.43997
Iteration 4:   log likelihood =  -141.4039
Iteration 5:   log likelihood = -141.39067
Iteration 6:   log likelihood =  -141.3858
Iteration 7:   log likelihood = -141.38401
Iteration 8:   log likelihood = -141.38336
Iteration 9:   log likelihood = -141.38311
Iteration 10:  log likelihood = -141.38302
Iteration 11:  log likelihood = -141.38299
Iteration 12:  log likelihood = -141.38298
Iteration 13:  log likelihood = -141.38298
Iteration 14:  log likelihood = -141.38297
Iteration 15:  log likelihood = -141.38297
Iteration 16:  log likelihood = -141.38297
Iteration 17:  log likelihood = -141.38297
Iteration 18:  log likelihood = -141.38297
Iteration 19:  log likelihood = -141.38297
Iteration 20:  log likelihood = -141.38297
Iteration 21:  log likelihood = -141.38297
Iteration 22:  log likelihood = -141.38297
Iteration 23:  log likelihood = -141.38297
Iteration 24:  log likelihood = -141.38297
Iteration 25:  log likelihood = -141.38297
Iteration 26:  log likelihood = -141.38297
Iteration 27:  log likelihood = -141.38297
Iteration 28:  log likelihood = -141.38297
Iteration 29:  log likelihood = -141.38297
Iteration 30:  log likelihood = -141.38297
Iteration 31:  log likelihood = -141.38297
Iteration 32:  log likelihood = -141.38297
Iteration 33:  log likelihood = -141.38297
Iteration 34:  log likelihood = -141.38297
Iteration 35:  log likelihood = -141.38297
Iteration 36:  log likelihood = -141.38297
Iteration 37:  log likelihood = -141.38297
Iteration 38:  log likelihood = -141.38297
Iteration 39:  log likelihood = -141.38297
Iteration 40:  log likelihood = -141.38297
Iteration 41:  log likelihood = -141.38297
Iteration 42:  log likelihood = -141.38297
Iteration 43:  log likelihood = -141.38297
Iteration 44:  log likelihood = -141.38297
Refining estimates:
Iteration 0:   log likelihood = -141.38297

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           22
Time at risk    =  1575.362081
                                                LR chi2(7)       =        9.41
Log likelihood  =   -141.38297                  Prob > chi2      =      0.2243

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .6865707   .4437388    -0.58   0.561     .1934388     2.43684
      Black  |    1.24361    .762138     0.36   0.722      .374137    4.133685
      Mixed  |    .586854    .415865    -0.75   0.452      .146332    2.353536
      Other  |   .7144627   .4613223    -0.52   0.603     .2015423    2.532753
             |
     age_cat |
41 - 60 y..  |   1.305708   .7560845     0.46   0.645     .4197092    4.062035
61 - 80 y..  |   2.532049   1.317251     1.79   0.074     .9133782    7.019298
  >80 years  |   9.59e-20          .        .       .            .           .
             |
        male |
       Male  |   1.762793   .7895865     1.27   0.206     .7327115    4.241014
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_stroke_eth.ster not found)
file ./output/tempdata/model1_stroke_eth.ster saved
(note: file ./output/tempdata/surv_model1_stroke_eth.dta not found)
file ./output/tempdata/surv_model1_stroke_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.47350         4.92        1         0.0266
      3.eth5      |      0.03045         0.02        1         0.8852
      4.eth5      |     -0.10414         0.25        1         0.6186
      5.eth5      |     -0.23240         1.18        1         0.2772
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.10526         0.24        1         0.6262
      2.age_cat   |      0.09636         0.21        1         0.6465
      3.age_cat   |            .            .        1             .
      0b.male     |            .            .        1             .
      1.male      |      0.03736         0.03        1         0.8643
      ------------+---------------------------------------------------
      global test |                      7.77        7         0.3532
      ----------------------------------------------------------------

         failure _d:  stroke_admit
   analysis time _t:  (stroke_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -146.08956
Iteration 1:   log likelihood = -138.78125
Iteration 2:   log likelihood = -138.08225
Iteration 3:   log likelihood = -137.92301
Iteration 4:   log likelihood = -137.86471
Iteration 5:   log likelihood =  -137.8433
Iteration 6:   log likelihood = -137.83542
Iteration 7:   log likelihood = -137.83252
Iteration 8:   log likelihood = -137.83146
Iteration 9:   log likelihood = -137.83107
Iteration 10:  log likelihood = -137.83092
Iteration 11:  log likelihood = -137.83087
Iteration 12:  log likelihood = -137.83085
Iteration 13:  log likelihood = -137.83084
Iteration 14:  log likelihood = -137.83084
Iteration 15:  log likelihood = -137.83084
Iteration 16:  log likelihood = -137.83084
Iteration 17:  log likelihood = -137.83084
Iteration 18:  log likelihood = -137.83084
Iteration 19:  log likelihood = -137.83084
Iteration 20:  log likelihood = -137.83084
Iteration 21:  log likelihood = -137.83084
Iteration 22:  log likelihood = -137.83084
Iteration 23:  log likelihood = -137.83084
Iteration 24:  log likelihood = -137.83084
Iteration 25:  log likelihood = -137.83084
Iteration 26:  log likelihood = -137.83084
Iteration 27:  log likelihood = -137.83084
Iteration 28:  log likelihood = -137.83084
Iteration 29:  log likelihood = -137.83084
Iteration 30:  log likelihood = -137.83084
Iteration 31:  log likelihood = -137.83084
Iteration 32:  log likelihood = -137.83084
Iteration 33:  log likelihood = -137.83084
Iteration 34:  log likelihood = -137.83084
Iteration 35:  log likelihood = -137.83084
Iteration 36:  log likelihood = -137.83084
Refining estimates:
Iteration 0:   log likelihood = -137.83084
Iteration 1:   log likelihood = -137.83084
Iteration 2:   log likelihood = -137.83084
Iteration 3:   log likelihood = -137.83084
Iteration 4:   log likelihood = -137.83084
Iteration 5:   log likelihood = -137.83084

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           22
Time at risk    =  1575.362081
                                                LR chi2(14)      =       16.52
Log likelihood  =   -137.83084                  Prob > chi2      =      0.2828

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .6354034   .4111984    -0.70   0.483     .1787304    2.258919
      Black  |   1.148266   .7040074     0.23   0.822     .3452766    3.818723
      Mixed  |   .5400513   .3835641    -0.87   0.386     .1342396    2.172648
      Other  |   .6943838   .4493458    -0.56   0.573     .1953326    2.468451
             |
     age_cat |
41 - 60 y..  |   1.284993    .745392     0.43   0.666     .4122309    4.005542
61 - 80 y..  |   2.407158   1.260832     1.68   0.094     .8623003    6.719713
  >80 years  |   1.63e-18   1.26e-09    -0.00   1.000            0           .
             |
        male |
       Male  |   1.631884   .7336691     1.09   0.276     .6760869    3.938909
             |
urban_rura~n |
      Urban  |   1.080816   .4738523     0.18   0.859     .4576854    2.552327
             |
         imd |
          1  |   8.64e+08   7.25e+08    24.55   0.000     1.67e+08    4.47e+09
          2  |   1.30e+09   1.03e+09    26.42   0.000     2.74e+08    6.16e+09
          3  |   3.75e+08   3.75e+08    19.72   0.000     5.26e+07    2.67e+09
          4  |   3.53e+08          .        .       .            .           .
          5  |   8.66e+08   7.26e+08    24.53   0.000     1.67e+08    4.48e+09
             |
  1.shielded |   1.41e-18   2.70e-09    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_stroke_eth.ster not found)
file ./output/tempdata/model2_stroke_eth.ster saved
(note: file ./output/tempdata/surv_model2_stroke_eth.dta not found)
file ./output/tempdata/surv_model2_stroke_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.50107         5.37        1         0.0205
      3.eth5      |      0.01152         0.00        1         0.9575
      4.eth5      |     -0.12641         0.35        1         0.5537
      5.eth5      |     -0.22041         1.05        1         0.3062
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.11185         0.28        1         0.5998
      2.age_cat   |      0.07967         0.15        1         0.7007
      3.age_cat   |      0.07770         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |      0.00793         0.00        1         0.9716
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.25056         1.42        1         0.2330
      0b.imd      |            .            .        1             .
      1.imd       |     -0.11750         0.31        1         0.5762
      2.imd       |      0.11680         0.30        1         0.5819
      3.imd       |      0.00298         0.00        1         0.9887
      4.imd       |            .            .        1             .
      5.imd       |      0.07065         0.11        1         0.7448
      0b.shielded |            .            .        1             .
      1.shielded  |      0.03689         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     11.86       14         0.6173
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

   hf_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        974       97.40       97.40
          1 |         26        2.60      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  974
(26 real changes made)

                id:  patient_id
     failure event:  hf_admit != 0 & hf_admit < .
obs. time interval:  (hf_end[_n-1], hf_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         26  failures in single-failure-per-subject data
  2,033.355  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  hf_admit
   analysis time _t:  (hf_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_hf_pre_eth.svg not found)
(file ./output/graphs/km_hf_pre_eth.svg written in SVG format)

         failure _d:  hf_admit
   analysis time _t:  (hf_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -179.27281
Iteration 1:   log likelihood = -178.27909
Iteration 2:   log likelihood = -178.25312
Iteration 3:   log likelihood = -178.25307
Refining estimates:
Iteration 0:   log likelihood = -178.25307

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           26
Time at risk    =  2033.355236
                                                LR chi2(4)       =        2.04
Log likelihood  =   -178.25307                  Prob > chi2      =      0.7285

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .4276667   .2951192    -1.23   0.218     .1105906    1.653837
      Black  |   .9802462   .5453593    -0.04   0.971      .329435    2.916759
      Mixed  |    .763938   .4473171    -0.46   0.646     .2424626    2.406975
      Other  |   .7448425   .4361361    -0.50   0.615     .2364018    2.346811
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_hf_eth.ster not found)
file ./output/tempdata/crude_hf_eth.ster saved
(note: file ./output/tempdata/surv_crude_hf_eth16.dta not found)
file ./output/tempdata/surv_crude_hf_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.40591         4.29        1         0.0384
      3.eth5      |      0.07118         0.13        1         0.7168
      4.eth5      |      0.13386         0.47        1         0.4952
      5.eth5      |     -0.33252         2.87        1         0.0901
      ------------+---------------------------------------------------
      global test |                     10.69        4         0.0303
      ----------------------------------------------------------------

         failure _d:  hf_admit
   analysis time _t:  (hf_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -139.46285
Iteration 1:   log likelihood =  -136.9066
Iteration 2:   log likelihood = -136.83582
Iteration 3:   log likelihood = -136.83547
Iteration 4:   log likelihood = -136.83547
Refining estimates:
Iteration 0:   log likelihood = -136.83547

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           21
Time at risk    =  1576.876112
                                                LR chi2(8)       =        5.25
Log likelihood  =   -136.83547                  Prob > chi2      =      0.7300

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .3273278   .2673306    -1.37   0.171     .0660391    1.622424
      Black  |   1.040233   .6364225     0.06   0.949     .3135874    3.450661
      Mixed  |   .5348089   .3786411    -0.88   0.377     .1335223    2.142119
      Other  |   .9307207   .5640275    -0.12   0.906     .2837797    3.052512
             |
     age_cat |
41 - 60 y..  |   .5023585   .2978196    -1.16   0.246     .1571756    1.605619
61 - 80 y..  |    .764331     .42123    -0.49   0.626     .2595232    2.251058
  >80 years  |   1.308074   1.017331     0.35   0.730     .2848561    6.006739
             |
        male |
       Male  |   .9272834   .4091447    -0.17   0.864     .3905146     2.20185
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_hf_eth.ster not found)
file ./output/tempdata/model1_hf_eth.ster saved
(note: file ./output/tempdata/surv_model1_hf_eth.dta not found)
file ./output/tempdata/surv_model1_hf_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.44923         4.29        1         0.0383
      3.eth5      |     -0.09912         0.22        1         0.6418
      4.eth5      |      0.04601         0.04        1         0.8330
      5.eth5      |     -0.43340         3.89        1         0.0486
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.13317         0.36        1         0.5511
      2.age_cat   |     -0.09615         0.19        1         0.6594
      3.age_cat   |     -0.19614         0.80        1         0.3711
      0b.male     |            .            .        1             .
      1.male      |     -0.21601         0.99        1         0.3193
      ------------+---------------------------------------------------
      global test |                     10.61        8         0.2246
      ----------------------------------------------------------------

         failure _d:  hf_admit
   analysis time _t:  (hf_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -139.46285
Iteration 1:   log likelihood = -135.02139
Iteration 2:   log likelihood = -134.68079
Iteration 3:   log likelihood = -134.60049
Iteration 4:   log likelihood = -134.57128
Iteration 5:   log likelihood = -134.56056
Iteration 6:   log likelihood = -134.55662
Iteration 7:   log likelihood = -134.55517
Iteration 8:   log likelihood = -134.55463
Iteration 9:   log likelihood = -134.55444
Iteration 10:  log likelihood = -134.55436
Iteration 11:  log likelihood = -134.55434
Iteration 12:  log likelihood = -134.55433
Iteration 13:  log likelihood = -134.55432
Iteration 14:  log likelihood = -134.55432
Iteration 15:  log likelihood = -134.55432
Iteration 16:  log likelihood = -134.55432
Iteration 17:  log likelihood = -134.55432
Iteration 18:  log likelihood = -134.55432
Iteration 19:  log likelihood = -134.55432
Iteration 20:  log likelihood = -134.55432
Iteration 21:  log likelihood = -134.55432
Iteration 22:  log likelihood = -134.55432
Iteration 23:  log likelihood = -134.55432
Iteration 24:  log likelihood = -134.55432
Iteration 25:  log likelihood = -134.55432
Iteration 26:  log likelihood = -134.55432
Iteration 27:  log likelihood = -134.55432
Iteration 28:  log likelihood = -134.55432
Iteration 29:  log likelihood = -134.55432
Iteration 30:  log likelihood = -134.55432
Iteration 31:  log likelihood = -134.55432
Refining estimates:
Iteration 0:   log likelihood = -134.55432
Iteration 1:   log likelihood = -134.55432
Iteration 2:   log likelihood = -134.55432

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           21
Time at risk    =  1576.876112
                                                LR chi2(14)      =        9.82
Log likelihood  =   -134.55432                  Prob > chi2      =      0.7754

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .3263207   .2668627    -1.37   0.171     .0656959     1.62088
      Black  |    1.09493   .6708254     0.15   0.882     .3295223    3.638211
      Mixed  |   .5198485   .3683895    -0.92   0.356     .1296208    2.084869
      Other  |    .924127   .5605964    -0.13   0.897      .281432    3.034519
             |
     age_cat |
41 - 60 y..  |   .5216929    .310741    -1.09   0.275     .1623325     1.67658
61 - 80 y..  |   .7961413   .4408226    -0.41   0.681     .2689557    2.356674
  >80 years  |    1.54004   1.213671     0.55   0.584     .3286389    7.216807
             |
        male |
       Male  |   .9536746   .4237098    -0.11   0.915     .3992256    2.278149
             |
urban_rura~n |
      Urban  |   .8864713   .4039401    -0.26   0.791     .3629076    2.165376
             |
         imd |
          1  |   5.17e+08   4.48e+08    23.13   0.000     9.44e+07    2.83e+09
          2  |   6.81e+08   5.73e+08    24.19   0.000     1.31e+08    3.54e+09
          3  |   6.00e+08   5.24e+08    23.16   0.000     1.08e+08    3.32e+09
          4  |   7.80e+08   6.42e+08    24.87   0.000     1.55e+08    3.92e+09
          5  |   2.53e+08          .        .       .            .           .
             |
  1.shielded |   5.13e-15   1.54e-07    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_hf_eth.ster not found)
file ./output/tempdata/model2_hf_eth.ster saved
(note: file ./output/tempdata/surv_model2_hf_eth.dta not found)
file ./output/tempdata/surv_model2_hf_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.46121         4.32        1         0.0376
      3.eth5      |     -0.09773         0.21        1         0.6474
      4.eth5      |      0.04776         0.05        1         0.8228
      5.eth5      |     -0.42920         3.72        1         0.0539
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.14912         0.43        1         0.5144
      2.age_cat   |     -0.08574         0.16        1         0.6923
      3.age_cat   |     -0.15180         0.49        1         0.4817
      0b.male     |            .            .        1             .
      1.male      |     -0.20866         0.98        1         0.3218
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.04046         0.04        1         0.8516
      0b.imd      |            .            .        1             .
      1.imd       |     -0.06583         0.09        1         0.7628
      2.imd       |      0.22022         1.00        1         0.3176
      3.imd       |      0.09672         0.18        1         0.6676
      4.imd       |      0.04096         0.03        1         0.8587
      5.imd       |            .            .        1             .
      0b.shielded |            .            .        1             .
      1.shielded  |      0.15443         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     13.55       14         0.4839
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

  vte_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        972       97.20       97.20
          1 |         28        2.80      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  972
(28 real changes made)

                id:  patient_id
     failure event:  vte_admit != 0 & vte_admit < .
obs. time interval:  (vte_end[_n-1], vte_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         28  failures in single-failure-per-subject data
  2,033.081  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  vte_admit
   analysis time _t:  (vte_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_vte_pre_eth.svg not found)
(file ./output/graphs/km_vte_pre_eth.svg written in SVG format)

         failure _d:  vte_admit
   analysis time _t:  (vte_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -193.03358
Iteration 1:   log likelihood = -190.03926
Iteration 2:   log likelihood = -189.87156
Iteration 3:   log likelihood = -189.87123
Iteration 4:   log likelihood = -189.87123
Refining estimates:
Iteration 0:   log likelihood = -189.87123

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           28
Time at risk    =  2033.081451
                                                LR chi2(4)       =        6.32
Log likelihood  =   -189.87123                  Prob > chi2      =      0.1762

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.750115   1.096946     0.89   0.372     .5123259    5.978428
      Black  |   .5686316   .4924497    -0.65   0.514     .1041522    3.104514
      Mixed  |   1.343003   .9009149     0.44   0.660     .3606392    5.001278
      Other  |   2.644654   1.564611     1.64   0.100     .8294443    8.432387
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_vte_eth.ster not found)
file ./output/tempdata/crude_vte_eth.ster saved
(note: file ./output/tempdata/surv_crude_vte_eth16.dta not found)
file ./output/tempdata/surv_crude_vte_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.32057         2.88        1         0.0898
      3.eth5      |      0.27345         2.09        1         0.1480
      4.eth5      |      0.27807         2.16        1         0.1413
      5.eth5      |      0.10779         0.33        1         0.5685
      ------------+---------------------------------------------------
      global test |                      5.16        4         0.2717
      ----------------------------------------------------------------

         failure _d:  vte_admit
   analysis time _t:  (vte_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -126.20544
Iteration 1:   log likelihood = -122.08585
Iteration 2:   log likelihood = -121.98216
Iteration 3:   log likelihood =   -121.981
Iteration 4:   log likelihood =   -121.981
Refining estimates:
Iteration 0:   log likelihood =   -121.981

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           19
Time at risk    =  1581.445585
                                                LR chi2(8)       =        8.45
Log likelihood  =     -121.981                  Prob > chi2      =      0.3909

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.339823   1.615064     1.23   0.218     .6048406    9.051598
      Black  |   .4425415   .5126865    -0.70   0.482     .0456912    4.286228
      Mixed  |   .7407356   .6768363    -0.33   0.743     .1235635    4.440544
      Other  |   2.255939   1.596896     1.15   0.250     .5633693    9.033612
             |
     age_cat |
41 - 60 y..  |   1.209215   .7657128     0.30   0.764     .3495392    4.183223
61 - 80 y..  |   2.002166   1.174434     1.18   0.237     .6341629      6.3212
  >80 years  |   2.507228   2.103933     1.10   0.273     .4840727    12.98605
             |
        male |
       Male  |   .7759726   .3591919    -0.55   0.584     .3132071    1.922477
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_vte_eth.ster not found)
file ./output/tempdata/model1_vte_eth.ster saved
(note: file ./output/tempdata/surv_model1_vte_eth.dta not found)
file ./output/tempdata/surv_model1_vte_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.33152         2.06        1         0.1507
      3.eth5      |      0.24908         1.22        1         0.2703
      4.eth5      |      0.09519         0.17        1         0.6810
      5.eth5      |      0.21193         0.84        1         0.3603
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.64164         7.77        1         0.0053
      2.age_cat   |     -0.19473         0.74        1         0.3901
      3.age_cat   |     -0.49245         4.58        1         0.0324
      0b.male     |            .            .        1             .
      1.male      |      0.25374         1.24        1         0.2659
      ------------+---------------------------------------------------
      global test |                     14.19        8         0.0769
      ----------------------------------------------------------------

         failure _d:  vte_admit
   analysis time _t:  (vte_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -126.20544
Iteration 1:   log likelihood = -115.02979
Iteration 2:   log likelihood = -113.42275
Iteration 3:   log likelihood = -113.18524
Iteration 4:   log likelihood = -113.10756
Iteration 5:   log likelihood = -113.07914
Iteration 6:   log likelihood = -113.06871
Iteration 7:   log likelihood = -113.06487
Iteration 8:   log likelihood = -113.06346
Iteration 9:   log likelihood = -113.06294
Iteration 10:  log likelihood = -113.06275
Iteration 11:  log likelihood = -113.06268
Iteration 12:  log likelihood = -113.06265
Iteration 13:  log likelihood = -113.06264
Iteration 14:  log likelihood = -113.06264
Iteration 15:  log likelihood = -113.06264
Iteration 16:  log likelihood = -113.06264
Iteration 17:  log likelihood = -113.06264
Iteration 18:  log likelihood = -113.06264
Iteration 19:  log likelihood = -113.06264
Iteration 20:  log likelihood = -113.06264
Iteration 21:  log likelihood = -113.06264
Iteration 22:  log likelihood = -113.06264
Iteration 23:  log likelihood = -113.06264
Iteration 24:  log likelihood = -113.06264
Iteration 25:  log likelihood = -113.06264
Iteration 26:  log likelihood = -113.06264
Iteration 27:  log likelihood = -113.06264
Iteration 28:  log likelihood = -113.06264
Iteration 29:  log likelihood = -113.06264
Iteration 30:  log likelihood = -113.06264
Iteration 31:  log likelihood = -113.06264
Iteration 32:  log likelihood = -113.06264
Iteration 33:  log likelihood = -113.06264
Iteration 34:  log likelihood = -113.06264
Iteration 35:  log likelihood = -113.06264
Iteration 36:  log likelihood = -113.06264
Refining estimates:
Iteration 0:   log likelihood = -113.06264
Iteration 1:   log likelihood = -113.06264
Iteration 2:   log likelihood = -113.06264

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           19
Time at risk    =  1581.445585
                                                LR chi2(15)      =       26.29
Log likelihood  =   -113.06264                  Prob > chi2      =      0.0351

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.889622   1.309388     0.92   0.358     .4858995    7.348582
      Black  |   .3651892   .4244619    -0.87   0.386     .0374249    3.563488
      Mixed  |    .740157   .6796095    -0.33   0.743     .1223922     4.47604
      Other  |   2.265323   1.615027     1.15   0.251     .5601178    9.161802
             |
     age_cat |
41 - 60 y..  |   1.117152   .7112193     0.17   0.862     .3207798    3.890611
61 - 80 y..  |   1.608943    .948007     0.81   0.420     .5069949    5.105967
  >80 years  |   1.918277   1.637538     0.76   0.445     .3599836    10.22209
             |
        male |
       Male  |   .7740407   .3600699    -0.55   0.582     .3110284    1.926316
             |
urban_rura~n |
      Urban  |   .4270229   .2420224    -1.50   0.133     .1406107    1.296833
             |
         imd |
          1  |   .2418957   .2244588    -1.53   0.126     .0392451    1.490978
          2  |   .4811541   .4002284    -0.88   0.379     .0942425    2.456527
          3  |   .0923408   .1144101    -1.92   0.055     .0081425    1.047203
          4  |   5.40e-18   6.38e-10    -0.00   1.000            0           .
          5  |   .5095407   .4220219    -0.81   0.416     .1005032    2.583318
             |
  1.shielded |   2.21e-17   9.72e-09    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_vte_eth.ster not found)
file ./output/tempdata/model2_vte_eth.ster saved
(note: file ./output/tempdata/surv_model2_vte_eth.dta not found)
file ./output/tempdata/surv_model2_vte_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.31793         1.96        1         0.1616
      3.eth5      |      0.26161         1.35        1         0.2445
      4.eth5      |      0.06601         0.08        1         0.7762
      5.eth5      |      0.22995         0.98        1         0.3226
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.66955         8.16        1         0.0043
      2.age_cat   |     -0.19809         0.81        1         0.3693
      3.age_cat   |     -0.53040         4.94        1         0.0263
      0b.male     |            .            .        1             .
      1.male      |      0.21987         0.91        1         0.3400
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.45668         4.53        1         0.0332
      0b.imd      |            .            .        1             .
      1.imd       |      0.14075         0.38        1         0.5367
      2.imd       |      0.10628         0.23        1         0.6331
      3.imd       |     -0.31532         1.84        1         0.1751
      4.imd       |     -0.01323         0.00        1         1.0000
      5.imd       |     -0.04875         0.04        1         0.8344
      0b.shielded |            .            .        1             .
      1.shielded  |      0.38612         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     23.96       15         0.0657
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

 t1dm_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        981       98.10       98.10
          1 |         19        1.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  981
(19 real changes made)

                id:  patient_id
     failure event:  t1dm_admit != 0 & t1dm_admit < .
obs. time interval:  (t1dm_end[_n-1], t1dm_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         19  failures in single-failure-per-subject data
  2,044.186  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  t1dm_admit
   analysis time _t:  (t1dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_t1dm_pre_eth.svg not found)
(file ./output/graphs/km_t1dm_pre_eth.svg written in SVG format)

         failure _d:  t1dm_admit
   analysis time _t:  (t1dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -131.07427
Iteration 1:   log likelihood = -129.20553
Iteration 2:   log likelihood = -129.12505
Iteration 3:   log likelihood = -129.12502
Refining estimates:
Iteration 0:   log likelihood = -129.12502

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           19
Time at risk    =  2044.186174
                                                LR chi2(4)       =        3.90
Log likelihood  =   -129.12502                  Prob > chi2      =      0.4199

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   3.531376   2.831406     1.57   0.116     .7336062    16.99907
      Black  |   1.144893   1.144893     0.14   0.892     .1612736    8.127681
      Mixed  |   2.147587   1.859867     0.88   0.377     .3933581    11.72502
      Other  |   2.083769     1.8046     0.85   0.397     .3816683    11.37661
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_t1dm_eth.ster not found)
file ./output/tempdata/crude_t1dm_eth.ster saved
(note: file ./output/tempdata/surv_crude_t1dm_eth16.dta not found)
file ./output/tempdata/surv_crude_t1dm_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.28657         1.56        1         0.2115
      3.eth5      |      0.30612         1.78        1         0.1822
      4.eth5      |      0.53128         5.36        1         0.0206
      5.eth5      |      0.37896         2.73        1         0.0986
      ------------+---------------------------------------------------
      global test |                      5.98        4         0.2007
      ----------------------------------------------------------------

         failure _d:  t1dm_admit
   analysis time _t:  (t1dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -93.03887
Iteration 1:   log likelihood = -90.403043
Iteration 2:   log likelihood = -90.306893
Iteration 3:   log likelihood = -90.306034
Iteration 4:   log likelihood = -90.306034
Refining estimates:
Iteration 0:   log likelihood = -90.306034

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           14
Time at risk    =  1587.767283
                                                LR chi2(8)       =        5.47
Log likelihood  =   -90.306034                  Prob > chi2      =      0.7068

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   5.037324   5.519204     1.48   0.140     .5882622    43.13491
      Black  |   1.403167   1.991116     0.24   0.811     .0869443    22.64527
      Mixed  |   4.578327   5.122472     1.36   0.174     .5109023    41.02756
      Other  |   3.268155   3.775029     1.03   0.305     .3396913    31.44278
             |
     age_cat |
41 - 60 y..  |   1.302308   .9230133     0.37   0.709     .3246558    5.224015
61 - 80 y..  |   1.807207   1.214559     0.88   0.379     .4841122    6.746365
  >80 years  |   1.497769   1.677509     0.36   0.718     .1667609    13.45226
             |
        male |
       Male  |   1.275489   .6927759     0.45   0.654     .4398963    3.698306
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_t1dm_eth.ster not found)
file ./output/tempdata/model1_t1dm_eth.ster saved
(note: file ./output/tempdata/surv_model1_t1dm_eth.dta not found)
file ./output/tempdata/surv_model1_t1dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.41118         2.36        1         0.1242
      3.eth5      |      0.48732         3.22        1         0.0729
      4.eth5      |      0.60899         4.99        1         0.0254
      5.eth5      |      0.45141         2.89        1         0.0894
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.31604         1.38        1         0.2408
      2.age_cat   |      0.05831         0.05        1         0.8264
      3.age_cat   |      0.17597         0.43        1         0.5136
      0b.male     |            .            .        1             .
      1.male      |     -0.28635         1.04        1         0.3089
      ------------+---------------------------------------------------
      global test |                     10.18        8         0.2527
      ----------------------------------------------------------------

         failure _d:  t1dm_admit
   analysis time _t:  (t1dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -93.03887
Iteration 1:   log likelihood =  -87.10471
Iteration 2:   log likelihood = -86.711792
Iteration 3:   log likelihood =  -86.65935
Iteration 4:   log likelihood = -86.640937
Iteration 5:   log likelihood = -86.634176
Iteration 6:   log likelihood = -86.631691
Iteration 7:   log likelihood = -86.630777
Iteration 8:   log likelihood = -86.630441
Iteration 9:   log likelihood = -86.630317
Iteration 10:  log likelihood = -86.630272
Iteration 11:  log likelihood = -86.630255
Iteration 12:  log likelihood = -86.630249
Iteration 13:  log likelihood = -86.630246
Iteration 14:  log likelihood = -86.630246
Iteration 15:  log likelihood = -86.630245
Iteration 16:  log likelihood = -86.630245
Iteration 17:  log likelihood = -86.630245
Iteration 18:  log likelihood = -86.630245
Iteration 19:  log likelihood = -86.630245
Iteration 20:  log likelihood = -86.630245
Iteration 21:  log likelihood = -86.630245
Iteration 22:  log likelihood = -86.630245
Iteration 23:  log likelihood = -86.630245
Iteration 24:  log likelihood = -86.630245
Iteration 25:  log likelihood = -86.630245
Iteration 26:  log likelihood = -86.630245
Iteration 27:  log likelihood = -86.630245
Iteration 28:  log likelihood = -86.630245
Iteration 29:  log likelihood = -86.630245
Iteration 30:  log likelihood = -86.630245
Iteration 31:  log likelihood = -86.630245
Refining estimates:
Iteration 0:   log likelihood = -86.630245
Iteration 1:   log likelihood = -86.630245

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           14
Time at risk    =  1587.767283
                                                LR chi2(14)      =       12.82
Log likelihood  =   -86.630245                  Prob > chi2      =      0.5410

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   5.159554   5.667756     1.49   0.135      .599197    44.42779
      Black  |   1.599959   2.273478     0.33   0.741     .0987609    25.91985
      Mixed  |   4.723634   5.301635     1.38   0.167     .5235022    42.62201
      Other  |   3.416228    3.95139     1.06   0.288     .3539991    32.96792
             |
     age_cat |
41 - 60 y..  |   1.401188   1.000281     0.47   0.637     .3458121    5.677445
61 - 80 y..  |   2.116784   1.436695     1.10   0.269     .5596965    8.005722
  >80 years  |   1.855978    2.10673     0.54   0.586     .2006177    17.17024
             |
        male |
       Male  |   1.333277   .7341276     0.52   0.601     .4531405    3.922908
             |
urban_rura~n |
      Urban  |   .4275517   .2794087    -1.30   0.194     .1187739    1.539062
             |
         imd |
          1  |   3.92e+08   4.81e+08    16.11   0.000     3.53e+07    4.35e+09
          2  |   7.36e+08   8.29e+08    18.12   0.000     8.09e+07    6.69e+09
          3  |   4.87e+08   6.02e+08    16.18   0.000     4.32e+07    5.49e+09
          4  |   1.06e+09   1.17e+09    18.84   0.000     1.22e+08    9.24e+09
          5  |   1.86e+08          .        .       .            .           .
             |
  1.shielded |   1.28e-14   2.91e-07    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_t1dm_eth.ster not found)
file ./output/tempdata/model2_t1dm_eth.ster saved
(note: file ./output/tempdata/surv_model2_t1dm_eth.dta not found)
file ./output/tempdata/surv_model2_t1dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.39738         2.35        1         0.1250
      3.eth5      |      0.46729         3.05        1         0.0808
      4.eth5      |      0.59096         4.96        1         0.0260
      5.eth5      |      0.44841         2.95        1         0.0860
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.31507         1.43        1         0.2320
      2.age_cat   |      0.04142         0.03        1         0.8660
      3.age_cat   |      0.10836         0.18        1         0.6723
      0b.male     |            .            .        1             .
      1.male      |     -0.26993         0.96        1         0.3262
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.20951         0.65        1         0.4215
      0b.imd      |            .            .        1             .
      1.imd       |      0.15329         0.34        1         0.5627
      2.imd       |     -0.05468         0.04        1         0.8380
      3.imd       |     -0.09287         0.13        1         0.7191
      4.imd       |     -0.07485         0.08        1         0.7717
      5.imd       |            .            .        1             .
      0b.shielded |            .            .        1             .
      1.shielded  |      0.07096         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     12.51       14         0.5655
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

 t2dm_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        974       97.40       97.40
          1 |         26        2.60      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  974
(26 real changes made)

                id:  patient_id
     failure event:  t2dm_admit != 0 & t2dm_admit < .
obs. time interval:  (t2dm_end[_n-1], t2dm_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         26  failures in single-failure-per-subject data
  2,035.384  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  t2dm_admit
   analysis time _t:  (t2dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_t2dm_pre_eth.svg not found)
(file ./output/graphs/km_t2dm_pre_eth.svg written in SVG format)

         failure _d:  t2dm_admit
   analysis time _t:  (t2dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -179.27281
Iteration 1:   log likelihood = -174.20811
Iteration 2:   log likelihood = -173.71487
Iteration 3:   log likelihood = -173.71315
Iteration 4:   log likelihood = -173.71315
Refining estimates:
Iteration 0:   log likelihood = -173.71315

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           26
Time at risk    =  2035.383984
                                                LR chi2(4)       =       11.12
Log likelihood  =   -173.71315                  Prob > chi2      =      0.0253

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   3.039254   2.481544     1.36   0.173     .6134271    15.05813
      Black  |   2.897628   2.424333     1.27   0.204     .5621798    14.93516
      Mixed  |   6.084999   4.677598     2.35   0.019     1.348757    27.45285
      Other  |   1.041299   1.041299     0.04   0.968      .146681    7.392258
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_t2dm_eth.ster not found)
file ./output/tempdata/crude_t2dm_eth.ster saved
(note: file ./output/tempdata/surv_crude_t2dm_eth16.dta not found)
file ./output/tempdata/surv_crude_t2dm_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.23647         1.45        1         0.2282
      3.eth5      |     -0.12932         0.43        1         0.5098
      4.eth5      |     -0.22684         1.34        1         0.2479
      5.eth5      |     -0.10581         0.29        1         0.5896
      ------------+---------------------------------------------------
      global test |                      1.95        4         0.7451
      ----------------------------------------------------------------

         failure _d:  t2dm_admit
   analysis time _t:  (t2dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -139.46285
Iteration 1:   log likelihood = -133.22095
Iteration 2:   log likelihood = -132.75811
Iteration 3:   log likelihood = -132.75508
Iteration 4:   log likelihood = -132.75508
Refining estimates:
Iteration 0:   log likelihood = -132.75508

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           21
Time at risk    =  1577.456537
                                                LR chi2(8)       =       13.42
Log likelihood  =   -132.75508                  Prob > chi2      =      0.0983

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.981014   2.434786     1.34   0.181     .6013576     14.7773
      Black  |    1.18588   1.189611     0.17   0.865     .1660201    8.470725
      Mixed  |   5.298142   4.148245     2.13   0.033     1.141997    24.58002
      Other  |   1.084575   1.085112     0.08   0.935     .1526285     7.70696
             |
     age_cat |
41 - 60 y..  |   .9733768   .4814681    -0.05   0.956      .369186    2.566355
61 - 80 y..  |   .2844503   .2205676    -1.62   0.105     .0622258    1.300297
  >80 years  |   1.249565   .9694042     0.29   0.774     .2731508    5.716304
             |
        male |
       Male  |   .8678102   .3811019    -0.32   0.747     .3669582    2.052262
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_t2dm_eth.ster not found)
file ./output/tempdata/model1_t2dm_eth.ster saved
(note: file ./output/tempdata/surv_model1_t2dm_eth.dta not found)
file ./output/tempdata/surv_model1_t2dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.24984         1.30        1         0.2551
      3.eth5      |     -0.12179         0.33        1         0.5678
      4.eth5      |     -0.27951         1.64        1         0.2008
      5.eth5      |     -0.11447         0.28        1         0.5976
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.13460         0.40        1         0.5295
      2.age_cat   |     -0.19770         0.81        1         0.3675
      3.age_cat   |     -0.08818         0.16        1         0.6867
      0b.male     |            .            .        1             .
      1.male      |     -0.05810         0.08        1         0.7830
      ------------+---------------------------------------------------
      global test |                      4.10        8         0.8479
      ----------------------------------------------------------------

         failure _d:  t2dm_admit
   analysis time _t:  (t2dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -139.46285
Iteration 1:   log likelihood = -131.44253
Iteration 2:   log likelihood = -130.73399
Iteration 3:   log likelihood = -130.66344
Iteration 4:   log likelihood = -130.63908
Iteration 5:   log likelihood = -130.63013
Iteration 6:   log likelihood = -130.62684
Iteration 7:   log likelihood = -130.62563
Iteration 8:   log likelihood = -130.62518
Iteration 9:   log likelihood = -130.62502
Iteration 10:  log likelihood = -130.62496
Iteration 11:  log likelihood = -130.62494
Iteration 12:  log likelihood = -130.62493
Iteration 13:  log likelihood = -130.62493
Iteration 14:  log likelihood = -130.62493
Iteration 15:  log likelihood = -130.62492
Iteration 16:  log likelihood = -130.62492
Iteration 17:  log likelihood = -130.62492
Iteration 18:  log likelihood = -130.62492
Iteration 19:  log likelihood = -130.62492
Iteration 20:  log likelihood = -130.62492
Iteration 21:  log likelihood = -130.62492
Iteration 22:  log likelihood = -130.62492
Iteration 23:  log likelihood = -130.62492
Iteration 24:  log likelihood = -130.62492
Iteration 25:  log likelihood = -130.62492
Iteration 26:  log likelihood = -130.62492
Iteration 27:  log likelihood = -130.62492
Iteration 28:  log likelihood = -130.62492
Iteration 29:  log likelihood = -130.62492
Iteration 30:  log likelihood = -130.62492
Iteration 31:  log likelihood = -130.62492
Iteration 32:  log likelihood = -130.62492
Refining estimates:
Iteration 0:   log likelihood = -130.62492
Iteration 1:   log likelihood = -130.62492
Iteration 2:   log likelihood = -130.62492

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           21
Time at risk    =  1577.456537
                                                LR chi2(14)      =       17.68
Log likelihood  =   -130.62492                  Prob > chi2      =      0.2219

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.977776   2.439241     1.33   0.183     .5979044    14.83038
      Black  |   1.186463   1.192541     0.17   0.865     .1654597    8.507781
      Mixed  |   5.342511   4.195986     2.13   0.033      1.14608    24.90438
      Other  |   1.074092   1.075763     0.07   0.943     .1508397    7.648338
             |
     age_cat |
41 - 60 y..  |   .9812129   .4883192    -0.04   0.970     .3699531    2.602435
61 - 80 y..  |   .2705293    .210488    -1.68   0.093     .0588747    1.243083
  >80 years  |    1.13617    .901018     0.16   0.872     .2401124    5.376163
             |
        male |
       Male  |   .8623808   .3804121    -0.34   0.737     .3632607    2.047292
             |
urban_rura~n |
      Urban  |   1.104223   .4919006     0.22   0.824     .4611795     2.64389
             |
         imd |
          1  |   4.33e+08   3.79e+08    22.70   0.000     7.77e+07    2.41e+09
          2  |   5.38e+08   4.53e+08    23.89   0.000     1.03e+08    2.80e+09
          3  |   4.75e+08   4.13e+08    22.98   0.000     8.64e+07    2.61e+09
          4  |   2.11e+08          .        .       .            .           .
          5  |   7.01e+08   5.78e+08    24.71   0.000     1.39e+08    3.52e+09
             |
  1.shielded |   1.36e-15   6.98e-08    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_t2dm_eth.ster not found)
file ./output/tempdata/model2_t2dm_eth.ster saved
(note: file ./output/tempdata/surv_model2_t2dm_eth.dta not found)
file ./output/tempdata/surv_model2_t2dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.24316         1.27        1         0.2597
      3.eth5      |     -0.13558         0.40        1         0.5251
      4.eth5      |     -0.26145         1.42        1         0.2341
      5.eth5      |     -0.11795         0.30        1         0.5815
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.14508         0.47        1         0.4914
      2.age_cat   |     -0.21319         0.90        1         0.3415
      3.age_cat   |     -0.12740         0.33        1         0.5650
      0b.male     |            .            .        1             .
      1.male      |     -0.02767         0.02        1         0.8977
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.20042         1.00        1         0.3164
      0b.imd      |            .            .        1             .
      1.imd       |     -0.14572         0.42        1         0.5180
      2.imd       |     -0.21017         0.94        1         0.3315
      3.imd       |     -0.28685         1.74        1         0.1877
      4.imd       |            .            .        1             .
      5.imd       |     -0.01493         0.00        1         0.9445
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.26237         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                      8.72       14         0.8487
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

dm_keto_adm |
         it |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        971       97.10       97.10
          1 |         29        2.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  971
(29 real changes made)

                id:  patient_id
     failure event:  dm_keto_admit != 0 & dm_keto_admit < .
obs. time interval:  (dm_keto_end[_n-1], dm_keto_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         29  failures in single-failure-per-subject data
  2,029.284  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  dm_keto_admit
   analysis time _t:  (dm_keto_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_dm_keto_pre_eth.svg not found)
(file ./output/graphs/km_dm_keto_pre_eth.svg written in SVG format)

         failure _d:  dm_keto_admit
   analysis time _t:  (dm_keto_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -199.91394
Iteration 1:   log likelihood = -193.80192
Iteration 2:   log likelihood = -192.97047
Iteration 3:   log likelihood = -192.96288
Iteration 4:   log likelihood = -192.96288
Refining estimates:
Iteration 0:   log likelihood = -192.96288

Cox regression -- Breslow method for ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           29
Time at risk    =  2029.284052
                                                LR chi2(4)       =       13.90
Log likelihood  =   -192.96288                  Prob > chi2      =      0.0076

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.017079   1.426292     0.99   0.321      .504466    8.065179
      Black  |   .7627086   .6962546    -0.30   0.767     .1274446    4.564528
      Mixed  |   1.447443   1.105503     0.48   0.628     .3239555    6.467219
      Other  |     5.0369    3.20459     2.54   0.011      1.44747    17.52738
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_dm_keto_eth.ster not found)
file ./output/tempdata/crude_dm_keto_eth.ster saved
(note: file ./output/tempdata/surv_crude_dm_keto_eth16.dta not found)
file ./output/tempdata/surv_crude_dm_keto_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.11691         0.40        1         0.5292
      3.eth5      |      0.13501         0.53        1         0.4673
      4.eth5      |     -0.24745         1.77        1         0.1829
      5.eth5      |     -0.27461         2.18        1         0.1400
      ------------+---------------------------------------------------
      global test |                      6.68        4         0.1540
      ----------------------------------------------------------------

         failure _d:  dm_keto_admit
   analysis time _t:  (dm_keto_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -159.33898
Iteration 1:   log likelihood = -153.12278
Iteration 2:   log likelihood = -152.27063
Iteration 3:   log likelihood = -152.25961
Iteration 4:   log likelihood = -152.25961
Refining estimates:
Iteration 0:   log likelihood = -152.25961

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           24
Time at risk    =  1571.994524
                                                LR chi2(8)       =       14.16
Log likelihood  =   -152.25961                  Prob > chi2      =      0.0777

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |    1.67547    1.22378     0.71   0.480      .400323    7.012337
      Black  |   .9008088   .8258387    -0.11   0.909     .1493732    5.432412
      Mixed  |   .7732811   .7064151    -0.28   0.778     .1290445    4.633777
      Other  |   4.525333    2.92339     2.34   0.019     1.275762    16.05208
             |
     age_cat |
41 - 60 y..  |   1.773297   .9362501     1.08   0.278     .6300447    4.991046
61 - 80 y..  |   1.664341   .9295098     0.91   0.362      .557005    4.973083
  >80 years  |   2.009136   1.644775     0.85   0.394     .4038076    9.996407
             |
        male |
       Male  |   1.018927   .4221316     0.05   0.964     .4523745    2.295026
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_dm_keto_eth.ster not found)
file ./output/tempdata/model1_dm_keto_eth.ster saved
(note: file ./output/tempdata/surv_model1_dm_keto_eth.dta not found)
file ./output/tempdata/surv_model1_dm_keto_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.19034         0.88        1         0.3493
      3.eth5      |      0.18037         0.75        1         0.3861
      4.eth5      |     -0.22507         1.20        1         0.2741
      5.eth5      |     -0.36782         3.23        1         0.0724
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.04725         0.05        1         0.8187
      2.age_cat   |     -0.14669         0.51        1         0.4772
      3.age_cat   |      0.04931         0.06        1         0.8118
      0b.male     |            .            .        1             .
      1.male      |      0.42550         4.63        1         0.0315
      ------------+---------------------------------------------------
      global test |                     13.06        8         0.1098
      ----------------------------------------------------------------

         failure _d:  dm_keto_admit
   analysis time _t:  (dm_keto_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -159.33898
Iteration 1:   log likelihood = -150.46119
Iteration 2:   log likelihood = -149.22607
Iteration 3:   log likelihood = -149.12847
Iteration 4:   log likelihood = -149.09796
Iteration 5:   log likelihood = -149.08676
Iteration 6:   log likelihood = -149.08264
Iteration 7:   log likelihood = -149.08112
Iteration 8:   log likelihood = -149.08057
Iteration 9:   log likelihood = -149.08036
Iteration 10:  log likelihood = -149.08029
Iteration 11:  log likelihood = -149.08026
Iteration 12:  log likelihood = -149.08025
Iteration 13:  log likelihood = -149.08024
Iteration 14:  log likelihood = -149.08024
Iteration 15:  log likelihood = -149.08024
Iteration 16:  log likelihood = -149.08024
Iteration 17:  log likelihood = -149.08024
Iteration 18:  log likelihood = -149.08024
Iteration 19:  log likelihood = -149.08024
Iteration 20:  log likelihood = -149.08024
Iteration 21:  log likelihood = -149.08024
Iteration 22:  log likelihood = -149.08024
Iteration 23:  log likelihood = -149.08024
Iteration 24:  log likelihood = -149.08024
Iteration 25:  log likelihood = -149.08024
Iteration 26:  log likelihood = -149.08024
Iteration 27:  log likelihood = -149.08024
Iteration 28:  log likelihood = -149.08024
Iteration 29:  log likelihood = -149.08024
Iteration 30:  log likelihood = -149.08024
Refining estimates:
Iteration 0:   log likelihood = -149.08024
Iteration 1:   log likelihood = -149.08024
Iteration 2:   log likelihood = -149.08024

Cox regression -- Breslow method for ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           24
Time at risk    =  1571.994524
                                                LR chi2(14)      =       20.52
Log likelihood  =   -149.08024                  Prob > chi2      =      0.1147

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.637894   1.198226     0.67   0.500     .3904598     6.87061
      Black  |   .9455982   .8682111    -0.06   0.951     .1563749    5.718029
      Mixed  |   .7617011   .6962321    -0.30   0.766     .1269828    4.569035
      Other  |   4.400429   2.844114     2.29   0.022     1.239769    15.61886
             |
     age_cat |
41 - 60 y..  |   1.835411   .9723673     1.15   0.252     .6498038    5.184232
61 - 80 y..  |   1.762446   .9899474     1.01   0.313     .5861446    5.299401
  >80 years  |   2.205416   1.825489     0.96   0.339     .4354372    11.17006
             |
        male |
       Male  |   1.058744   .4401504     0.14   0.891     .4687291    2.391443
             |
urban_rura~n |
      Urban  |   1.106641    .462584     0.24   0.808      .487751    2.510818
             |
         imd |
          1  |   4.86e+08   4.23e+08    22.97   0.000     8.82e+07    2.68e+09
          2  |   7.27e+08   5.95e+08    24.94   0.000     1.46e+08    3.61e+09
          3  |   2.59e+08          .        .       .            .           .
          4  |   9.78e+08   7.75e+08    26.12   0.000     2.07e+08    4.62e+09
          5  |   4.37e+08   3.81e+08    22.87   0.000     7.95e+07    2.41e+09
             |
  1.shielded |   1.23e-14   1.77e-07    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_dm_keto_eth.ster not found)
file ./output/tempdata/model2_dm_keto_eth.ster saved
(note: file ./output/tempdata/surv_model2_dm_keto_eth.dta not found)
file ./output/tempdata/surv_model2_dm_keto_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.18537         0.86        1         0.3530
      3.eth5      |      0.18426         0.78        1         0.3779
      4.eth5      |     -0.21143         1.07        1         0.3012
      5.eth5      |     -0.36049         3.10        1         0.0782
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.06466         0.10        1         0.7575
      2.age_cat   |     -0.14778         0.52        1         0.4705
      3.age_cat   |      0.07857         0.13        1         0.7187
      0b.male     |            .            .        1             .
      1.male      |      0.42949         4.52        1         0.0334
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.21519         1.09        1         0.2975
      0b.imd      |            .            .        1             .
      1.imd       |     -0.24882         1.46        1         0.2275
      2.imd       |     -0.27774         1.85        1         0.1732
      3.imd       |            .            .        1             .
      4.imd       |     -0.29894         2.18        1         0.1399
      5.imd       |     -0.14081         0.48        1         0.4871
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.00243         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     17.05       14         0.2537
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

asthma_admi |
          t |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        973       97.30       97.30
          1 |         27        2.70      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  973
(27 real changes made)

                id:  patient_id
     failure event:  asthma_admit != 0 & asthma_admit < .
obs. time interval:  (asthma_end[_n-1], asthma_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         27  failures in single-failure-per-subject data
  2,030.204  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  asthma_admit
   analysis time _t:  (asthma_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_asthma_pre_eth.svg not found)
(file ./output/graphs/km_asthma_pre_eth.svg written in SVG format)

         failure _d:  asthma_admit
   analysis time _t:  (asthma_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -186.15525
Iteration 1:   log likelihood =  -184.4586
Iteration 2:   log likelihood = -184.44153
Iteration 3:   log likelihood = -184.44152
Refining estimates:
Iteration 0:   log likelihood = -184.44152

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           27
Time at risk    =   2030.20397
                                                LR chi2(4)       =        3.43
Log likelihood  =   -184.44152                  Prob > chi2      =      0.4890

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.011861   1.232009     1.14   0.254     .6058222    6.681144
      Black  |   2.028901   1.271682     1.13   0.259     .5939384     6.93075
      Mixed  |   .8054723     .61519    -0.28   0.777     .1802745    3.598876
      Other  |     1.3068   .8766294     0.40   0.690     .3509175    4.866462
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_asthma_eth.ster not found)
file ./output/tempdata/crude_asthma_eth.ster saved
(note: file ./output/tempdata/surv_crude_asthma_eth16.dta not found)
file ./output/tempdata/surv_crude_asthma_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.09646         0.25        1         0.6163
      3.eth5      |     -0.00327         0.00        1         0.9865
      4.eth5      |      0.06212         0.10        1         0.7469
      5.eth5      |     -0.09140         0.23        1         0.6350
      ------------+---------------------------------------------------
      global test |                      1.36        4         0.8516
      ----------------------------------------------------------------

         failure _d:  asthma_admit
   analysis time _t:  (asthma_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -146.09089
Iteration 1:   log likelihood = -143.82315
Iteration 2:   log likelihood =  -143.7657
Iteration 3:   log likelihood = -143.76567
Refining estimates:
Iteration 0:   log likelihood = -143.76567

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           22
Time at risk    =  1573.524983
                                                LR chi2(8)       =        4.65
Log likelihood  =   -143.76567                  Prob > chi2      =      0.7942

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.233313   .8274895     0.31   0.755     .3311014    4.593944
      Black  |   1.837994    1.19585     0.94   0.350     .5134863    6.578993
      Mixed  |   .8775715   .6711779    -0.17   0.864     .1960075    3.929094
      Other  |   1.080466   .7645536     0.11   0.913     .2699533    4.324479
             |
     age_cat |
41 - 60 y..  |   1.846165   .9122455     1.24   0.215     .7009168    4.862669
61 - 80 y..  |   .8932883   .5614536    -0.18   0.858     .2606097    3.061912
  >80 years  |   .9607859   1.028885    -0.04   0.970     .1177859     7.83718
             |
        male |
       Male  |   .7398879   .3249186    -0.69   0.493     .3128704    1.749715
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_asthma_eth.ster not found)
file ./output/tempdata/model1_asthma_eth.ster saved
(note: file ./output/tempdata/surv_model1_asthma_eth.dta not found)
file ./output/tempdata/surv_model1_asthma_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.09536         0.20        1         0.6526
      3.eth5      |     -0.03790         0.03        1         0.8580
      4.eth5      |      0.08333         0.15        1         0.6962
      5.eth5      |     -0.05798         0.07        1         0.7850
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.17992         0.71        1         0.4008
      2.age_cat   |      0.14803         0.46        1         0.4977
      3.age_cat   |      0.28693         1.79        1         0.1812
      0b.male     |            .            .        1             .
      1.male      |      0.27044         1.86        1         0.1728
      ------------+---------------------------------------------------
      global test |                      5.12        8         0.7446
      ----------------------------------------------------------------

         failure _d:  asthma_admit
   analysis time _t:  (asthma_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -146.09089
Iteration 1:   log likelihood = -140.21382
Iteration 2:   log likelihood = -139.82481
Iteration 3:   log likelihood = -139.79903
Iteration 4:   log likelihood = -139.79123
Iteration 5:   log likelihood = -139.78837
Iteration 6:   log likelihood = -139.78732
Iteration 7:   log likelihood = -139.78693
Iteration 8:   log likelihood = -139.78679
Iteration 9:   log likelihood = -139.78674
Iteration 10:  log likelihood = -139.78672
Iteration 11:  log likelihood = -139.78671
Iteration 12:  log likelihood = -139.78671
Iteration 13:  log likelihood = -139.78671
Iteration 14:  log likelihood =  -139.7867
Iteration 15:  log likelihood =  -139.7867
Iteration 16:  log likelihood =  -139.7867
Iteration 17:  log likelihood =  -139.7867
Iteration 18:  log likelihood =  -139.7867
Iteration 19:  log likelihood =  -139.7867
Iteration 20:  log likelihood =  -139.7867
Iteration 21:  log likelihood =  -139.7867
Iteration 22:  log likelihood =  -139.7867
Iteration 23:  log likelihood =  -139.7867
Iteration 24:  log likelihood =  -139.7867
Iteration 25:  log likelihood =  -139.7867
Iteration 26:  log likelihood =  -139.7867
Iteration 27:  log likelihood =  -139.7867
Iteration 28:  log likelihood =  -139.7867
Iteration 29:  log likelihood =  -139.7867
Iteration 30:  log likelihood =  -139.7867
Iteration 31:  log likelihood =  -139.7867
Iteration 32:  log likelihood =  -139.7867
Iteration 33:  log likelihood =  -139.7867
Iteration 34:  log likelihood =  -139.7867
Refining estimates:
Iteration 0:   log likelihood =  -139.7867
Iteration 1:   log likelihood =  -139.7867
Iteration 2:   log likelihood =  -139.7867
Iteration 3:   log likelihood =  -139.7867

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           22
Time at risk    =  1573.524983
                                                LR chi2(15)      =       12.61
Log likelihood  =    -139.7867                  Prob > chi2      =      0.6325

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.078701   .7260172     0.11   0.910     .2884044    4.034598
      Black  |   1.688543   1.109544     0.80   0.425     .4657856    6.121222
      Mixed  |   .8679559    .665565    -0.18   0.853     .1930991    3.901352
      Other  |   1.005855   .7131278     0.01   0.993     .2506418    4.036616
             |
     age_cat |
41 - 60 y..  |    1.82492   .9072205     1.21   0.226     .6887904    4.835047
61 - 80 y..  |   .7958177    .503277    -0.36   0.718     .2304155    2.748625
  >80 years  |   .7376514   .7951223    -0.28   0.778     .0891933    6.100569
             |
        male |
       Male  |   .7313107   .3218993    -0.71   0.477     .3086246    1.732899
             |
urban_rura~n |
      Urban  |    .632894   .2928179    -0.99   0.323     .2555699      1.5673
             |
         imd |
          1  |   .9419646   1.065631    -0.05   0.958     .1025846    8.649421
          2  |   1.052972   1.169603     0.05   0.963     .1193804     9.28754
          3  |   .2358682   .3375008    -1.01   0.313     .0142789    3.896213
          4  |   .6653019   .7835924    -0.35   0.729     .0661414    6.692121
          5  |   1.895202   2.047661     0.59   0.554     .2280232    15.75186
             |
  1.shielded |   7.24e-17   1.58e-08    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_asthma_eth.ster not found)
file ./output/tempdata/model2_asthma_eth.ster saved
(note: file ./output/tempdata/surv_model2_asthma_eth.dta not found)
file ./output/tempdata/surv_model2_asthma_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.08951         0.18        1         0.6712
      3.eth5      |     -0.02200         0.01        1         0.9109
      4.eth5      |      0.08388         0.15        1         0.6989
      5.eth5      |     -0.05747         0.07        1         0.7864
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.17702         0.73        1         0.3937
      2.age_cat   |      0.14372         0.45        1         0.5019
      3.age_cat   |      0.29679         1.82        1         0.1775
      0b.male     |            .            .        1             .
      1.male      |      0.27602         1.89        1         0.1697
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.15083         0.52        1         0.4694
      0b.imd      |            .            .        1             .
      1.imd       |      0.03647         0.03        1         0.8599
      2.imd       |      0.11327         0.31        1         0.5769
      3.imd       |     -0.02885         0.02        1         0.8915
      4.imd       |      0.07332         0.14        1         0.7106
      5.imd       |      0.02908         0.02        1         0.8871
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.13680         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                      6.85       15         0.9616
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

depress_adm |
         it |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        973       97.30       97.30
          1 |         27        2.70      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  973
(26 real changes made)

                id:  patient_id
     failure event:  depress_admit != 0 & depress_admit < .
obs. time interval:  (depress_end[_n-1], depress_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         27  failures in single-failure-per-subject data
    2,028.2  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  depress_admit
   analysis time _t:  (depress_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_depress_pre_eth.svg not found)
(file ./output/graphs/km_depress_pre_eth.svg written in SVG format)

         failure _d:  depress_admit
   analysis time _t:  (depress_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -186.15422
Iteration 1:   log likelihood = -185.02547
Iteration 2:   log likelihood = -185.01442
Iteration 3:   log likelihood = -185.01441
Refining estimates:
Iteration 0:   log likelihood = -185.01441

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           27
Time at risk    =  2028.199863
                                                LR chi2(4)       =        2.28
Log likelihood  =   -185.01441                  Prob > chi2      =      0.6845

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .5649135   .3540789    -0.91   0.362     .1653721    1.929753
      Black  |   .4880482   .3367857    -1.04   0.299     .1262052    1.887332
      Mixed  |   .9248642    .514548    -0.14   0.888     .3108223    2.751971
      Other  |   1.033192   .5522649     0.06   0.951     .3624053     2.94556
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_depress_eth.ster not found)
file ./output/tempdata/crude_depress_eth.ster saved
(note: file ./output/tempdata/surv_crude_depress_eth16.dta not found)
file ./output/tempdata/surv_crude_depress_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.21543         1.25        1         0.2633
      3.eth5      |     -0.10384         0.29        1         0.5896
      4.eth5      |     -0.09349         0.24        1         0.6273
      5.eth5      |      0.24848         1.67        1         0.1969
      ------------+---------------------------------------------------
      global test |                      5.26        4         0.2614
      ----------------------------------------------------------------

         failure _d:  depress_admit
   analysis time _t:  (depress_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -139.46285
Iteration 1:   log likelihood = -136.52718
Iteration 2:   log likelihood = -136.47157
Iteration 3:   log likelihood = -136.47156
Refining estimates:
Iteration 0:   log likelihood = -136.47156

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           21
Time at risk    =  1574.327173
                                                LR chi2(8)       =        5.98
Log likelihood  =   -136.47156                  Prob > chi2      =      0.6492

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .5767047   .4214438    -0.75   0.451     .1376934    2.415427
      Black  |   .5127131   .4314905    -0.79   0.427     .0985185    2.668277
      Mixed  |   1.083139   .6870067     0.13   0.900     .3124566    3.754733
      Other  |   1.336058   .8097391     0.48   0.633     .4073249    4.382375
             |
     age_cat |
41 - 60 y..  |   1.054138   .6395932     0.09   0.931     .3209483    3.462262
61 - 80 y..  |   2.221453   1.174913     1.51   0.131     .7878469    6.263719
  >80 years  |   1.033958   1.118073     0.03   0.975     .1241805     8.60899
             |
        male |
       Male  |   .6814487   .3028766    -0.86   0.388     .2851729    1.628389
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_depress_eth.ster not found)
file ./output/tempdata/model1_depress_eth.ster saved
(note: file ./output/tempdata/surv_model1_depress_eth.dta not found)
file ./output/tempdata/surv_model1_depress_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.29121         1.83        1         0.1766
      3.eth5      |     -0.19165         0.82        1         0.3639
      4.eth5      |     -0.08457         0.15        1         0.6973
      5.eth5      |      0.21247         0.96        1         0.3266
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.20919         0.87        1         0.3506
      2.age_cat   |     -0.09425         0.19        1         0.6600
      3.age_cat   |     -0.33417         2.34        1         0.1263
      0b.male     |            .            .        1             .
      1.male      |     -0.29964         1.99        1         0.1588
      ------------+---------------------------------------------------
      global test |                      9.94        8         0.2692
      ----------------------------------------------------------------

         failure _d:  depress_admit
   analysis time _t:  (depress_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -139.46285
Iteration 1:   log likelihood =  -134.1267
Iteration 2:   log likelihood = -133.75085
Iteration 3:   log likelihood =  -133.6742
Iteration 4:   log likelihood =  -133.6462
Iteration 5:   log likelihood = -133.63591
Iteration 6:   log likelihood = -133.63213
Iteration 7:   log likelihood = -133.63074
Iteration 8:   log likelihood = -133.63023
Iteration 9:   log likelihood = -133.63004
Iteration 10:  log likelihood = -133.62997
Iteration 11:  log likelihood = -133.62995
Iteration 12:  log likelihood = -133.62994
Iteration 13:  log likelihood = -133.62994
Iteration 14:  log likelihood = -133.62993
Iteration 15:  log likelihood = -133.62993
Iteration 16:  log likelihood = -133.62993
Iteration 17:  log likelihood = -133.62993
Iteration 18:  log likelihood = -133.62993
Iteration 19:  log likelihood = -133.62993
Iteration 20:  log likelihood = -133.62993
Iteration 21:  log likelihood = -133.62993
Iteration 22:  log likelihood = -133.62993
Iteration 23:  log likelihood = -133.62993
Iteration 24:  log likelihood = -133.62993
Iteration 25:  log likelihood = -133.62993
Iteration 26:  log likelihood = -133.62993
Iteration 27:  log likelihood = -133.62993
Iteration 28:  log likelihood = -133.62993
Iteration 29:  log likelihood = -133.62993
Iteration 30:  log likelihood = -133.62993
Iteration 31:  log likelihood = -133.62993
Iteration 32:  log likelihood = -133.62993
Iteration 33:  log likelihood = -133.62993
Iteration 34:  log likelihood = -133.62993
Iteration 35:  log likelihood = -133.62993
Refining estimates:
Iteration 0:   log likelihood = -133.62993
Iteration 1:   log likelihood = -133.62993

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           21
Time at risk    =  1574.327173
                                                LR chi2(14)      =       11.67
Log likelihood  =   -133.62993                  Prob > chi2      =      0.6331

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .5570871   .4087812    -0.80   0.425     .1322287     2.34704
      Black  |   .4803025   .4062359    -0.87   0.386     .0915325    2.520311
      Mixed  |   1.015146   .6470009     0.02   0.981     .2910835    3.540297
      Other  |   1.219371   .7411964     0.33   0.744     .3704517    4.013654
             |
     age_cat |
41 - 60 y..  |   1.081609   .6579717     0.13   0.897     .3282928    3.563518
61 - 80 y..  |   2.190839   1.171698     1.47   0.143     .7680217    6.249531
  >80 years  |   .9025639    .984387    -0.09   0.925     .1064412    7.653256
             |
        male |
       Male  |     .66187   .2961545    -0.92   0.356     .2753605    1.590903
             |
urban_rura~n |
      Urban  |   1.355734   .5976707     0.69   0.490     .5713799    3.216798
             |
         imd |
          1  |   5.70e+08   4.79e+08    23.99   0.000     1.10e+08    2.96e+09
          2  |   3.35e+08   3.07e+08    21.44   0.000     5.57e+07    2.02e+09
          3  |   4.72e+08   4.10e+08    23.02   0.000     8.62e+07    2.59e+09
          4  |   2.18e+08          .        .       .            .           .
          5  |   7.34e+08   5.91e+08    25.35   0.000     1.51e+08    3.56e+09
             |
  1.shielded |   1.41e-16   2.08e-08    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_depress_eth.ster not found)
file ./output/tempdata/model2_depress_eth.ster saved
(note: file ./output/tempdata/surv_model2_depress_eth.dta not found)
file ./output/tempdata/surv_model2_depress_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.26841         1.62        1         0.2038
      3.eth5      |     -0.20182         0.97        1         0.3256
      4.eth5      |     -0.10231         0.22        1         0.6365
      5.eth5      |      0.17876         0.70        1         0.4034
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.22196         1.00        1         0.3175
      2.age_cat   |     -0.11645         0.33        1         0.5679
      3.age_cat   |     -0.33881         2.50        1         0.1141
      0b.male     |            .            .        1             .
      1.male      |     -0.27688         1.81        1         0.1787
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.12706         0.36        1         0.5475
      0b.imd      |            .            .        1             .
      1.imd       |      0.13879         0.43        1         0.5140
      2.imd       |      0.14606         0.46        1         0.4975
      3.imd       |      0.29327         1.82        1         0.1776
      4.imd       |            .            .        1             .
      5.imd       |      0.27437         1.73        1         0.1880
      0b.shielded |            .            .        1             .
      1.shielded  |      0.20874         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     12.92       14         0.5331
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

  anx_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        977       97.70       97.70
          1 |         23        2.30      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  977
(23 real changes made)

                id:  patient_id
     failure event:  anx_admit != 0 & anx_admit < .
obs. time interval:  (anx_end[_n-1], anx_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         23  failures in single-failure-per-subject data
  2,039.828  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  anx_admit
   analysis time _t:  (anx_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_anx_pre_eth.svg not found)
(file ./output/graphs/km_anx_pre_eth.svg written in SVG format)

         failure _d:  anx_admit
   analysis time _t:  (anx_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -158.62243
Iteration 1:   log likelihood = -157.51268
Iteration 2:   log likelihood = -157.47316
Iteration 3:   log likelihood = -157.47295
Refining estimates:
Iteration 0:   log likelihood = -157.47295

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           23
Time at risk    =  2039.827515
                                                LR chi2(4)       =        2.30
Log likelihood  =   -157.47295                  Prob > chi2      =      0.6810

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .6689007    .431774    -0.62   0.533     .1887612    2.370339
      Black  |   .3816126   .3115857    -1.18   0.238     .0770228    1.890717
      Mixed  |   .9039309   .5473581    -0.17   0.868     .2758712    2.961857
      Other  |   1.044283   .6029182     0.08   0.940     .3368028    3.237879
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_anx_eth.ster not found)
file ./output/tempdata/crude_anx_eth.ster saved
(note: file ./output/tempdata/surv_crude_anx_eth16.dta not found)
file ./output/tempdata/surv_crude_anx_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.38216         3.36        1         0.0669
      3.eth5      |     -0.17997         0.74        1         0.3881
      4.eth5      |     -0.35752         2.94        1         0.0866
      5.eth5      |     -0.17389         0.69        1         0.4046
      ------------+---------------------------------------------------
      global test |                      4.58        4         0.3337
      ----------------------------------------------------------------

         failure _d:  anx_admit
   analysis time _t:  (anx_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -119.57476
Iteration 1:   log likelihood = -114.33817
Iteration 2:   log likelihood = -113.62051
Iteration 3:   log likelihood = -113.38372
Iteration 4:   log likelihood = -113.29831
Iteration 5:   log likelihood = -113.26712
Iteration 6:   log likelihood = -113.25567
Iteration 7:   log likelihood = -113.25146
Iteration 8:   log likelihood = -113.24991
Iteration 9:   log likelihood = -113.24935
Iteration 10:  log likelihood = -113.24914
Iteration 11:  log likelihood = -113.24906
Iteration 12:  log likelihood = -113.24903
Iteration 13:  log likelihood = -113.24902
Iteration 14:  log likelihood = -113.24902
Iteration 15:  log likelihood = -113.24902
Iteration 16:  log likelihood = -113.24901
Iteration 17:  log likelihood = -113.24901
Iteration 18:  log likelihood = -113.24901
Iteration 19:  log likelihood = -113.24901
Iteration 20:  log likelihood = -113.24901
Iteration 21:  log likelihood = -113.24901
Iteration 22:  log likelihood = -113.24901
Iteration 23:  log likelihood = -113.24901
Iteration 24:  log likelihood = -113.24901
Iteration 25:  log likelihood = -113.24901
Iteration 26:  log likelihood = -113.24901
Iteration 27:  log likelihood = -113.24901
Iteration 28:  log likelihood = -113.24901
Iteration 29:  log likelihood = -113.24901
Iteration 30:  log likelihood = -113.24901
Iteration 31:  log likelihood = -113.24901
Iteration 32:  log likelihood = -113.24901
Iteration 33:  log likelihood = -113.24901
Iteration 34:  log likelihood = -113.24901
Iteration 35:  log likelihood = -113.24901
Iteration 36:  log likelihood = -113.24901
Iteration 37:  log likelihood = -113.24901
Iteration 38:  log likelihood = -113.24901
Iteration 39:  log likelihood = -113.24901
Iteration 40:  log likelihood = -113.24901
Iteration 41:  log likelihood = -113.24901
Iteration 42:  log likelihood = -113.24901
Iteration 43:  log likelihood = -113.24901
Iteration 44:  log likelihood = -113.24901
Iteration 45:  log likelihood = -113.24901
Refining estimates:
Iteration 0:   log likelihood = -113.24901

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           18
Time at risk    =  1584.479124
                                                LR chi2(7)       =       12.65
Log likelihood  =   -113.24901                  Prob > chi2      =      0.0811

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .6519571   .4212486    -0.66   0.508     .1837523    2.313158
      Black  |   1.50e-20          .        .       .            .           .
      Mixed  |   .5600034   .3973629    -0.82   0.414     .1393804    2.249985
      Other  |   .9372725   .5686541    -0.11   0.915     .2853856    3.078221
             |
     age_cat |
41 - 60 y..  |   2.138279   1.343001     1.21   0.226     .6243745    7.322905
61 - 80 y..  |   2.138905   1.383167     1.18   0.240     .6022049    7.596937
  >80 years  |   1.448237   1.620874     0.33   0.741     .1614992      12.987
             |
        male |
       Male  |   .4264293   .2140281    -1.70   0.089     .1594493    1.140438
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_anx_eth.ster not found)
file ./output/tempdata/model1_anx_eth.ster saved
(note: file ./output/tempdata/surv_model1_anx_eth.dta not found)
file ./output/tempdata/surv_model1_anx_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.46332         3.96        1         0.0465
      3.eth5      |            .            .        1             .
      4.eth5      |     -0.29545         1.61        1         0.2041
      5.eth5      |     -0.09815         0.18        1         0.6696
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.10156         0.19        1         0.6665
      2.age_cat   |      0.24114         1.09        1         0.2955
      3.age_cat   |     -0.12303         0.28        1         0.5988
      0b.male     |            .            .        1             .
      1.male      |     -0.04339         0.04        1         0.8458
      ------------+---------------------------------------------------
      global test |                      7.74        7         0.3564
      ----------------------------------------------------------------

         failure _d:  anx_admit
   analysis time _t:  (anx_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -119.57476
Iteration 1:   log likelihood = -112.14256
Iteration 2:   log likelihood = -109.02571
Iteration 3:   log likelihood = -108.54258
Iteration 4:   log likelihood =  -108.3727
Iteration 5:   log likelihood = -108.31034
Iteration 6:   log likelihood = -108.28741
Iteration 7:   log likelihood = -108.27897
Iteration 8:   log likelihood = -108.27587
Iteration 9:   log likelihood = -108.27473
Iteration 10:  log likelihood = -108.27431
Iteration 11:  log likelihood = -108.27415
Iteration 12:  log likelihood =  -108.2741
Iteration 13:  log likelihood = -108.27408
Iteration 14:  log likelihood = -108.27407
Iteration 15:  log likelihood = -108.27407
Iteration 16:  log likelihood = -108.27406
Iteration 17:  log likelihood = -108.27406
Iteration 18:  log likelihood = -108.27406
Iteration 19:  log likelihood = -108.27406
Iteration 20:  log likelihood = -108.27406
Iteration 21:  log likelihood = -108.27406
Iteration 22:  log likelihood = -108.27406
Iteration 23:  log likelihood = -108.27406
Iteration 24:  log likelihood = -108.27406
Iteration 25:  log likelihood = -108.27406
Iteration 26:  log likelihood = -108.27406
Iteration 27:  log likelihood = -108.27406
Iteration 28:  log likelihood = -108.27406
Iteration 29:  log likelihood = -108.27406
Iteration 30:  log likelihood = -108.27406
Iteration 31:  log likelihood = -108.27406
Iteration 32:  log likelihood = -108.27406
Iteration 33:  log likelihood = -108.27406
Refining estimates:
Iteration 0:   log likelihood = -108.27406
Iteration 1:   log likelihood = -108.27406

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           18
Time at risk    =  1584.479124
                                                LR chi2(14)      =       22.60
Log likelihood  =   -108.27406                  Prob > chi2      =      0.0671

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .7199045   .4712394    -0.50   0.616     .1995677    2.596925
      Black  |   1.47e-15   1.68e-08    -0.00   1.000            0           .
      Mixed  |   .5196533   .3723788    -0.91   0.361     .1275706    2.116786
      Other  |   .9808259   .5994412    -0.03   0.975     .2960547    3.249466
             |
     age_cat |
41 - 60 y..  |   2.093473   1.324293     1.17   0.243     .6059162    7.233059
61 - 80 y..  |   1.854946   1.211786     0.95   0.344     .5155425    6.674182
  >80 years  |   1.089494   1.224682     0.08   0.939     .1203383    9.863838
             |
        male |
       Male  |   .3918261   .1978476    -1.86   0.064     .1456431    1.054136
             |
urban_rura~n |
      Urban  |   .9807271   .4787953    -0.04   0.968     .3766932    2.553339
             |
         imd |
          1  |   1.65e+09   1.32e+09    26.66   0.000     3.47e+08    7.87e+09
          2  |   3.66e+08          .        .       .            .           .
          3  |   3.56e+08   3.58e+08    19.59   0.000     4.97e+07    2.55e+09
          4  |   3.54e+08   3.55e+08    19.65   0.000     4.97e+07    2.52e+09
          5  |   6.65e+08   5.81e+08    23.27   0.000     1.20e+08    3.68e+09
             |
  1.shielded |   4.209437   4.512907     1.34   0.180     .5148217    34.41843
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_anx_eth.ster not found)
file ./output/tempdata/model2_anx_eth.ster saved
(note: file ./output/tempdata/surv_model2_anx_eth.dta not found)
file ./output/tempdata/surv_model2_anx_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.50467         4.86        1         0.0275
      3.eth5      |     -0.35310         0.00        1         1.0000
      4.eth5      |     -0.25036         1.12        1         0.2900
      5.eth5      |     -0.14389         0.38        1         0.5350
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.06395         0.08        1         0.7830
      2.age_cat   |      0.29170         1.56        1         0.2116
      3.age_cat   |     -0.10288         0.18        1         0.6674
      0b.male     |            .            .        1             .
      1.male      |     -0.03034         0.02        1         0.8903
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.02858         0.01        1         0.9034
      0b.imd      |            .            .        1             .
      1.imd       |     -0.04355         0.03        1         0.8525
      2.imd       |            .            .        1             .
      3.imd       |      0.01643         0.01        1         0.9430
      4.imd       |      0.02291         0.01        1         0.9202
      5.imd       |     -0.01665         0.01        1         0.9426
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.37239         2.44        1         0.1185
      ------------+---------------------------------------------------
      global test |                     10.38       14         0.7341
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

  smi_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        976       97.60       97.60
          1 |         24        2.40      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  976
(24 real changes made)

                id:  patient_id
     failure event:  smi_admit != 0 & smi_admit < .
obs. time interval:  (smi_end[_n-1], smi_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         24  failures in single-failure-per-subject data
  2,035.047  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  smi_admit
   analysis time _t:  (smi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_smi_pre_eth.svg not found)
(file ./output/graphs/km_smi_pre_eth.svg written in SVG format)

         failure _d:  smi_admit
   analysis time _t:  (smi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -165.50589
Iteration 1:   log likelihood = -164.38566
Iteration 2:   log likelihood = -164.37404
Iteration 3:   log likelihood = -164.37403
Refining estimates:
Iteration 0:   log likelihood = -164.37403

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           24
Time at risk    =  2035.047228
                                                LR chi2(4)       =        2.26
Log likelihood  =   -164.37403                  Prob > chi2      =      0.6874

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .9985852   .7061069    -0.00   0.998     .2497435    3.992786
      Black  |   .8573885   .6548419    -0.20   0.840     .1918938    3.830842
      Mixed  |   1.893521   1.186829     1.02   0.308     .5543069    6.468294
      Other  |   1.571532    1.01442     0.70   0.484     .4434807    5.568932
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_smi_eth.ster not found)
file ./output/tempdata/crude_smi_eth.ster saved
(note: file ./output/tempdata/surv_crude_smi_eth16.dta not found)
file ./output/tempdata/surv_crude_smi_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.15179         0.55        1         0.4573
      3.eth5      |      0.18742         0.84        1         0.3587
      4.eth5      |      0.17651         0.75        1         0.3874
      5.eth5      |     -0.02475         0.01        1         0.9035
      ------------+---------------------------------------------------
      global test |                      2.31        4         0.6791
      ----------------------------------------------------------------

         failure _d:  smi_admit
   analysis time _t:  (smi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -132.83349
Iteration 1:   log likelihood = -128.20755
Iteration 2:   log likelihood = -127.83366
Iteration 3:   log likelihood = -127.73943
Iteration 4:   log likelihood = -127.70503
Iteration 5:   log likelihood = -127.69241
Iteration 6:   log likelihood = -127.68777
Iteration 7:   log likelihood = -127.68606
Iteration 8:   log likelihood = -127.68543
Iteration 9:   log likelihood =  -127.6852
Iteration 10:  log likelihood = -127.68512
Iteration 11:  log likelihood = -127.68509
Iteration 12:  log likelihood = -127.68507
Iteration 13:  log likelihood = -127.68507
Iteration 14:  log likelihood = -127.68507
Iteration 15:  log likelihood = -127.68507
Iteration 16:  log likelihood = -127.68507
Iteration 17:  log likelihood = -127.68507
Iteration 18:  log likelihood = -127.68507
Iteration 19:  log likelihood = -127.68507
Iteration 20:  log likelihood = -127.68507
Iteration 21:  log likelihood = -127.68507
Iteration 22:  log likelihood = -127.68507
Iteration 23:  log likelihood = -127.68507
Iteration 24:  log likelihood = -127.68507
Iteration 25:  log likelihood = -127.68507
Iteration 26:  log likelihood = -127.68507
Iteration 27:  log likelihood = -127.68507
Iteration 28:  log likelihood = -127.68507
Iteration 29:  log likelihood = -127.68507
Iteration 30:  log likelihood = -127.68507
Iteration 31:  log likelihood = -127.68507
Iteration 32:  log likelihood = -127.68507
Iteration 33:  log likelihood = -127.68507
Iteration 34:  log likelihood = -127.68507
Iteration 35:  log likelihood = -127.68507
Refining estimates:
Iteration 0:   log likelihood = -127.68507
Iteration 1:   log likelihood = -127.68507

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           20
Time at risk    =  1577.771389
                                                LR chi2(8)       =       10.30
Log likelihood  =   -127.68507                  Prob > chi2      =      0.2448

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .6322189   .5771677    -0.50   0.615     .1056295    3.783988
      Black  |   1.094392   .8970499     0.11   0.912     .2195132    5.456131
      Mixed  |   2.488011   1.719136     1.32   0.187     .6422431    9.638405
      Other  |   1.800661   1.315178     0.81   0.421     .4302553    7.535948
             |
     age_cat |
41 - 60 y..  |   .4382305   .2537383    -1.42   0.154     .1408807    1.363182
61 - 80 y..  |   .4852903   .2809141    -1.25   0.212     .1560547    1.509129
  >80 years  |   1.31e-16   8.22e-09    -0.00   1.000            0           .
             |
        male |
       Male  |   .8126644   .3667177    -0.46   0.646     .3355858    1.967972
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_smi_eth.ster not found)
file ./output/tempdata/model1_smi_eth.ster saved
(note: file ./output/tempdata/surv_model1_smi_eth.dta not found)
file ./output/tempdata/surv_model1_smi_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.27927         1.56        1         0.2115
      3.eth5      |      0.29483         1.75        1         0.1865
      4.eth5      |      0.28273         1.62        1         0.2035
      5.eth5      |      0.09218         0.17        1         0.6805
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.16740         0.56        1         0.4545
      2.age_cat   |      0.09024         0.16        1         0.6889
      3.age_cat   |     -0.01936         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |      0.07976         0.13        1         0.7156
      ------------+---------------------------------------------------
      global test |                      4.40        8         0.8190
      ----------------------------------------------------------------

         failure _d:  smi_admit
   analysis time _t:  (smi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -132.83349
Iteration 1:   log likelihood = -126.18538
Iteration 2:   log likelihood = -125.71043
Iteration 3:   log likelihood = -125.59433
Iteration 4:   log likelihood = -125.55196
Iteration 5:   log likelihood =  -125.5364
Iteration 6:   log likelihood = -125.53069
Iteration 7:   log likelihood = -125.52859
Iteration 8:   log likelihood = -125.52781
Iteration 9:   log likelihood = -125.52753
Iteration 10:  log likelihood = -125.52742
Iteration 11:  log likelihood = -125.52738
Iteration 12:  log likelihood = -125.52737
Iteration 13:  log likelihood = -125.52736
Iteration 14:  log likelihood = -125.52736
Iteration 15:  log likelihood = -125.52736
Iteration 16:  log likelihood = -125.52736
Iteration 17:  log likelihood = -125.52736
Iteration 18:  log likelihood = -125.52736
Iteration 19:  log likelihood = -125.52736
Iteration 20:  log likelihood = -125.52736
Iteration 21:  log likelihood = -125.52736
Iteration 22:  log likelihood = -125.52736
Iteration 23:  log likelihood = -125.52736
Iteration 24:  log likelihood = -125.52736
Iteration 25:  log likelihood = -125.52736
Iteration 26:  log likelihood = -125.52736
Iteration 27:  log likelihood = -125.52736
Iteration 28:  log likelihood = -125.52736
Iteration 29:  log likelihood = -125.52736
Iteration 30:  log likelihood = -125.52736
Iteration 31:  log likelihood = -125.52736
Iteration 32:  log likelihood = -125.52736
Iteration 33:  log likelihood = -125.52736
Iteration 34:  log likelihood = -125.52736
Iteration 35:  log likelihood = -125.52736
Iteration 36:  log likelihood = -125.52736
Refining estimates:
Iteration 0:   log likelihood = -125.52736
Iteration 1:   log likelihood = -125.52736

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           20
Time at risk    =  1577.771389
                                                LR chi2(15)      =       14.61
Log likelihood  =   -125.52736                  Prob > chi2      =      0.4797

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .6474243    .592137    -0.48   0.635     .1078143    3.887779
      Black  |   1.008372   .8301512     0.01   0.992      .200845    5.062676
      Mixed  |   2.643714   1.839999     1.40   0.162     .6757513     10.3429
      Other  |   1.771751   1.299103     0.78   0.435     .4209935    7.456417
             |
     age_cat |
41 - 60 y..  |    .464641   .2695641    -1.32   0.186      .149035    1.448595
61 - 80 y..  |   .5114172   .2984256    -1.15   0.250     .1629583    1.604997
  >80 years  |   5.23e-17   5.30e-09    -0.00   1.000            0           .
             |
        male |
       Male  |   .8163316   .3717498    -0.45   0.656     .3343777    1.992948
             |
urban_rura~n |
      Urban  |   1.822868   .8342176     1.31   0.190     .7433802    4.469914
             |
         imd |
          1  |   .4626381   .5299387    -0.67   0.501     .0490021    4.367856
          2  |   .2102386   .2630367    -1.25   0.213     .0181028    2.441628
          3  |   .5053273   .5737847    -0.60   0.548      .054583    4.678298
          4  |   .5363031   .6028639    -0.55   0.579     .0592333    4.855733
          5  |   .3270449   .3860264    -0.95   0.344     .0323515    3.306134
             |
  1.shielded |   8.41e-17   2.04e-08    -0.00   1.000            0           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_smi_eth.ster not found)
file ./output/tempdata/model2_smi_eth.ster saved
(note: file ./output/tempdata/surv_model2_smi_eth.dta not found)
file ./output/tempdata/surv_model2_smi_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.28491         1.60        1         0.2064
      3.eth5      |      0.31486         2.07        1         0.1500
      4.eth5      |      0.24620         1.14        1         0.2848
      5.eth5      |      0.06885         0.09        1         0.7654
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.15754         0.51        1         0.4769
      2.age_cat   |      0.09981         0.22        1         0.6357
      3.age_cat   |     -0.01961         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |      0.09747         0.19        1         0.6633
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.23936         1.11        1         0.2913
      0b.imd      |            .            .        1             .
      1.imd       |      0.28311         1.67        1         0.1961
      2.imd       |      0.26994         1.61        1         0.2041
      3.imd       |      0.30280         2.11        1         0.1465
      4.imd       |      0.25596         1.33        1         0.2486
      5.imd       |      0.31582         2.12        1         0.1458
      0b.shielded |            .            .        1             .
      1.shielded  |      0.08123         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                      7.65       15         0.9371
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

   sh_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        978       97.80       97.80
          1 |         22        2.20      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  978
(22 real changes made)

                id:  patient_id
     failure event:  sh_admit != 0 & sh_admit < .
obs. time interval:  (sh_end[_n-1], sh_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         22  failures in single-failure-per-subject data
  2,036.244  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.058864

         failure _d:  sh_admit
   analysis time _t:  (sh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_sh_pre_eth.svg not found)
(file ./output/graphs/km_sh_pre_eth.svg written in SVG format)

         failure _d:  sh_admit
   analysis time _t:  (sh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -151.73794
Iteration 1:   log likelihood = -150.32338
Iteration 2:   log likelihood = -150.25145
Iteration 3:   log likelihood = -150.25107
Iteration 4:   log likelihood = -150.25107
Refining estimates:
Iteration 0:   log likelihood = -150.25107

Cox regression -- no ties

No. of subjects =        1,000                  Number of obs    =       1,000
No. of failures =           22
Time at risk    =  2036.243669
                                                LR chi2(4)       =        2.97
Log likelihood  =   -150.25107                  Prob > chi2      =      0.5622

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.510437   2.100383     1.10   0.271     .4870602    12.93945
      Black  |   3.492688   2.851773     1.53   0.126     .7049453     17.3047
      Mixed  |   2.694132   2.254074     1.18   0.236     .5226992    13.88628
      Other  |   2.094867   1.814209     0.85   0.393     .3837019    11.43718
------------------------------------------------------------------------------
(note: file ./output/tempdata/crude_sh_eth.ster not found)
file ./output/tempdata/crude_sh_eth.ster saved
(note: file ./output/tempdata/surv_crude_sh_eth16.dta not found)
file ./output/tempdata/surv_crude_sh_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.15828         0.55        1         0.4579
      3.eth5      |     -0.00826         0.00        1         0.9691
      4.eth5      |      0.29645         1.93        1         0.1643
      5.eth5      |     -0.04520         0.04        1         0.8322
      ------------+---------------------------------------------------
      global test |                      5.93        4         0.2045
      ----------------------------------------------------------------

         failure _d:  sh_admit
   analysis time _t:  (sh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -126.20676
Iteration 1:   log likelihood = -121.84094
Iteration 2:   log likelihood = -121.48137
Iteration 3:   log likelihood = -121.39099
Iteration 4:   log likelihood = -121.35811
Iteration 5:   log likelihood = -121.34605
Iteration 6:   log likelihood = -121.34162
Iteration 7:   log likelihood = -121.33999
Iteration 8:   log likelihood = -121.33939
Iteration 9:   log likelihood = -121.33916
Iteration 10:  log likelihood = -121.33908
Iteration 11:  log likelihood = -121.33905
Iteration 12:  log likelihood = -121.33904
Iteration 13:  log likelihood = -121.33904
Iteration 14:  log likelihood = -121.33904
Iteration 15:  log likelihood = -121.33904
Iteration 16:  log likelihood = -121.33904
Iteration 17:  log likelihood = -121.33904
Iteration 18:  log likelihood = -121.33904
Iteration 19:  log likelihood = -121.33904
Iteration 20:  log likelihood = -121.33904
Iteration 21:  log likelihood = -121.33904
Iteration 22:  log likelihood = -121.33904
Iteration 23:  log likelihood = -121.33904
Iteration 24:  log likelihood = -121.33904
Iteration 25:  log likelihood = -121.33904
Iteration 26:  log likelihood = -121.33904
Iteration 27:  log likelihood = -121.33904
Iteration 28:  log likelihood = -121.33904
Iteration 29:  log likelihood = -121.33904
Iteration 30:  log likelihood = -121.33904
Iteration 31:  log likelihood = -121.33904
Refining estimates:
Iteration 0:   log likelihood = -121.33904
Iteration 1:   log likelihood = -121.33904

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           19
Time at risk    =  1577.823409
                                                LR chi2(8)       =        9.74
Log likelihood  =   -121.33904                  Prob > chi2      =      0.2841

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.417339   2.023141     1.05   0.292     .4687513    12.46616
      Black  |   3.163492      2.659     1.37   0.171     .6091289     16.4295
      Mixed  |    1.69289   1.546816     0.58   0.565     .2824066    10.14806
      Other  |   2.081914   1.803366     0.85   0.397     .3811952    11.37047
             |
     age_cat |
41 - 60 y..  |   1.185699   .5788321     0.35   0.727     .4554456    3.086827
61 - 80 y..  |   .3420041    .268038    -1.37   0.171     .0736074    1.589064
  >80 years  |   9.61e-15   8.37e-08    -0.00   1.000            0           .
             |
        male |
       Male  |   1.870347     .89677     1.31   0.192     .7308005    4.786801
------------------------------------------------------------------------------
(note: file ./output/tempdata/model1_sh_eth.ster not found)
file ./output/tempdata/model1_sh_eth.ster saved
(note: file ./output/tempdata/surv_model1_sh_eth.dta not found)
file ./output/tempdata/surv_model1_sh_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.17133         0.56        1         0.4539
      3.eth5      |      0.03825         0.03        1         0.8694
      4.eth5      |      0.26374         1.32        1         0.2514
      5.eth5      |     -0.04959         0.05        1         0.8284
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.12487         0.29        1         0.5917
      2.age_cat   |     -0.14950         0.43        1         0.5121
      3.age_cat   |     -0.20590         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |     -0.00539         0.00        1         0.9817
      ------------+---------------------------------------------------
      global test |                      4.10        8         0.8480
      ----------------------------------------------------------------

         failure _d:  sh_admit
   analysis time _t:  (sh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -126.20676
Iteration 1:   log likelihood =  -119.4373
Iteration 2:   log likelihood = -117.91853
Iteration 3:   log likelihood = -117.78175
Iteration 4:   log likelihood = -117.74803
Iteration 5:   log likelihood = -117.73568
Iteration 6:   log likelihood = -117.73114
Iteration 7:   log likelihood = -117.72947
Iteration 8:   log likelihood = -117.72885
Iteration 9:   log likelihood = -117.72863
Iteration 10:  log likelihood = -117.72854
Iteration 11:  log likelihood = -117.72851
Iteration 12:  log likelihood =  -117.7285
Iteration 13:  log likelihood =  -117.7285
Iteration 14:  log likelihood = -117.72849
Iteration 15:  log likelihood = -117.72849
Iteration 16:  log likelihood = -117.72849
Iteration 17:  log likelihood = -117.72849
Iteration 18:  log likelihood = -117.72849
Iteration 19:  log likelihood = -117.72849
Iteration 20:  log likelihood = -117.72849
Iteration 21:  log likelihood = -117.72849
Iteration 22:  log likelihood = -117.72849
Iteration 23:  log likelihood = -117.72849
Iteration 24:  log likelihood = -117.72849
Iteration 25:  log likelihood = -117.72849
Iteration 26:  log likelihood = -117.72849
Iteration 27:  log likelihood = -117.72849
Iteration 28:  log likelihood = -117.72849
Iteration 29:  log likelihood = -117.72849
Iteration 30:  log likelihood = -117.72849
Iteration 31:  log likelihood = -117.72849
Iteration 32:  log likelihood = -117.72849
Iteration 33:  log likelihood = -117.72849
Iteration 34:  log likelihood = -117.72849
Iteration 35:  log likelihood = -117.72849
Iteration 36:  log likelihood = -117.72849
Iteration 37:  log likelihood = -117.72849
Iteration 38:  log likelihood = -117.72849
Iteration 39:  log likelihood = -117.72849
Iteration 40:  log likelihood = -117.72849
Iteration 41:  log likelihood = -117.72849
Iteration 42:  log likelihood = -117.72849
Iteration 43:  log likelihood = -117.72849
Iteration 44:  log likelihood = -117.72849
Refining estimates:
Iteration 0:   log likelihood = -117.72849

Cox regression -- no ties

No. of subjects =          776                  Number of obs    =         776
No. of failures =           19
Time at risk    =  1577.823409
                                                LR chi2(13)      =       16.96
Log likelihood  =   -117.72849                  Prob > chi2      =      0.2013

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.395069   2.012924     1.04   0.299     .4612429    12.43673
      Black  |   2.901714   2.453359     1.26   0.208     .5533189    15.21716
      Mixed  |   1.666478    1.53119     0.56   0.578     .2752328    10.09018
      Other  |   2.234821   1.939484     0.93   0.354     .4078774    12.24492
             |
     age_cat |
41 - 60 y..  |    1.08015   .5291687     0.16   0.875     .4135022    2.821566
61 - 80 y..  |   .3246194    .255222    -1.43   0.152     .0695254    1.515673
  >80 years  |   5.61e-20          .        .       .            .           .
             |
        male |
       Male  |    1.78153    .858545     1.20   0.231     .6927661    4.581413
             |
urban_rura~n |
      Urban  |   .7964023   .3877399    -0.47   0.640     .3066993    2.068008
             |
         imd |
          1  |   .4536218   .4012869    -0.89   0.372     .0801118    2.568569
          2  |   .3852015   .3411406    -1.08   0.281     .0678969    2.185374
          3  |   .6923587   .5896381    -0.43   0.666     .1304417    3.674902
          4  |   .1019669   .1269821    -1.83   0.067     .0088805    1.170801
          5  |   .2230891   .2278049    -1.47   0.142     .0301498    1.650718
             |
  1.shielded |   7.68e-19          .        .       .            .           .
------------------------------------------------------------------------------
(note: file ./output/tempdata/model2_sh_eth.ster not found)
file ./output/tempdata/model2_sh_eth.ster saved
(note: file ./output/tempdata/surv_model2_sh_eth.dta not found)
file ./output/tempdata/surv_model2_sh_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.14580         0.42        1         0.5149
      3.eth5      |      0.05922         0.08        1         0.7838
      4.eth5      |      0.25941         1.22        1         0.2689
      5.eth5      |     -0.05295         0.05        1         0.8194
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.11544         0.24        1         0.6236
      2.age_cat   |     -0.17054         0.54        1         0.4619
      3.age_cat   |            .            .        1             .
      0b.male     |            .            .        1             .
      1.male      |      0.01486         0.00        1         0.9511
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.38395         2.80        1         0.0945
      0b.imd      |            .            .        1             .
      1.imd       |      0.14096         0.40        1         0.5295
      2.imd       |      0.01023         0.00        1         0.9631
      3.imd       |      0.08466         0.15        1         0.6950
      4.imd       |      0.23944         1.08        1         0.2986
      5.imd       |      0.29143         1.81        1         0.1782
      0b.shielded |            .            .        1             .
      1.shielded  |            .            .        1             .
      ------------+---------------------------------------------------
      global test |                     10.23       13         0.6749
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_.txt)

. 
. 
. * Pandemic
. import delimited using ./output/survival/input_survival_pandemic.csv, clear
(39 vars, 1,000 obs)

. * First preparing dataset
. * Drop variables that make up COPD hospitalisation as not required
. drop copd_exacerbation_hospital copd_hospital lrti_hospital copd_any eth ethn
> icity_sus

. 
. * Assume deregistered on 1st of month
. gen dereg_dateA = date(dereg_date, "YM")
(952 missing values generated)

. format %dD/N/CY dereg_dateA

. drop dereg_date

. 
. * Format dates
. local a "mi_primary_admission stroke_primary_admission heart_failure_primary_
> admission vte_primary_admission t1dm_admission_primary t2dm_admission_primary
>  dm_keto_admission_primary asthma_exacerbation depression_primary_admission a
> nxiety_primary_admission smi_primary_admission self_harm_primary_admission cv
> d_admission_date dm_admission copd_hospitalisation_date mh_admission" 

. local b "mi_admit_date stroke_admit_date hf_admit_date vte_admit_date t1dm_ad
> mit_date t2dm_admit_date dm_keto_admit_date asthma_admit_date depress_admit_d
> ate anx_admit_date smi_admit_date sh_admit_date cvd_admit_date dm_admit_date 
> copd_admit_date mh_admit_date" 

. forvalues i=1/16 {
  2.     local c: word `i' of `a'
  3.     local d: word `i' of `b' 
  4.     count if `c'!=""   
  5.     gen `d'=date(`c', "YMD")
  6.     format %dD/N/CY `d'
  7.     drop `c'
  8.     }
  49
(951 missing values generated)
  49
(951 missing values generated)
  49
(951 missing values generated)
  50
(950 missing values generated)
  49
(951 missing values generated)
  48
(952 missing values generated)
  48
(952 missing values generated)
  48
(952 missing values generated)
  48
(952 missing values generated)
  49
(951 missing values generated)
  49
(951 missing values generated)
  50
(950 missing values generated)
  182
(818 missing values generated)
  137
(863 missing values generated)
  186
(814 missing values generated)
  175
(825 missing values generated)

. * Define index date
. gen index_date = date("23/03/2020", "DMY")

. * Define end of follow-up
. gen end_study = date("30/04/2022", "DMY")

. format %dD/N/CY index_date end_study

. egen end_date = rowmin(dereg_dateA end_study)

. format %dD/N/CY end_date

. 
. * Reorder ethnicity - white, asian, black, mixed, other
. *re-order ethnicity
.  gen eth5=1 if ethnicity==1
(779 missing values generated)

.  replace eth5=2 if ethnicity==3
(197 real changes made)

.  replace eth5=3 if ethnicity==4
(197 real changes made)

.  replace eth5=4 if ethnicity==2
(187 real changes made)

.  replace eth5=5 if ethnicity==5
(198 real changes made)

.  replace eth5=. if ethnicity==.
(0 real changes made)

. 
.  label define eth5                      1 "White"                            
>            ///
>                                                         2 "South Asian"      
>                    ///                                             
>                                                         3 "Black"            
>                            ///
>                                                         4 "Mixed"            
>                            ///
>                                                         5 "Other"            
>                            

.                                         
. 
. label values eth5 eth5

. safetab eth5, m
5

       eth5 |      Freq.     Percent        Cum.
------------+-----------------------------------
      White |        221       22.10       22.10
South Asian |        197       19.70       41.80
      Black |        197       19.70       61.50
      Mixed |        187       18.70       80.20
      Other |        198       19.80      100.00
------------+-----------------------------------
      Total |      1,000      100.00

. 
. * Make gender numeric
. gen male = 1 if sex == "M"
(504 missing values generated)

. replace male = 0 if sex == "F"
(496 real changes made)

. label define male 0"Female" 1"Male"

. label values male male

. safetab male, miss
5

       male |      Freq.     Percent        Cum.
------------+-----------------------------------
     Female |        496       49.60       49.60
       Male |        496       49.60       99.20
          . |          8        0.80      100.00
------------+-----------------------------------
      Total |      1,000      100.00

. drop sex

. 
. * Make region numeric
. generate region2=.
(1,000 missing values generated)

. replace region2=0 if region=="East"
(0 real changes made)

. replace region2=1 if region=="East Midlands"
(101 real changes made)

. replace region2=2 if region=="London"
(194 real changes made)

. replace region2=3 if region=="North East"
(106 real changes made)

. replace region2=4 if region=="North West"
(114 real changes made)

. replace region2=5 if region=="South East"
(208 real changes made)

. replace region2=6 if region=="South West"
(0 real changes made)

. replace region2=7 if region=="West Midlands"
(93 real changes made)

. replace region2=8 if region=="Yorkshire and The Humber"
(0 real changes made)

. drop region

. rename region2 region

. label var region "region of England"

. label define region 0 "East" 1 "East Midlands"  2 "London" 3 "North East" 4 "
> North West" 5 "South East" 6 "South West" 7 "West Midlands" 8 "Yorkshire and 
> The Humber"

. label values region region

. safetab region, miss
7

       region of England |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
           East Midlands |        101       10.10       10.10
                  London |        194       19.40       29.50
              North East |        106       10.60       40.10
              North West |        114       11.40       51.50
              South East |        208       20.80       72.30
           West Midlands |         93        9.30       81.60
                       . |        184       18.40      100.00
-------------------------+-----------------------------------
                   Total |      1,000      100.00

. 
. *create a 4 category rural urban variable 
. generate urban_rural_5=.
(1,000 missing values generated)

. la var urban_rural_5 "Rural Urban in five categories"

. replace urban_rural_5=1 if urban_rural==1
(104 real changes made)

. replace urban_rural_5=2 if urban_rural==2
(95 real changes made)

. replace urban_rural_5=3 if urban_rural==3|urban_rural==4
(192 real changes made)

. replace urban_rural_5=4 if urban_rural==5|urban_rural==6
(196 real changes made)

. replace urban_rural_5=5 if urban_rural==7|urban_rural==8
(413 real changes made)

. label define urban_rural_5 1 "Urban major conurbation" 2 "Urban minor conurba
> tion" 3 "Urban city and town" 4 "Rural town and fringe" 5 "Rural village and 
> dispersed"

. label values urban_rural_5 urban_rural_5

. safetab urban_rural_5, miss
14

        Rural Urban in five |
                 categories |      Freq.     Percent        Cum.
----------------------------+-----------------------------------
    Urban major conurbation |        104       10.40       10.40
    Urban minor conurbation |         95        9.50       19.90
        Urban city and town |        192       19.20       39.10
      Rural town and fringe |        196       19.60       58.70
Rural village and dispersed |        413       41.30      100.00
----------------------------+-----------------------------------
                      Total |      1,000      100.00

. 
. *generate a binary rural urban (with missing assigned to urban)
. generate urban_rural_bin=.
(1,000 missing values generated)

. replace urban_rural_bin=1 if urban_rural<=4|urban_rural==.
(391 real changes made)

. replace urban_rural_bin=0 if urban_rural>4 & urban_rural!=.
(609 real changes made)

. label define urban_rural_bin 0 "Rural" 1 "Urban"

. label values urban_rural_bin urban_rural_bin

. safetab urban_rural_bin urban_rural, miss
28

urban_rura |                      urban_rural
     l_bin |         1          2          3          4          5 |     Total
-----------+-------------------------------------------------------+----------
     Rural |         0          0          0          0         93 |       609 
     Urban |       104         95         95         97          0 |       391 
-----------+-------------------------------------------------------+----------
     Total |       104         95         95         97         93 |     1,000 


urban_rura |           urban_rural
     l_bin |         6          7          8 |     Total
-----------+---------------------------------+----------
     Rural |       103        186        227 |       609 
     Urban |         0          0          0 |       391 
-----------+---------------------------------+----------
     Total |       103        186        227 |     1,000 

. label var urban_rural_bin "Rural-Urban"

. 
. * Define age categories
. * Create age categories
. egen age_cat = cut(age), at(18, 40, 60, 80, 120) icodes
(228 missing values generated)

. label define age 0 "18 - 40 years" 1 "41 - 60 years" 2 "61 - 80 years" 3 ">80
>  years"

. label values age_cat age

. safetab age_cat, miss
8

      age_cat |      Freq.     Percent        Cum.
--------------+-----------------------------------
18 - 40 years |        294       29.40       29.40
41 - 60 years |        260       26.00       55.40
61 - 80 years |        169       16.90       72.30
    >80 years |         49        4.90       77.20
            . |        228       22.80      100.00
--------------+-----------------------------------
        Total |      1,000      100.00

. 
. * open file to write results to
. 
. file write tablecontent ("Association between ethnicity and outcomes pandemic
> ") _n

. file write tablecontent _tab ("Denominator") _tab ("Event") _tab ("Total pers
> on-weeks") _tab ("Rate per 1,000") _tab ("Crude") _tab _tab ("Age/Sex Adjuste
> d") _tab _tab ("Fully Adjusted") _tab _tab  _n

. file write tablecontent _tab _tab _tab _tab _tab   ("HR") _tab ("95% CI") _ta
> b ("HR") _tab ("95% CI") _tab ("HR") _tab ("95% CI") _tab _tab  _n

. 
. foreach sub in cvd dm copd mh mi stroke hf vte t1dm t2dm dm_keto asthma depre
> ss anx smi sh {
  2.     * Cox model for each outcome category
.     * Generate flags and end dates for each outcome
.     gen `sub'_admit=(`sub'_admit_date!=.)
  3.     tab `sub'_admit
  4.     count if `sub'_admit_date==.
  5.     gen `sub'_end = end_date
  6.     replace `sub'_end = `sub'_admit_date if `sub'_admit==1
  7. 
.     stset `sub'_end, fail(`sub'_admit) id(patient_id) enter(index_date) origi
> n(index_date) scale(365.25) 
  8.     * Kaplan-Meier plot
.     sts graph, by(eth5)
  9.     graph export ./output/graphs/km_`sub'_pan_eth.svg, as(svg) replace
 10.     * Cox model - crude
.     stcox i.eth5
 11.     estimates save "./output/tempdata/crude_`sub'_eth", replace 
 12.     eststo model1
 13.     parmest, label eform format(estimate p lb ub) saving("./output/tempdat
> a/surv_crude_`sub'_eth16", replace) idstr("crude_`sub'_eth") 
 14.     estat phtest, detail
 15.     * Cox model - age and gender adjusted
.     stcox i.eth5 i.age_cat i.male
 16.     estimates save "./output/tempdata/model1_`sub'_eth", replace 
 17.     eststo model2
 18.     parmest, label eform format(estimate p lb ub) saving("./output/tempdat
> a/surv_model1_`sub'_eth", replace) idstr("model1_`sub'_eth") 
 19.     estat phtest, detail
 20.     * Cox model - fully adjusted
.     stcox i.eth5 i.age_cat i.male i.urban_rural_bin i.imd i.shielded
 21.     estimates save "./output/tempdata/model2_`sub'_eth", replace 
 22.     eststo model3
 23.     parmest, label eform format(estimate p lb ub) saving("./output/tempdat
> a/surv_model2_`sub'_eth", replace) idstr("model2_`sub'_eth") 
 24.     estat phtest, detail
 25.     esttab model1 model2 model3 using "./output/tables/estout_table_eth_pa
> n.txt", b(a2) ci(2) label wide compress eform ///
>         title ("`sub'") ///
>         varlabels(`e(labels)') ///
>         stats(N_sub) ///
>         append 
 26.     eststo clear
 27.    * Write results to table
.     * Column headings 
.     file write tablecontent ("`sub'") _n
 28. 
.     * eth16 labelled columns
. 
.     local lab1: label eth5 1
 29.     local lab2: label eth5 2
 30.     local lab3: label eth5 3
 31.     local lab4: label eth5 4
 32.     local lab5: label eth5 5
 33.     /* counts */
.     
.     * First row, eth16 = 1 (White British) reference cat
.     qui safecount if eth5==1
 34.     local denominator = r(N)
 35.     qui safecount if eth5 == 1 & `sub'_admit == 1
 36.     local event = r(N)
 37.     bysort eth5: egen total_follow_up = total(_t)
 38.     qui su total_follow_up if eth5 == 1
 39.     local person_week = r(mean)/7
 40.     local rate = 1000*(`event'/`person_week')
 41.     
.     file write tablecontent  ("`lab1'") _tab (`denominator') _tab (`event') _
> tab %10.0f (`person_week') _tab %3.2f (`rate') _tab
 42.     file write tablecontent ("1.00") _tab _tab ("1.00") _tab _tab ("1.00")
>   _tab _tab ("1.00") _tab _tab ("1.00") _n
 43.     
.     * Subsequent ethnic groups
.     forvalues eth=2/5 {
 44.         qui safecount if eth5==`eth'
 45.         local denominator = r(N)
 46.         qui safecount if eth5 == `eth' & `sub'_admit == 1
 47.         local event = r(N)
 48.         qui su total_follow_up if eth5 == `eth'
 49.         local person_week = r(mean)/7
 50.         local rate = 1000*(`event'/`person_week')
 51.         file write tablecontent  ("`lab`eth''") _tab (`denominator') _tab 
> (`event') _tab %10.0f (`person_week') _tab %3.2f (`rate') _tab  
 52.         cap estimates use "./output/tempdata/crude_`sub'_eth" 
 53.         cap lincom `eth'.eth5, eform
 54.         file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f (r(l
> b)) (" - ") %4.2f (r(ub)) (")") _tab 
 55.         cap estimates clear
 56.         cap estimates use "./output/tempdata/model1_`sub'_eth" 
 57.         cap lincom `eth'.eth5, eform
 58.         file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f (r(l
> b)) (" - ") %4.2f (r(ub)) (")") _tab 
 59.         cap estimates clear
 60.         cap estimates use "./output/tempdata/model2_`sub'_eth" 
 61.         cap lincom `eth'.eth5, eform
 62.         file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4.2f (r(l
> b)) (" - ") %4.2f (r(ub)) (")") _tab _n
 63.         cap estimates clear
 64.     }  //end ethnic group
 65. drop total_follow_up
 66. 
. } //end outcomes

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        818       81.80       81.80
          1 |        182       18.20      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  818
(182 real changes made)

                id:  patient_id
     failure event:  cvd_admit != 0 & cvd_admit < .
obs. time interval:  (cvd_end[_n-1], cvd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
        104  observations end on or before enter()
------------------------------------------------------------------------------
        896  observations remaining, representing
        896  subjects
         79  failures in single-failure-per-subject data
  1,755.948  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_cvd_pan_eth.svg not found)
(file ./output/graphs/km_cvd_pan_eth.svg written in SVG format)

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -531.88498
Iteration 1:   log likelihood = -530.84774
Iteration 2:   log likelihood = -530.83297
Iteration 3:   log likelihood = -530.83296
Refining estimates:
Iteration 0:   log likelihood = -530.83296

Cox regression -- Breslow method for ties

No. of subjects =          896                  Number of obs    =         896
No. of failures =           79
Time at risk    =  1755.947981
                                                LR chi2(4)       =        2.10
Log likelihood  =   -530.83296                  Prob > chi2      =      0.7166

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .9108652   .3146182    -0.27   0.787      .462854    1.792521
      Black  |   1.026323   .3426419     0.08   0.938     .5334664    1.974518
      Mixed  |   .6463678   .2525246    -1.12   0.264     .3005593    1.390046
      Other  |   1.071525   .3524485     0.21   0.834     .5623716    2.041651
------------------------------------------------------------------------------
file ./output/tempdata/crude_cvd_eth.ster saved
file ./output/tempdata/surv_crude_cvd_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.20338         3.27        1         0.0706
      3.eth5      |     -0.29852         7.03        1         0.0080
      4.eth5      |     -0.22421         3.97        1         0.0464
      5.eth5      |     -0.14065         1.56        1         0.2114
      ------------+---------------------------------------------------
      global test |                      8.42        4         0.0773
      ----------------------------------------------------------------

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -440.06463
Iteration 1:   log likelihood = -436.61956
Iteration 2:   log likelihood = -436.56389
Iteration 3:   log likelihood = -436.56384
Refining estimates:
Iteration 0:   log likelihood = -436.56384

Cox regression -- Breslow method for ties

No. of subjects =          693                  Number of obs    =         693
No. of failures =           68
Time at risk    =  1345.793292
                                                LR chi2(8)       =        7.00
Log likelihood  =   -436.56384                  Prob > chi2      =      0.5365

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .9000491   .3426192    -0.28   0.782     .4268169    1.897976
      Black  |   1.147075    .413137     0.38   0.703     .5662629    2.323621
      Mixed  |   .5694575   .2494838    -1.29   0.199     .2412922    1.343938
      Other  |   1.104833   .3982515     0.28   0.782     .5450921    2.239357
             |
     age_cat |
41 - 60 y..  |   .9521206   .2954794    -0.16   0.874     .5182408    1.749252
61 - 80 y..  |   1.578436   .4771476     1.51   0.131     .8728028    2.854552
  >80 years  |   1.318805   .6527841     0.56   0.576     .4998639    3.479442
             |
        male |
       Male  |   1.159366   .2828411     0.61   0.544     .7187204    1.870171
------------------------------------------------------------------------------
file ./output/tempdata/model1_cvd_eth.ster saved
file ./output/tempdata/surv_model1_cvd_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.27944         5.54        1         0.0186
      3.eth5      |     -0.33091         7.22        1         0.0072
      4.eth5      |     -0.27263         5.06        1         0.0245
      5.eth5      |     -0.19682         2.68        1         0.1019
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.09086         0.56        1         0.4538
      2.age_cat   |      0.02233         0.03        1         0.8547
      3.age_cat   |      0.09682         0.64        1         0.4234
      0b.male     |            .            .        1             .
      1.male      |      0.06157         0.26        1         0.6073
      ------------+---------------------------------------------------
      global test |                     11.48        8         0.1758
      ----------------------------------------------------------------

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -440.06463
Iteration 1:   log likelihood = -435.48091
Iteration 2:   log likelihood = -433.48048
Iteration 3:   log likelihood = -433.24227
Iteration 4:   log likelihood = -433.23472
Iteration 5:   log likelihood = -433.23471
Refining estimates:
Iteration 0:   log likelihood = -433.23471

Cox regression -- Breslow method for ties

No. of subjects =          693                  Number of obs    =         693
No. of failures =           68
Time at risk    =  1345.793292
                                                LR chi2(15)      =       13.66
Log likelihood  =   -433.23471                  Prob > chi2      =      0.5515

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .8703929   .3367863    -0.36   0.720     .4077133    1.858129
      Black  |   1.155348   .4197167     0.40   0.691     .5668748    2.354717
      Mixed  |    .531458   .2352174    -1.43   0.153     .2232218    1.265323
      Other  |   1.109296   .4046169     0.28   0.776      .542714    2.267379
             |
     age_cat |
41 - 60 y..  |   .9451097   .2936201    -0.18   0.856     .5140874    1.737511
61 - 80 y..  |   1.631427   .4947365     1.61   0.107     .9004039    2.955954
  >80 years  |   1.245294   .6288107     0.43   0.664     .4628688    3.350316
             |
        male |
       Male  |   1.182007    .290643     0.68   0.496     .7299928     1.91391
             |
urban_rura~n |
      Urban  |   1.086062   .2715904     0.33   0.741     .6652665     1.77302
             |
         imd |
          1  |   .5863976   .3423724    -0.91   0.361     .1867292    1.841502
          2  |   .8310989   .4684478    -0.33   0.743      .275343      2.5086
          3  |    .446986   .2673915    -1.35   0.178     .1383874    1.443748
          4  |   .4843477   .2864098    -1.23   0.220     .1519901    1.543473
          5  |   .7055483   .4040175    -0.61   0.542     .2296698    2.167452
             |
  1.shielded |   4.332387   3.199583     1.99   0.047     1.018808    18.42308
------------------------------------------------------------------------------
file ./output/tempdata/model2_cvd_eth.ster saved
file ./output/tempdata/surv_model2_cvd_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.27566         5.19        1         0.0227
      3.eth5      |     -0.33911         7.56        1         0.0060
      4.eth5      |     -0.25878         4.62        1         0.0316
      5.eth5      |     -0.19349         2.50        1         0.1135
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.07822         0.43        1         0.5141
      2.age_cat   |      0.02479         0.04        1         0.8408
      3.age_cat   |      0.08020         0.42        1         0.5163
      0b.male     |            .            .        1             .
      1.male      |      0.08395         0.48        1         0.4882
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.11567         0.94        1         0.3335
      0b.imd      |            .            .        1             .
      1.imd       |      0.06379         0.28        1         0.5962
      2.imd       |      0.07691         0.40        1         0.5265
      3.imd       |      0.16777         1.89        1         0.1689
      4.imd       |      0.04810         0.16        1         0.6890
      5.imd       |      0.05233         0.19        1         0.6603
      0b.shielded |            .            .        1             .
      1.shielded  |      0.17121         1.98        1         0.1598
      ------------+---------------------------------------------------
      global test |                     17.34       15         0.2988
      ----------------------------------------------------------------
(note: file ./output/tables/estout_table_eth_pan.txt not found)
(output written to ./output/tables/estout_table_eth_pan.txt)

   dm_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        863       86.30       86.30
          1 |        137       13.70      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  863
(137 real changes made)

                id:  patient_id
     failure event:  dm_admit != 0 & dm_admit < .
obs. time interval:  (dm_end[_n-1], dm_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         69  observations end on or before enter()
------------------------------------------------------------------------------
        931  observations remaining, representing
        931  subjects
         69  failures in single-failure-per-subject data
  1,848.701  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  dm_admit
   analysis time _t:  (dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_dm_pan_eth.svg not found)
(file ./output/graphs/km_dm_pan_eth.svg written in SVG format)

         failure _d:  dm_admit
   analysis time _t:  (dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -467.85067
Iteration 1:   log likelihood = -467.07215
Iteration 2:   log likelihood = -467.06941
Iteration 3:   log likelihood = -467.06941
Refining estimates:
Iteration 0:   log likelihood = -467.06941

Cox regression -- Breslow method for ties

No. of subjects =          931                  Number of obs    =         931
No. of failures =           69
Time at risk    =   1848.70089
                                                LR chi2(4)       =        1.56
Log likelihood  =   -467.06941                  Prob > chi2      =      0.8155

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .8833408   .3147785    -0.35   0.728      .439342    1.776045
      Black  |   .9369985     .32758    -0.19   0.852     .4722304     1.85919
      Mixed  |   .7415621   .2838024    -0.78   0.435     .3502557    1.570037
      Other  |   .6629906   .2537337    -1.07   0.283     .3131434    1.403691
------------------------------------------------------------------------------
file ./output/tempdata/crude_dm_eth.ster saved
file ./output/tempdata/surv_crude_dm_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.14358         1.42        1         0.2333
      3.eth5      |      0.05565         0.21        1         0.6443
      4.eth5      |      0.10566         0.77        1         0.3805
      5.eth5      |      0.07047         0.34        1         0.5585
      ------------+---------------------------------------------------
      global test |                      4.61        4         0.3301
      ----------------------------------------------------------------

         failure _d:  dm_admit
   analysis time _t:  (dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -338.40724
Iteration 1:   log likelihood = -331.89514
Iteration 2:   log likelihood = -331.82471
Iteration 3:   log likelihood = -331.82467
Refining estimates:
Iteration 0:   log likelihood = -331.82467

Cox regression -- Breslow method for ties

No. of subjects =          709                  Number of obs    =         709
No. of failures =           52
Time at risk    =  1408.665298
                                                LR chi2(8)       =       13.17
Log likelihood  =   -331.82467                  Prob > chi2      =      0.1063

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .9590551    .401412    -0.10   0.920     .4222539    2.178279
      Black  |   1.131531   .4546116     0.31   0.758     .5148514    2.486858
      Mixed  |   .6362774    .302699    -0.95   0.342     .2504383    1.616562
      Other  |   .7557026   .3337996    -0.63   0.526     .3179573    1.796111
             |
     age_cat |
41 - 60 y..  |   2.526819   .9267994     2.53   0.011     1.231306    5.185398
61 - 80 y..  |   2.651968   1.040434     2.49   0.013     1.229194    5.721581
  >80 years  |   1.198756   .9220009     0.24   0.814     .2654881    5.412733
             |
        male |
       Male  |     1.4076   .3977483     1.21   0.226     .8090097    2.449091
------------------------------------------------------------------------------
file ./output/tempdata/model1_dm_eth.ster saved
file ./output/tempdata/surv_model1_dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.27740         4.05        1         0.0442
      3.eth5      |     -0.05524         0.15        1         0.6948
      4.eth5      |     -0.04349         0.10        1         0.7553
      5.eth5      |     -0.03565         0.07        1         0.7975
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.04157         0.09        1         0.7633
      2.age_cat   |      0.05021         0.13        1         0.7139
      3.age_cat   |     -0.07776         0.31        1         0.5748
      0b.male     |            .            .        1             .
      1.male      |     -0.19915         2.13        1         0.1448
      ------------+---------------------------------------------------
      global test |                      7.47        8         0.4866
      ----------------------------------------------------------------

         failure _d:  dm_admit
   analysis time _t:  (dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -338.40724
Iteration 1:   log likelihood = -327.85622
Iteration 2:   log likelihood = -327.67775
Iteration 3:   log likelihood = -327.67698
Iteration 4:   log likelihood = -327.67698
Refining estimates:
Iteration 0:   log likelihood = -327.67698

Cox regression -- Breslow method for ties

No. of subjects =          709                  Number of obs    =         709
No. of failures =           52
Time at risk    =  1408.665298
                                                LR chi2(15)      =       21.46
Log likelihood  =   -327.67698                  Prob > chi2      =      0.1227

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .8258737    .350856    -0.45   0.652      .359168    1.899021
      Black  |   1.041467   .4242119     0.10   0.921     .4687407    2.313972
      Mixed  |   .5621085   .2708593    -1.20   0.232     .2186038    1.445382
      Other  |   .6757194   .3007562    -0.88   0.378      .282426    1.616695
             |
     age_cat |
41 - 60 y..  |   2.492792   .9158298     2.49   0.013     1.213283    5.121651
61 - 80 y..  |   2.762414   1.088266     2.58   0.010     1.276303    5.978931
  >80 years  |   1.357539   1.045646     0.40   0.691     .2999944    6.143153
             |
        male |
       Male  |   1.387533    .397422     1.14   0.253     .7914789     2.43247
             |
urban_rura~n |
      Urban  |   1.360552   .3832196     1.09   0.274     .7833604    2.363027
             |
         imd |
          1  |    .395931   .2579202    -1.42   0.155     .1104393    1.419434
          2  |    1.01794   .5773072     0.03   0.975     .3349482    3.093617
          3  |   .4737268   .2931555    -1.21   0.227     .1408577    1.593219
          4  |   .6617991   .3866841    -0.71   0.480     .2105599    2.080064
          5  |   .4549808    .288656    -1.24   0.215     .1312081    1.577704
             |
  1.shielded |   2.812095   2.884884     1.01   0.314     .3765268    21.00217
------------------------------------------------------------------------------
file ./output/tempdata/model2_dm_eth.ster saved
file ./output/tempdata/surv_model2_dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.29675         4.90        1         0.0268
      3.eth5      |     -0.05918         0.17        1         0.6783
      4.eth5      |     -0.02465         0.03        1         0.8588
      5.eth5      |     -0.04165         0.09        1         0.7658
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.05550         0.16        1         0.6872
      2.age_cat   |      0.05934         0.19        1         0.6596
      3.age_cat   |     -0.08118         0.34        1         0.5579
      0b.male     |            .            .        1             .
      1.male      |     -0.21519         2.68        1         0.1016
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.09879         0.57        1         0.4497
      0b.imd      |            .            .        1             .
      1.imd       |      0.09439         0.48        1         0.4874
      2.imd       |      0.11663         0.75        1         0.3880
      3.imd       |      0.07081         0.27        1         0.6018
      4.imd       |      0.15777         1.36        1         0.2432
      5.imd       |     -0.01990         0.02        1         0.8822
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.09764         0.49        1         0.4843
      ------------+---------------------------------------------------
      global test |                     12.38       15         0.6504
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

 copd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        814       81.40       81.40
          1 |        186       18.60      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  814
(186 real changes made)

                id:  patient_id
     failure event:  copd_admit != 0 & copd_admit < .
obs. time interval:  (copd_end[_n-1], copd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         97  observations end on or before enter()
------------------------------------------------------------------------------
        903  observations remaining, representing
        903  subjects
         89  failures in single-failure-per-subject data
  1,769.057  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  copd_admit
   analysis time _t:  (copd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_copd_pan_eth.svg not found)
(file ./output/graphs/km_copd_pan_eth.svg written in SVG format)

         failure _d:  copd_admit
   analysis time _t:  (copd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -599.75565
Iteration 1:   log likelihood = -597.52992
Iteration 2:   log likelihood = -597.51323
Iteration 3:   log likelihood = -597.51323
Refining estimates:
Iteration 0:   log likelihood = -597.51323

Cox regression -- Breslow method for ties

No. of subjects =          903                  Number of obs    =         903
No. of failures =           89
Time at risk    =   1769.05681
                                                LR chi2(4)       =        4.48
Log likelihood  =   -597.51323                  Prob > chi2      =      0.3443

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.678721   .5792207     1.50   0.133     .8536557     3.30122
      Black  |   1.224467   .4550301     0.54   0.586     .5910549    2.536683
      Mixed  |   1.346745   .4928647     0.81   0.416     .6573145     2.75929
      Other  |   1.870498   .6340761     1.85   0.065     .9625215    3.634999
------------------------------------------------------------------------------
file ./output/tempdata/crude_copd_eth.ster saved
file ./output/tempdata/surv_crude_copd_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.10842         1.04        1         0.3069
      3.eth5      |     -0.05545         0.27        1         0.6012
      4.eth5      |     -0.10843         1.04        1         0.3070
      5.eth5      |     -0.13252         1.56        1         0.2119
      ------------+---------------------------------------------------
      global test |                      1.92        4         0.7510
      ----------------------------------------------------------------

         failure _d:  copd_admit
   analysis time _t:  (copd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -466.35179
Iteration 1:   log likelihood = -463.39172
Iteration 2:   log likelihood = -463.29408
Iteration 3:   log likelihood = -463.29394
Refining estimates:
Iteration 0:   log likelihood = -463.29394

Cox regression -- Breslow method for ties

No. of subjects =          698                  Number of obs    =         698
No. of failures =           72
Time at risk    =  1362.726899
                                                LR chi2(8)       =        6.12
Log likelihood  =   -463.29394                  Prob > chi2      =      0.6343

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.757161   .7263568     1.36   0.173     .7815392    3.950684
      Black  |   1.714949   .7346255     1.26   0.208     .7406713    3.970789
      Mixed  |   1.479934   .6428465     0.90   0.367     .6316866    3.467234
      Other  |   2.087348    .847239     1.81   0.070     .9421031    4.624782
             |
     age_cat |
41 - 60 y..  |   .8591638   .2486975    -0.52   0.600     .4871731    1.515196
61 - 80 y..  |   1.015647      .3194     0.05   0.961     .5483499    1.881171
  >80 years  |   1.553034   .6581923     1.04   0.299     .6767573    3.563931
             |
        male |
       Male  |   .8714152   .2068713    -0.58   0.562     .5472081    1.387707
------------------------------------------------------------------------------
file ./output/tempdata/model1_copd_eth.ster saved
file ./output/tempdata/surv_model1_copd_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.15355         1.72        1         0.1896
      3.eth5      |     -0.14620         1.54        1         0.2153
      4.eth5      |     -0.14562         1.54        1         0.2149
      5.eth5      |     -0.18473         2.53        1         0.1119
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.13219         1.30        1         0.2540
      2.age_cat   |      0.14942         1.65        1         0.1983
      3.age_cat   |      0.31891         7.38        1         0.0066
      0b.male     |            .            .        1             .
      1.male      |      0.03759         0.10        1         0.7496
      ------------+---------------------------------------------------
      global test |                     10.42        8         0.2369
      ----------------------------------------------------------------

         failure _d:  copd_admit
   analysis time _t:  (copd_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -466.35179
Iteration 1:   log likelihood = -463.50233
Iteration 2:   log likelihood = -455.02757
Iteration 3:   log likelihood = -453.82286
Iteration 4:   log likelihood = -453.74004
Iteration 5:   log likelihood =  -453.7393
Iteration 6:   log likelihood =  -453.7393
Refining estimates:
Iteration 0:   log likelihood =  -453.7393

Cox regression -- Breslow method for ties

No. of subjects =          698                  Number of obs    =         698
No. of failures =           72
Time at risk    =  1362.726899
                                                LR chi2(15)      =       25.22
Log likelihood  =    -453.7393                  Prob > chi2      =      0.0470

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.850612   .7741567     1.47   0.141     .8151489      4.2014
      Black  |   1.766938   .7645183     1.32   0.188     .7567002    4.125903
      Mixed  |   1.410457   .6194969     0.78   0.434     .5963446     3.33597
      Other  |   2.472589   1.017718     2.20   0.028     1.103563    5.539962
             |
     age_cat |
41 - 60 y..  |   .8127638   .2366346    -0.71   0.476     .4593447    1.438103
61 - 80 y..  |   .9447226   .2989066    -0.18   0.857     .5081447    1.756391
  >80 years  |    1.33924   .5764877     0.68   0.497      .576038     3.11362
             |
        male |
       Male  |   .8344634   .1998641    -0.76   0.450     .5218362    1.334383
             |
urban_rura~n |
      Urban  |   .9633426   .2364329    -0.15   0.879     .5954846    1.558443
             |
         imd |
          1  |   1.712129   .9351914     0.98   0.325     .5869442    4.994315
          2  |   .9915826   .5575131    -0.02   0.988     .3294158    2.984787
          3  |   .5319972   .3189779    -1.05   0.293     .1642635     1.72297
          4  |   .5529593   .3337928    -0.98   0.326     .1693819    1.805175
          5  |    .623986   .3730261    -0.79   0.430     .1933377    2.013877
             |
  1.shielded |    5.32102    3.20896     2.77   0.006     1.631769    17.35126
------------------------------------------------------------------------------
file ./output/tempdata/model2_copd_eth.ster saved
file ./output/tempdata/surv_model2_copd_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.15910         1.82        1         0.1777
      3.eth5      |     -0.15249         1.66        1         0.1973
      4.eth5      |     -0.14704         1.65        1         0.1993
      5.eth5      |     -0.20262         3.07        1         0.0796
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.15075         1.76        1         0.1841
      2.age_cat   |      0.15222         1.73        1         0.1887
      3.age_cat   |      0.31121         7.31        1         0.0069
      0b.male     |            .            .        1             .
      1.male      |      0.03554         0.10        1         0.7557
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.14368         1.60        1         0.2062
      0b.imd      |            .            .        1             .
      1.imd       |      0.05733         0.24        1         0.6256
      2.imd       |      0.04331         0.14        1         0.7116
      3.imd       |      0.15737         1.84        1         0.1749
      4.imd       |      0.04649         0.15        1         0.6959
      5.imd       |      0.09400         0.66        1         0.4158
      0b.shielded |            .            .        1             .
      1.shielded  |      0.03450         0.09        1         0.7640
      ------------+---------------------------------------------------
      global test |                     16.24       15         0.3661
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

   mh_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        825       82.50       82.50
          1 |        175       17.50      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  825
(175 real changes made)

                id:  patient_id
     failure event:  mh_admit != 0 & mh_admit < .
obs. time interval:  (mh_end[_n-1], mh_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         94  observations end on or before enter()
------------------------------------------------------------------------------
        906  observations remaining, representing
        906  subjects
         82  failures in single-failure-per-subject data
  1,792.361  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  mh_admit
   analysis time _t:  (mh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_mh_pan_eth.svg not found)
(file ./output/graphs/km_mh_pan_eth.svg written in SVG format)

         failure _d:  mh_admit
   analysis time _t:  (mh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -552.71141
Iteration 1:   log likelihood = -550.91691
Iteration 2:   log likelihood = -550.88589
Iteration 3:   log likelihood = -550.88589
Refining estimates:
Iteration 0:   log likelihood = -550.88589

Cox regression -- Breslow method for ties

No. of subjects =          906                  Number of obs    =         906
No. of failures =           82
Time at risk    =  1792.361396
                                                LR chi2(4)       =        3.65
Log likelihood  =   -550.88589                  Prob > chi2      =      0.4553

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.005222   .3453891     0.02   0.988     .5126179    1.971199
      Black  |   1.407221   .4472513     1.07   0.282     .7547944    2.623592
      Mixed  |   .7281655   .2786758    -0.83   0.407     .3439278    1.541675
      Other  |   .9128269    .319129    -0.26   0.794     .4600489    1.811227
------------------------------------------------------------------------------
file ./output/tempdata/crude_mh_eth.ster saved
file ./output/tempdata/surv_crude_mh_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.01039         0.01        1         0.9250
      3.eth5      |      0.10211         0.85        1         0.3552
      4.eth5      |     -0.04744         0.18        1         0.6676
      5.eth5      |      0.08135         0.54        1         0.4616
      ------------+---------------------------------------------------
      global test |                      2.43        4         0.6579
      ----------------------------------------------------------------

         failure _d:  mh_admit
   analysis time _t:  (mh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -407.43811
Iteration 1:   log likelihood = -405.88662
Iteration 2:   log likelihood = -405.86697
Iteration 3:   log likelihood = -405.86696
Refining estimates:
Iteration 0:   log likelihood = -405.86696

Cox regression -- no ties

No. of subjects =          689                  Number of obs    =         689
No. of failures =           63
Time at risk    =  1357.508556
                                                LR chi2(8)       =        3.14
Log likelihood  =   -405.86696                  Prob > chi2      =      0.9251

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.061219   .4109965     0.15   0.878     .4967587    2.267067
      Black  |   1.198569   .4562892     0.48   0.634     .5683486    2.527617
      Mixed  |   .7145511   .3104755    -0.77   0.439     .3049177    1.674495
      Other  |   .8760715   .3514283    -0.33   0.742     .3991054    1.923054
             |
     age_cat |
41 - 60 y..  |   1.088084   .3248967     0.28   0.777     .6060348    1.953562
61 - 80 y..  |   .8626387   .3099531    -0.41   0.681     .4265651    1.744506
  >80 years  |   1.436593   .6646881     0.78   0.434     .5800919    3.557712
             |
        male |
       Male  |   1.111156   .2818128     0.42   0.678     .6759148     1.82666
------------------------------------------------------------------------------
file ./output/tempdata/model1_mh_eth.ster saved
file ./output/tempdata/surv_model1_mh_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.04731         0.15        1         0.7020
      3.eth5      |      0.13637         1.18        1         0.2777
      4.eth5      |     -0.02670         0.05        1         0.8290
      5.eth5      |      0.14809         1.39        1         0.2383
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.25477         4.17        1         0.0412
      2.age_cat   |      0.12242         0.94        1         0.3335
      3.age_cat   |      0.08108         0.42        1         0.5146
      0b.male     |            .            .        1             .
      1.male      |     -0.18717         2.24        1         0.1345
      ------------+---------------------------------------------------
      global test |                      9.27        8         0.3202
      ----------------------------------------------------------------

         failure _d:  mh_admit
   analysis time _t:  (mh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -407.43811
Iteration 1:   log likelihood = -403.64658
Iteration 2:   log likelihood = -403.39654
Iteration 3:   log likelihood = -403.34282
Iteration 4:   log likelihood = -403.32318
Iteration 5:   log likelihood = -403.31596
Iteration 6:   log likelihood = -403.31331
Iteration 7:   log likelihood = -403.31233
Iteration 8:   log likelihood = -403.31197
Iteration 9:   log likelihood = -403.31184
Iteration 10:  log likelihood = -403.31179
Iteration 11:  log likelihood = -403.31177
Iteration 12:  log likelihood = -403.31176
Iteration 13:  log likelihood = -403.31176
Iteration 14:  log likelihood = -403.31176
Iteration 15:  log likelihood = -403.31176
Iteration 16:  log likelihood = -403.31176
Iteration 17:  log likelihood = -403.31176
Iteration 18:  log likelihood = -403.31176
Iteration 19:  log likelihood = -403.31176
Iteration 20:  log likelihood = -403.31176
Iteration 21:  log likelihood = -403.31176
Iteration 22:  log likelihood = -403.31176
Iteration 23:  log likelihood = -403.31176
Iteration 24:  log likelihood = -403.31176
Iteration 25:  log likelihood = -403.31176
Iteration 26:  log likelihood = -403.31176
Iteration 27:  log likelihood = -403.31176
Iteration 28:  log likelihood = -403.31176
Iteration 29:  log likelihood = -403.31176
Iteration 30:  log likelihood = -403.31176
Iteration 31:  log likelihood = -403.31176
Refining estimates:
Iteration 0:   log likelihood = -403.31176
Iteration 1:   log likelihood = -403.31176

Cox regression -- no ties

No. of subjects =          689                  Number of obs    =         689
No. of failures =           63
Time at risk    =  1357.508556
                                                LR chi2(15)      =        8.25
Log likelihood  =   -403.31176                  Prob > chi2      =      0.9133

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.037969   .4052038     0.10   0.924      .482938    2.230887
      Black  |    1.15571   .4429134     0.38   0.706     .5452993    2.449417
      Mixed  |    .693542   .3034836    -0.84   0.403     .2941709    1.635105
      Other  |   .8860175   .3580087    -0.30   0.765     .4013299    1.956064
             |
     age_cat |
41 - 60 y..  |   1.086456   .3259594     0.28   0.782     .6034395    1.956097
61 - 80 y..  |   .8111743   .2939633    -0.58   0.564     .3986992    1.650376
  >80 years  |   1.363786   .6352215     0.67   0.505     .5473629    3.397952
             |
        male |
       Male  |    1.10983   .2825467     0.41   0.682     .6738343    1.827932
             |
urban_rura~n |
      Urban  |   .8895682    .236091    -0.44   0.659     .5287748    1.496538
             |
         imd |
          1  |   .6578306   .3492051    -0.79   0.430     .2324123    1.861954
          2  |   .4591199   .2536578    -1.41   0.159     .1554706    1.355826
          3  |   .6455469   .3401259    -0.83   0.406      .229851    1.813047
          4  |   .5574236    .295951    -1.10   0.271     .1969064    1.578014
          5  |    .375051   .2159301    -1.70   0.088     .1213455    1.159196
             |
  1.shielded |   1.29e-14   1.45e-07    -0.00   1.000            0           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_mh_eth.ster saved
file ./output/tempdata/surv_model2_mh_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.05679         0.21        1         0.6492
      3.eth5      |      0.15476         1.55        1         0.2134
      4.eth5      |     -0.00048         0.00        1         0.9969
      5.eth5      |      0.17156         1.88        1         0.1709
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.25066         3.99        1         0.0459
      2.age_cat   |      0.13108         1.09        1         0.2959
      3.age_cat   |      0.07023         0.32        1         0.5710
      0b.male     |            .            .        1             .
      1.male      |     -0.19397         2.43        1         0.1192
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.06258         0.26        1         0.6098
      0b.imd      |            .            .        1             .
      1.imd       |      0.32997         7.17        1         0.0074
      2.imd       |      0.28712         5.24        1         0.0221
      3.imd       |      0.20585         2.69        1         0.1009
      4.imd       |      0.27024         4.84        1         0.0277
      5.imd       |      0.17860         2.00        1         0.1571
      0b.shielded |            .            .        1             .
      1.shielded  |      0.12613         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     18.04       15         0.2607
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

   mi_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        951       95.10       95.10
          1 |         49        4.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  951
(49 real changes made)

                id:  patient_id
     failure event:  mi_admit != 0 & mi_admit < .
obs. time interval:  (mi_end[_n-1], mi_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         22  observations end on or before enter()
------------------------------------------------------------------------------
        978  observations remaining, representing
        978  subjects
         28  failures in single-failure-per-subject data
  1,986.675  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  mi_admit
   analysis time _t:  (mi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_mi_pan_eth.svg not found)
(file ./output/graphs/km_mi_pan_eth.svg written in SVG format)

         failure _d:  mi_admit
   analysis time _t:  (mi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -191.79342
Iteration 1:   log likelihood = -189.37858
Iteration 2:   log likelihood = -189.35076
Iteration 3:   log likelihood = -189.35073
Refining estimates:
Iteration 0:   log likelihood = -189.35073

Cox regression -- Breslow method for ties

No. of subjects =          978                  Number of obs    =         978
No. of failures =           28
Time at risk    =   1986.67488
                                                LR chi2(4)       =        4.89
Log likelihood  =   -189.35073                  Prob > chi2      =      0.2993

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .6148367   .3429414    -0.87   0.383     .2060533    1.834594
      Black  |    1.02561   .4983598     0.05   0.958     .3957035    2.658241
      Mixed  |   .4005208   .2670144    -1.37   0.170     .1084317    1.479428
      Other  |   .3638647   .2425777    -1.52   0.129     .0985075    1.344035
------------------------------------------------------------------------------
file ./output/tempdata/crude_mi_eth.ster saved
file ./output/tempdata/surv_crude_mi_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.56211         8.86        1         0.0029
      3.eth5      |     -0.34375         3.30        1         0.0692
      4.eth5      |     -0.25493         1.82        1         0.1778
      5.eth5      |     -0.18930         1.00        1         0.3165
      ------------+---------------------------------------------------
      global test |                      9.41        4         0.0517
      ----------------------------------------------------------------

         failure _d:  mi_admit
   analysis time _t:  (mi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -171.1359
Iteration 1:   log likelihood = -163.96954
Iteration 2:   log likelihood = -163.78179
Iteration 3:   log likelihood = -163.78135
Refining estimates:
Iteration 0:   log likelihood = -163.78135

Cox regression -- Breslow method for ties

No. of subjects =          751                  Number of obs    =         751
No. of failures =           26
Time at risk    =  1520.501027
                                                LR chi2(8)       =       14.71
Log likelihood  =   -163.78135                  Prob > chi2      =      0.0651

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .5944862     .34104    -0.91   0.365     .1931219    1.830004
      Black  |   1.004535   .5052644     0.01   0.993     .3748216    2.692188
      Mixed  |   .2561534   .2028566    -1.72   0.085     .0542506    1.209471
      Other  |   .3710211   .2520496    -1.46   0.144     .0979813    1.404928
             |
     age_cat |
41 - 60 y..  |   1.120175   .6472113     0.20   0.844     .3609783    3.476086
61 - 80 y..  |   3.111549   1.580718     2.23   0.025     1.149615    8.421724
  >80 years  |   3.199754   2.274972     1.64   0.102     .7941935     12.8916
             |
        male |
       Male  |   1.346144    .537078     0.75   0.456     .6158614    2.942387
------------------------------------------------------------------------------
file ./output/tempdata/model1_mi_eth.ster saved
file ./output/tempdata/surv_model1_mi_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.59874         9.69        1         0.0019
      3.eth5      |     -0.41143         4.30        1         0.0381
      4.eth5      |     -0.24734         1.61        1         0.2049
      5.eth5      |     -0.23586         1.43        1         0.2310
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.24663         1.56        1         0.2115
      2.age_cat   |      0.10830         0.30        1         0.5846
      3.age_cat   |      0.40337         4.25        1         0.0392
      0b.male     |            .            .        1             .
      1.male      |      0.08663         0.20        1         0.6547
      ------------+---------------------------------------------------
      global test |                     14.47        8         0.0704
      ----------------------------------------------------------------

         failure _d:  mi_admit
   analysis time _t:  (mi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -171.1359
Iteration 1:   log likelihood = -164.18898
Iteration 2:   log likelihood = -160.31029
Iteration 3:   log likelihood = -159.71346
Iteration 4:   log likelihood = -159.64557
Iteration 5:   log likelihood = -159.63491
Iteration 6:   log likelihood = -159.63117
Iteration 7:   log likelihood = -159.62979
Iteration 8:   log likelihood = -159.62929
Iteration 9:   log likelihood =  -159.6291
Iteration 10:  log likelihood = -159.62903
Iteration 11:  log likelihood = -159.62901
Iteration 12:  log likelihood =   -159.629
Iteration 13:  log likelihood = -159.62899
Iteration 14:  log likelihood = -159.62899
Iteration 15:  log likelihood = -159.62899
Iteration 16:  log likelihood = -159.62899
Iteration 17:  log likelihood = -159.62899
Iteration 18:  log likelihood = -159.62899
Iteration 19:  log likelihood = -159.62899
Iteration 20:  log likelihood = -159.62899
Refining estimates:
Iteration 0:   log likelihood = -159.62899

Cox regression -- Breslow method for ties

No. of subjects =          751                  Number of obs    =         751
No. of failures =           26
Time at risk    =  1520.501027
                                                LR chi2(14)      =       23.01
Log likelihood  =   -159.62899                  Prob > chi2      =      0.0600

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .5984717   .3502954    -0.88   0.380     .1900296    1.884803
      Black  |   1.114568   .5677611     0.21   0.831     .4106811    3.024884
      Mixed  |   .2808875   .2240301    -1.59   0.111     .0588344    1.341014
      Other  |   .3521169    .240723    -1.53   0.127     .0922077    1.344642
             |
     age_cat |
41 - 60 y..  |   1.082971   .6266316     0.14   0.890     .3484115    3.366211
61 - 80 y..  |   3.111876   1.592054     2.22   0.026     1.141675    8.482072
  >80 years  |   3.028072   2.226555     1.51   0.132     .7165954    12.79554
             |
        male |
       Male  |   1.235567   .5014426     0.52   0.602     .5577178    2.737272
             |
urban_rura~n |
      Urban  |   .7692584   .3324495    -0.61   0.544     .3297688    1.794465
             |
         imd |
          1  |   2.77e+08          .        .       .            .           .
          2  |   9.42e+08   7.95e+08    24.49   0.000     1.80e+08    4.92e+09
          3  |   6.98e+08   5.86e+08    24.29   0.000     1.35e+08    3.61e+09
          4  |   1.00e+09   8.10e+08    25.60   0.000     2.05e+08    4.89e+09
          5  |   1.00e+09   8.12e+08    25.65   0.000     2.06e+08    4.90e+09
             |
  1.shielded |   3.119648   3.359782     1.06   0.291     .3779055    25.75301
------------------------------------------------------------------------------
file ./output/tempdata/model2_mi_eth.ster saved
file ./output/tempdata/surv_model2_mi_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.58784         9.12        1         0.0025
      3.eth5      |     -0.42030         4.53        1         0.0333
      4.eth5      |     -0.23200         1.47        1         0.2254
      5.eth5      |     -0.22047         1.25        1         0.2639
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.23860         1.46        1         0.2268
      2.age_cat   |      0.11929         0.36        1         0.5473
      3.age_cat   |      0.34070         2.81        1         0.0938
      0b.male     |            .            .        1             .
      1.male      |      0.04912         0.07        1         0.7905
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.23206         1.47        1         0.2251
      0b.imd      |            .            .        1             .
      1.imd       |            .            .        1             .
      2.imd       |     -0.08911         0.20        1         0.6540
      3.imd       |     -0.12862         0.42        1         0.5185
      4.imd       |     -0.13324         0.46        1         0.4971
      5.imd       |     -0.07990         0.17        1         0.6802
      0b.shielded |            .            .        1             .
      1.shielded  |      0.28791         1.68        1         0.1956
      ------------+---------------------------------------------------
      global test |                     17.41       14         0.2351
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

stroke_admi |
          t |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        951       95.10       95.10
          1 |         49        4.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  951
(49 real changes made)

                id:  patient_id
     failure event:  stroke_admit != 0 & stroke_admit < .
obs. time interval:  (stroke_end[_n-1], stroke_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         28  observations end on or before enter()
------------------------------------------------------------------------------
        972  observations remaining, representing
        972  subjects
         22  failures in single-failure-per-subject data
  1,974.593  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  stroke_admit
   analysis time _t:  (stroke_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_stroke_pan_eth.svg not found)
(file ./output/graphs/km_stroke_pan_eth.svg written in SVG format)

         failure _d:  stroke_admit
   analysis time _t:  (stroke_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -150.77566
Iteration 1:   log likelihood = -149.69065
Iteration 2:   log likelihood =  -149.6799
Iteration 3:   log likelihood =  -149.6799
Refining estimates:
Iteration 0:   log likelihood =  -149.6799

Cox regression -- no ties

No. of subjects =          972                  Number of obs    =         972
No. of failures =           22
Time at risk    =  1974.592745
                                                LR chi2(4)       =        2.19
Log likelihood  =    -149.6799                  Prob > chi2      =      0.7006

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.844958    1.34737     0.84   0.402     .4409153    7.720008
      Black  |   2.275987   1.609374     1.16   0.245     .5692152    9.100456
      Mixed  |   2.009676   1.467666     0.96   0.339     .4802793     8.40927
      Other  |   1.126649   .9199067     0.15   0.884      .227397     5.58204
------------------------------------------------------------------------------
file ./output/tempdata/crude_stroke_eth.ster saved
file ./output/tempdata/surv_crude_stroke_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.05877         0.08        1         0.7828
      3.eth5      |     -0.24562         1.32        1         0.2498
      4.eth5      |     -0.07443         0.12        1         0.7271
      5.eth5      |     -0.09180         0.19        1         0.6668
      ------------+---------------------------------------------------
      global test |                      1.80        4         0.7721
      ----------------------------------------------------------------

         failure _d:  stroke_admit
   analysis time _t:  (stroke_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -112.06483
Iteration 1:   log likelihood = -109.32953
Iteration 2:   log likelihood = -108.41356
Iteration 3:   log likelihood = -108.39321
Iteration 4:   log likelihood = -108.39318
Refining estimates:
Iteration 0:   log likelihood = -108.39318

Cox regression -- no ties

No. of subjects =          746                  Number of obs    =         746
No. of failures =           17
Time at risk    =  1511.028063
                                                LR chi2(8)       =        7.34
Log likelihood  =   -108.39318                  Prob > chi2      =      0.5001

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.375603   1.260276     0.35   0.728     .2283779    8.285752
      Black  |   2.443391   2.052089     1.06   0.287     .4710954    12.67293
      Mixed  |   2.549604   2.137315     1.12   0.264     .4930789    13.18345
      Other  |   .9520396   .9545158    -0.05   0.961     .1334257    6.793139
             |
     age_cat |
41 - 60 y..  |   .5614894   .3973154    -0.82   0.415     .1402888    2.247295
61 - 80 y..  |   1.387392   .8411915     0.54   0.589     .4227721    4.552944
  >80 years  |   2.997428   2.129909     1.54   0.122     .7445653    12.06687
             |
        male |
       Male  |   .9170289   .4475335    -0.18   0.859     .3523506    2.386663
------------------------------------------------------------------------------
file ./output/tempdata/model1_stroke_eth.ster saved
file ./output/tempdata/surv_model1_stroke_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.27955         1.32        1         0.2505
      3.eth5      |     -0.25293         1.07        1         0.3003
      4.eth5      |      0.02631         0.01        1         0.9135
      5.eth5      |     -0.16256         0.45        1         0.5038
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.25404         1.11        1         0.2913
      2.age_cat   |      0.26614         1.22        1         0.2685
      3.age_cat   |     -0.11688         0.24        1         0.6230
      0b.male     |            .            .        1             .
      1.male      |      0.35523         2.19        1         0.1391
      ------------+---------------------------------------------------
      global test |                     10.67        8         0.2213
      ----------------------------------------------------------------

         failure _d:  stroke_admit
   analysis time _t:  (stroke_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -112.06483
Iteration 1:   log likelihood = -105.29145
Iteration 2:   log likelihood = -104.39381
Iteration 3:   log likelihood = -104.36528
Iteration 4:   log likelihood = -104.35708
Iteration 5:   log likelihood = -104.35407
Iteration 6:   log likelihood = -104.35296
Iteration 7:   log likelihood = -104.35256
Iteration 8:   log likelihood = -104.35241
Iteration 9:   log likelihood = -104.35235
Iteration 10:  log likelihood = -104.35233
Iteration 11:  log likelihood = -104.35232
Iteration 12:  log likelihood = -104.35232
Iteration 13:  log likelihood = -104.35232
Iteration 14:  log likelihood = -104.35232
Iteration 15:  log likelihood = -104.35232
Iteration 16:  log likelihood = -104.35232
Iteration 17:  log likelihood = -104.35232
Iteration 18:  log likelihood = -104.35232
Iteration 19:  log likelihood = -104.35232
Iteration 20:  log likelihood = -104.35232
Iteration 21:  log likelihood = -104.35232
Iteration 22:  log likelihood = -104.35232
Iteration 23:  log likelihood = -104.35232
Iteration 24:  log likelihood = -104.35232
Iteration 25:  log likelihood = -104.35232
Iteration 26:  log likelihood = -104.35232
Iteration 27:  log likelihood = -104.35232
Iteration 28:  log likelihood = -104.35232
Iteration 29:  log likelihood = -104.35232
Iteration 30:  log likelihood = -104.35232
Iteration 31:  log likelihood = -104.35232
Iteration 32:  log likelihood = -104.35232
Iteration 33:  log likelihood = -104.35232
Refining estimates:
Iteration 0:   log likelihood = -104.35232
Iteration 1:   log likelihood = -104.35232

Cox regression -- no ties

No. of subjects =          746                  Number of obs    =         746
No. of failures =           17
Time at risk    =  1511.028063
                                                LR chi2(15)      =       15.43
Log likelihood  =   -104.35232                  Prob > chi2      =      0.4213

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.149323   1.067668     0.15   0.881     .1860867    7.098539
      Black  |   1.972301   1.682783     0.80   0.426     .3704427    10.50087
      Mixed  |   2.068236   1.754048     0.86   0.392      .392379    10.90171
      Other  |    .926262   .9318503    -0.08   0.939     .1289427    6.653817
             |
     age_cat |
41 - 60 y..  |   .5321586   .3775065    -0.89   0.374     .1324981    2.137335
61 - 80 y..  |   1.316004   .8054881     0.45   0.654     .3965164    4.367704
  >80 years  |    3.50368   2.535292     1.73   0.083     .8483755    14.46974
             |
        male |
       Male  |   .9346458   .4595474    -0.14   0.891     .3565559    2.450003
             |
urban_rura~n |
      Urban  |   1.529005   .7537685     0.86   0.389     .5818137    4.018223
             |
         imd |
          1  |   .1860941   .1457249    -2.15   0.032     .0401034    .8635431
          2  |   .2130341   .1660287    -1.98   0.047     .0462448     .981376
          3  |   .1254362   .1106025    -2.35   0.019     .0222783    .7062589
          4  |   .2099491   .1629248    -2.01   0.044     .0458737    .9608687
          5  |    .148898   .1317434    -2.15   0.031     .0262878    .8433795
             |
  1.shielded |   2.30e-15   1.09e-07    -0.00   1.000            0           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_stroke_eth.ster saved
file ./output/tempdata/surv_model2_stroke_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.25797         1.07        1         0.2999
      3.eth5      |     -0.26070         1.20        1         0.2735
      4.eth5      |      0.05411         0.05        1         0.8218
      5.eth5      |     -0.14485         0.35        1         0.5527
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.26572         1.21        1         0.2714
      2.age_cat   |      0.22813         0.79        1         0.3726
      3.age_cat   |     -0.15844         0.46        1         0.4981
      0b.male     |            .            .        1             .
      1.male      |      0.33711         2.04        1         0.1536
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.01268         0.00        1         0.9583
      0b.imd      |            .            .        1             .
      1.imd       |      0.07160         0.09        1         0.7662
      2.imd       |     -0.07369         0.09        1         0.7591
      3.imd       |      0.56905         5.74        1         0.0165
      4.imd       |     -0.02983         0.02        1         0.8981
      5.imd       |     -0.14413         0.40        1         0.5287
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.07790         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     19.74       15         0.1821
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

   hf_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        951       95.10       95.10
          1 |         49        4.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  951
(49 real changes made)

                id:  patient_id
     failure event:  hf_admit != 0 & hf_admit < .
obs. time interval:  (hf_end[_n-1], hf_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         28  observations end on or before enter()
------------------------------------------------------------------------------
        972  observations remaining, representing
        972  subjects
         22  failures in single-failure-per-subject data
  1,974.527  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  hf_admit
   analysis time _t:  (hf_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_hf_pan_eth.svg not found)
(file ./output/graphs/km_hf_pan_eth.svg written in SVG format)

         failure _d:  hf_admit
   analysis time _t:  (hf_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -150.69864
Iteration 1:   log likelihood = -147.92882
Iteration 2:   log likelihood = -147.63788
Iteration 3:   log likelihood = -147.63206
Iteration 4:   log likelihood = -147.63205
Refining estimates:
Iteration 0:   log likelihood = -147.63205

Cox regression -- no ties

No. of subjects =          972                  Number of obs    =         972
No. of failures =           22
Time at risk    =  1974.527036
                                                LR chi2(4)       =        6.13
Log likelihood  =   -147.63205                  Prob > chi2      =      0.1894

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.144171   .8090544     0.19   0.849     .2861526    4.574924
      Black  |   1.411873   .9471195     0.51   0.607     .3791305    5.257784
      Mixed  |   .2995527   .3349106    -1.08   0.281     .0334811    2.680074
      Other  |   2.262544   1.385528     1.33   0.182      .681305    7.513678
------------------------------------------------------------------------------
file ./output/tempdata/crude_hf_eth.ster saved
file ./output/tempdata/surv_crude_hf_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.08471         0.16        1         0.6910
      3.eth5      |     -0.20735         0.94        1         0.3312
      4.eth5      |      0.04098         0.04        1         0.8476
      5.eth5      |      0.04119         0.04        1         0.8467
      ------------+---------------------------------------------------
      global test |                      2.56        4         0.6348
      ----------------------------------------------------------------

         failure _d:  hf_admit
   analysis time _t:  (hf_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -131.6409
Iteration 1:   log likelihood = -128.53538
Iteration 2:   log likelihood = -128.31833
Iteration 3:   log likelihood = -128.31274
Iteration 4:   log likelihood = -128.31273
Refining estimates:
Iteration 0:   log likelihood = -128.31273

Cox regression -- no ties

No. of subjects =          745                  Number of obs    =         745
No. of failures =           20
Time at risk    =  1508.071184
                                                LR chi2(8)       =        6.66
Log likelihood  =   -128.31273                  Prob > chi2      =      0.5741

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.372905   1.050663     0.41   0.679     .3063577    6.152504
      Black  |   1.724895   1.261889     0.75   0.456     .4111925    7.235691
      Mixed  |   .3488042   .4028464    -0.91   0.362     .0362659    3.354786
      Other  |   2.383037   1.646803     1.26   0.209     .6150437    9.233271
             |
     age_cat |
41 - 60 y..  |   1.602796    .866253     0.87   0.383     .5556931    4.622977
61 - 80 y..  |   1.528904   .9275099     0.70   0.484     .4655844    5.020671
  >80 years  |   .9864971   1.066583    -0.01   0.990     .1185201     8.21107
             |
        male |
       Male  |   1.251478   .5658854     0.50   0.620     .5158607    3.036087
------------------------------------------------------------------------------
file ./output/tempdata/model1_hf_eth.ster saved
file ./output/tempdata/surv_model1_hf_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.02730         0.02        1         0.9019
      3.eth5      |     -0.25108         1.16        1         0.2807
      4.eth5      |      0.00787         0.00        1         0.9719
      5.eth5      |     -0.08013         0.13        1         0.7211
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.21317         0.89        1         0.3461
      2.age_cat   |     -0.22305         0.98        1         0.3217
      3.age_cat   |     -0.16560         0.54        1         0.4638
      0b.male     |            .            .        1             .
      1.male      |     -0.16087         0.48        1         0.4888
      ------------+---------------------------------------------------
      global test |                      4.27        8         0.8317
      ----------------------------------------------------------------

         failure _d:  hf_admit
   analysis time _t:  (hf_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -131.6409
Iteration 1:   log likelihood = -126.81587
Iteration 2:   log likelihood = -126.47165
Iteration 3:   log likelihood = -126.45072
Iteration 4:   log likelihood = -126.44489
Iteration 5:   log likelihood = -126.44275
Iteration 6:   log likelihood = -126.44196
Iteration 7:   log likelihood = -126.44167
Iteration 8:   log likelihood = -126.44157
Iteration 9:   log likelihood = -126.44153
Iteration 10:  log likelihood = -126.44151
Iteration 11:  log likelihood = -126.44151
Iteration 12:  log likelihood = -126.44151
Iteration 13:  log likelihood = -126.44151
Iteration 14:  log likelihood = -126.44151
Iteration 15:  log likelihood = -126.44151
Iteration 16:  log likelihood = -126.44151
Iteration 17:  log likelihood = -126.44151
Iteration 18:  log likelihood = -126.44151
Iteration 19:  log likelihood = -126.44151
Iteration 20:  log likelihood = -126.44151
Iteration 21:  log likelihood = -126.44151
Iteration 22:  log likelihood = -126.44151
Iteration 23:  log likelihood = -126.44151
Iteration 24:  log likelihood = -126.44151
Iteration 25:  log likelihood = -126.44151
Iteration 26:  log likelihood = -126.44151
Iteration 27:  log likelihood = -126.44151
Iteration 28:  log likelihood = -126.44151
Iteration 29:  log likelihood = -126.44151
Iteration 30:  log likelihood = -126.44151
Iteration 31:  log likelihood = -126.44151
Iteration 32:  log likelihood = -126.44151
Iteration 33:  log likelihood = -126.44151
Iteration 34:  log likelihood = -126.44151
Iteration 35:  log likelihood = -126.44151
Iteration 36:  log likelihood = -126.44151
Iteration 37:  log likelihood = -126.44151
Iteration 38:  log likelihood = -126.44151
Refining estimates:
Iteration 0:   log likelihood = -126.44151
Iteration 1:   log likelihood = -126.44151
Iteration 2:   log likelihood = -126.44151

Cox regression -- no ties

No. of subjects =          745                  Number of obs    =         745
No. of failures =           20
Time at risk    =  1508.071184
                                                LR chi2(15)      =       10.40
Log likelihood  =   -126.44151                  Prob > chi2      =      0.7939

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.251076   .9664362     0.29   0.772     .2752609    5.686214
      Black  |   1.724619   1.269186     0.74   0.459     .4076382    7.296451
      Mixed  |   .3207467   .3717913    -0.98   0.327     .0330749    3.110472
      Other  |   2.338879   1.631014     1.22   0.223      .596243    9.174703
             |
     age_cat |
41 - 60 y..  |   1.539296   .8348698     0.80   0.426     .5316859    4.456453
61 - 80 y..  |   1.493848   .9081723     0.66   0.509     .4537593    4.917985
  >80 years  |   1.024264   1.112234     0.02   0.982     .1219282    8.604382
             |
        male |
       Male  |   1.163244   .5328851     0.33   0.741     .4739509    2.855016
             |
urban_rura~n |
      Urban  |   .6413145   .3156652    -0.90   0.367     .2443971    1.682852
             |
         imd |
          1  |   1.047092    1.17705     0.04   0.967     .1156478    9.480521
          2  |   1.386402   1.506264     0.30   0.764     .1648529    11.65955
          3  |   .4354683   .5367095    -0.67   0.500      .038892    4.875873
          4  |   .8832326   .9916811    -0.11   0.912     .0978043     7.97613
          5  |    .717653    .835662    -0.28   0.776     .0732392    7.032106
             |
  1.shielded |   6.23e-18   7.03e-09    -0.00   1.000            0           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_hf_eth.ster saved
file ./output/tempdata/surv_model2_hf_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.00165         0.00        1         0.9939
      3.eth5      |     -0.26969         1.35        1         0.2451
      4.eth5      |      0.00987         0.00        1         0.9646
      5.eth5      |     -0.11071         0.23        1         0.6350
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.18588         0.71        1         0.3993
      2.age_cat   |     -0.21876         0.96        1         0.3283
      3.age_cat   |     -0.13836         0.39        1         0.5321
      0b.male     |            .            .        1             .
      1.male      |     -0.22283         0.87        1         0.3517
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.06028         0.07        1         0.7869
      0b.imd      |            .            .        1             .
      1.imd       |      0.17915         0.63        1         0.4282
      2.imd       |      0.28635         1.61        1         0.2043
      3.imd       |      0.38416         3.05        1         0.0806
      4.imd       |      0.25164         1.32        1         0.2501
      5.imd       |      0.00314         0.00        1         0.9886
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.21996         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     11.99       15         0.6799
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

  vte_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        950       95.00       95.00
          1 |         50        5.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  950
(50 real changes made)

                id:  patient_id
     failure event:  vte_admit != 0 & vte_admit < .
obs. time interval:  (vte_end[_n-1], vte_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         31  observations end on or before enter()
------------------------------------------------------------------------------
        969  observations remaining, representing
        969  subjects
         20  failures in single-failure-per-subject data
   1,973.29  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  vte_admit
   analysis time _t:  (vte_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_vte_pan_eth.svg not found)
(file ./output/graphs/km_vte_pan_eth.svg written in SVG format)

         failure _d:  vte_admit
   analysis time _t:  (vte_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -136.91527
Iteration 1:   log likelihood = -134.86163
Iteration 2:   log likelihood = -134.66006
Iteration 3:   log likelihood =  -134.6526
Iteration 4:   log likelihood = -134.65258
Refining estimates:
Iteration 0:   log likelihood = -134.65258

Cox regression -- no ties

No. of subjects =          969                  Number of obs    =         969
No. of failures =           20
Time at risk    =  1973.289528
                                                LR chi2(4)       =        4.53
Log likelihood  =   -134.65258                  Prob > chi2      =      0.3395

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.143982   .8089198     0.19   0.849     .2861062    4.574159
      Black  |   .2812654   .3144646    -1.13   0.257     .0314371    2.516457
      Mixed  |   1.503443   1.008549     0.61   0.543     .4037182    5.598807
      Other  |   1.684532   1.087363     0.81   0.419     .4753682    5.969369
------------------------------------------------------------------------------
file ./output/tempdata/crude_vte_eth.ster saved
file ./output/tempdata/surv_crude_vte_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.15321         0.47        1         0.4933
      3.eth5      |      0.08464         0.14        1         0.7051
      4.eth5      |     -0.38107         2.89        1         0.0891
      5.eth5      |     -0.22467         1.01        1         0.3155
      ------------+---------------------------------------------------
      global test |                      3.97        4         0.4094
      ----------------------------------------------------------------

         failure _d:  vte_admit
   analysis time _t:  (vte_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -105.32896
Iteration 1:   log likelihood = -102.78008
Iteration 2:   log likelihood = -102.39358
Iteration 3:   log likelihood = -102.31081
Iteration 4:   log likelihood = -102.28086
Iteration 5:   log likelihood = -102.26988
Iteration 6:   log likelihood = -102.26584
Iteration 7:   log likelihood = -102.26436
Iteration 8:   log likelihood = -102.26381
Iteration 9:   log likelihood = -102.26361
Iteration 10:  log likelihood = -102.26353
Iteration 11:  log likelihood = -102.26351
Iteration 12:  log likelihood =  -102.2635
Iteration 13:  log likelihood = -102.26349
Iteration 14:  log likelihood = -102.26349
Iteration 15:  log likelihood = -102.26349
Iteration 16:  log likelihood = -102.26349
Iteration 17:  log likelihood = -102.26349
Iteration 18:  log likelihood = -102.26349
Iteration 19:  log likelihood = -102.26349
Iteration 20:  log likelihood = -102.26349
Iteration 21:  log likelihood = -102.26349
Iteration 22:  log likelihood = -102.26349
Iteration 23:  log likelihood = -102.26349
Iteration 24:  log likelihood = -102.26349
Iteration 25:  log likelihood = -102.26349
Iteration 26:  log likelihood = -102.26349
Iteration 27:  log likelihood = -102.26349
Iteration 28:  log likelihood = -102.26349
Iteration 29:  log likelihood = -102.26349
Iteration 30:  log likelihood = -102.26349
Iteration 31:  log likelihood = -102.26349
Iteration 32:  log likelihood = -102.26349
Refining estimates:
Iteration 0:   log likelihood = -102.26349
Iteration 1:   log likelihood = -102.26349

Cox regression -- no ties

No. of subjects =          745                  Number of obs    =         745
No. of failures =           16
Time at risk    =  1514.784394
                                                LR chi2(8)       =        6.13
Log likelihood  =   -102.26349                  Prob > chi2      =      0.6326

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.031084   .8437798     0.04   0.970     .2073577    5.127059
      Black  |   .3762174   .4347369    -0.85   0.398     .0390693    3.622782
      Mixed  |   1.065766   .8706655     0.08   0.938     .2149228    5.284956
      Other  |    2.06098       1.46     1.02   0.307     .5141404    8.261631
             |
     age_cat |
41 - 60 y..  |   1.003077   .5590009     0.01   0.996     .3364894    2.990178
61 - 80 y..  |   .7600671   .5257601    -0.40   0.692     .1959077    2.948848
  >80 years  |   4.12e-15   6.20e-08    -0.00   1.000            0           .
             |
        male |
       Male  |   .8447204   .4277734    -0.33   0.739     .3130815    2.279127
------------------------------------------------------------------------------
file ./output/tempdata/model1_vte_eth.ster saved
file ./output/tempdata/surv_model1_vte_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.01689         0.00        1         0.9438
      3.eth5      |      0.12674         0.25        1         0.6178
      4.eth5      |     -0.50320         4.06        1         0.0440
      5.eth5      |     -0.13969         0.31        1         0.5749
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.01115         0.00        1         0.9636
      2.age_cat   |      0.30406         1.51        1         0.2189
      3.age_cat   |      0.12621         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |      0.16227         0.45        1         0.5042
      ------------+---------------------------------------------------
      global test |                      8.97        8         0.3448
      ----------------------------------------------------------------

         failure _d:  vte_admit
   analysis time _t:  (vte_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -105.32896
Iteration 1:   log likelihood = -100.47425
Iteration 2:   log likelihood = -97.850815
Iteration 3:   log likelihood = -97.508346
Iteration 4:   log likelihood = -97.428508
Iteration 5:   log likelihood = -97.399819
Iteration 6:   log likelihood = -97.389289
Iteration 7:   log likelihood = -97.385418
Iteration 8:   log likelihood = -97.383995
Iteration 9:   log likelihood = -97.383471
Iteration 10:  log likelihood = -97.383278
Iteration 11:  log likelihood = -97.383208
Iteration 12:  log likelihood = -97.383181
Iteration 13:  log likelihood = -97.383172
Iteration 14:  log likelihood = -97.383168
Iteration 15:  log likelihood = -97.383167
Iteration 16:  log likelihood = -97.383167
Iteration 17:  log likelihood = -97.383166
Iteration 18:  log likelihood = -97.383166
Iteration 19:  log likelihood = -97.383166
Iteration 20:  log likelihood = -97.383166
Iteration 21:  log likelihood = -97.383166
Iteration 22:  log likelihood = -97.383166
Iteration 23:  log likelihood = -97.383166
Iteration 24:  log likelihood = -97.383166
Iteration 25:  log likelihood = -97.383166
Iteration 26:  log likelihood = -97.383166
Iteration 27:  log likelihood = -97.383166
Iteration 28:  log likelihood = -97.383166
Iteration 29:  log likelihood = -97.383166
Iteration 30:  log likelihood = -97.383166
Iteration 31:  log likelihood = -97.383166
Iteration 32:  log likelihood = -97.383166
Iteration 33:  log likelihood = -97.383166
Iteration 34:  log likelihood = -97.383166
Iteration 35:  log likelihood = -97.383166
Iteration 36:  log likelihood = -97.383166
Iteration 37:  log likelihood = -97.383166
Iteration 38:  log likelihood = -97.383166
Iteration 39:  log likelihood = -97.383166
Refining estimates:
Iteration 0:   log likelihood = -97.383166
Iteration 1:   log likelihood = -97.383166
Iteration 2:   log likelihood = -97.383166
Iteration 3:   log likelihood = -97.383166
Iteration 4:   log likelihood = -97.383166
Iteration 5:   log likelihood = -97.383166
Iteration 6:   log likelihood = -97.383166

Cox regression -- no ties

No. of subjects =          745                  Number of obs    =         745
No. of failures =           16
Time at risk    =  1514.784394
                                                LR chi2(13)      =       15.89
Log likelihood  =   -97.383166                  Prob > chi2      =      0.2550

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.261906   1.060723     0.28   0.782     .2429575    6.554259
      Black  |   .4472834   .5228539    -0.69   0.491     .0452446    4.421796
      Mixed  |   1.134095   .9380459     0.15   0.879     .2241784    5.737268
      Other  |   2.624586   1.919553     1.32   0.187     .6259135    11.00544
             |
     age_cat |
41 - 60 y..  |   1.013603   .5701913     0.02   0.981     .3365377    3.052826
61 - 80 y..  |   .7503426   .5200137    -0.41   0.679     .1929066    2.918583
  >80 years  |   4.27e-20          .        .       .            .           .
             |
        male |
       Male  |   .9043856   .4642953    -0.20   0.845     .3306451     2.47369
             |
urban_rura~n |
      Urban  |   2.608577   1.362783     1.84   0.066     .9369485    7.262591
             |
         imd |
          1  |   1.82e+09   1.55e+09    25.13   0.000     3.45e+08    9.61e+09
          2  |   9.29e+08   8.54e+08    22.46   0.000     1.53e+08    5.63e+09
          3  |   9.68e+08   8.90e+08    22.51   0.000     1.60e+08    5.86e+09
          4  |   5.74e+08          .        .       .            .           .
          5  |   1.02e+09   9.37e+08    22.64   0.000     1.70e+08    6.16e+09
             |
  1.shielded |   6.191524    6.94003     1.63   0.104     .6881647    55.70609
------------------------------------------------------------------------------
file ./output/tempdata/model2_vte_eth.ster saved
file ./output/tempdata/surv_model2_vte_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.08330         0.10        1         0.7558
      3.eth5      |      0.15094         0.34        1         0.5621
      4.eth5      |     -0.52842         4.62        1         0.0317
      5.eth5      |     -0.08165         0.10        1         0.7542
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.03433         0.02        1         0.8903
      2.age_cat   |      0.33506         1.77        1         0.1828
      3.age_cat   |            .            .        1             .
      0b.male     |            .            .        1             .
      1.male      |      0.26250         1.13        1         0.2877
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.01286         0.00        1         0.9561
      0b.imd      |            .            .        1             .
      1.imd       |      0.36480         2.21        1         0.1369
      2.imd       |      0.13054         0.24        1         0.6209
      3.imd       |      0.29909         1.34        1         0.2465
      4.imd       |            .            .        1             .
      5.imd       |      0.34542         1.84        1         0.1747
      0b.shielded |            .            .        1             .
      1.shielded  |      0.15120         0.50        1         0.4798
      ------------+---------------------------------------------------
      global test |                     13.53       13         0.4079
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

 t1dm_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        951       95.10       95.10
          1 |         49        4.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  951
(49 real changes made)

                id:  patient_id
     failure event:  t1dm_admit != 0 & t1dm_admit < .
obs. time interval:  (t1dm_end[_n-1], t1dm_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         20  observations end on or before enter()
------------------------------------------------------------------------------
        980  observations remaining, representing
        980  subjects
         30  failures in single-failure-per-subject data
  1,987.272  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  t1dm_admit
   analysis time _t:  (t1dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_t1dm_pan_eth.svg not found)
(file ./output/graphs/km_t1dm_pan_eth.svg written in SVG format)

         failure _d:  t1dm_admit
   analysis time _t:  (t1dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -205.57749
Iteration 1:   log likelihood = -203.18305
Iteration 2:   log likelihood = -203.13369
Iteration 3:   log likelihood =  -203.1336
Refining estimates:
Iteration 0:   log likelihood =  -203.1336

Cox regression -- no ties

No. of subjects =          980                  Number of obs    =         980
No. of failures =           30
Time at risk    =  1987.271732
                                                LR chi2(4)       =        4.89
Log likelihood  =    -203.1336                  Prob > chi2      =      0.2990

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .8603776   .4335922    -0.30   0.765     .3204212    2.310239
      Black  |   1.004094    .487906     0.01   0.993     .3874014     2.60248
      Mixed  |   .4038723   .2692492    -1.36   0.174     .1093388    1.491811
      Other  |   .3627134   .2418107    -1.52   0.128     .0981956    1.339786
------------------------------------------------------------------------------
file ./output/tempdata/crude_t1dm_eth.ster saved
file ./output/tempdata/surv_crude_t1dm_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.03747         0.04        1         0.8375
      3.eth5      |      0.21850         1.43        1         0.2315
      4.eth5      |      0.14224         0.61        1         0.4363
      5.eth5      |      0.30816         2.84        1         0.0917
      ------------+---------------------------------------------------
      global test |                      4.76        4         0.3125
      ----------------------------------------------------------------

         failure _d:  t1dm_admit
   analysis time _t:  (t1dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -131.6881
Iteration 1:   log likelihood =  -128.1057
Iteration 2:   log likelihood = -127.96608
Iteration 3:   log likelihood =   -127.966
Refining estimates:
Iteration 0:   log likelihood =   -127.966

Cox regression -- no ties

No. of subjects =          750                  Number of obs    =         750
No. of failures =           20
Time at risk    =  1526.015058
                                                LR chi2(8)       =        7.44
Log likelihood  =     -127.966                  Prob > chi2      =      0.4896

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .7613199   .5124247    -0.41   0.685      .203538    2.847665
      Black  |   1.461684   .8599799     0.65   0.519     .4613706    4.630809
      Mixed  |   .4217379   .3531536    -1.03   0.303     .0817083    2.176803
      Other  |   .3958956   .3318015    -1.11   0.269     .0765924     2.04633
             |
     age_cat |
41 - 60 y..  |   1.391047   .8431884     0.54   0.586     .4240168    4.563529
61 - 80 y..  |    2.32448   1.362811     1.44   0.150     .7366783    7.334553
  >80 years  |   2.466211   2.070799     1.08   0.282     .4756672    12.78666
             |
        male |
       Male  |   .9916504    .446539    -0.02   0.985     .4102641    2.396921
------------------------------------------------------------------------------
file ./output/tempdata/model1_t1dm_eth.ster saved
file ./output/tempdata/surv_model1_t1dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.13097         0.34        1         0.5624
      3.eth5      |      0.17204         0.57        1         0.4488
      4.eth5      |      0.23517         1.11        1         0.2931
      5.eth5      |      0.42236         3.55        1         0.0597
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.35980         2.60        1         0.1068
      2.age_cat   |     -0.21841         0.96        1         0.3271
      3.age_cat   |     -0.10687         0.22        1         0.6390
      0b.male     |            .            .        1             .
      1.male      |     -0.31790         2.03        1         0.1543
      ------------+---------------------------------------------------
      global test |                     10.97        8         0.2037
      ----------------------------------------------------------------

         failure _d:  t1dm_admit
   analysis time _t:  (t1dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -131.6881
Iteration 1:   log likelihood = -123.99479
Iteration 2:   log likelihood = -123.36056
Iteration 3:   log likelihood = -123.27103
Iteration 4:   log likelihood = -123.23858
Iteration 5:   log likelihood = -123.22667
Iteration 6:   log likelihood =  -123.2223
Iteration 7:   log likelihood = -123.22069
Iteration 8:   log likelihood =  -123.2201
Iteration 9:   log likelihood = -123.21988
Iteration 10:  log likelihood =  -123.2198
Iteration 11:  log likelihood = -123.21977
Iteration 12:  log likelihood = -123.21976
Iteration 13:  log likelihood = -123.21975
Iteration 14:  log likelihood = -123.21975
Iteration 15:  log likelihood = -123.21975
Iteration 16:  log likelihood = -123.21975
Iteration 17:  log likelihood = -123.21975
Iteration 18:  log likelihood = -123.21975
Iteration 19:  log likelihood = -123.21975
Iteration 20:  log likelihood = -123.21975
Iteration 21:  log likelihood = -123.21975
Iteration 22:  log likelihood = -123.21975
Iteration 23:  log likelihood = -123.21975
Iteration 24:  log likelihood = -123.21975
Iteration 25:  log likelihood = -123.21975
Iteration 26:  log likelihood = -123.21975
Iteration 27:  log likelihood = -123.21975
Iteration 28:  log likelihood = -123.21975
Iteration 29:  log likelihood = -123.21975
Iteration 30:  log likelihood = -123.21975
Iteration 31:  log likelihood = -123.21975
Refining estimates:
Iteration 0:   log likelihood = -123.21975
Iteration 1:   log likelihood = -123.21975
Iteration 2:   log likelihood = -123.21975
Iteration 3:   log likelihood = -123.21975

Cox regression -- no ties

No. of subjects =          750                  Number of obs    =         750
No. of failures =           20
Time at risk    =  1526.015058
                                                LR chi2(14)      =       16.94
Log likelihood  =   -123.21975                  Prob > chi2      =      0.2596

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .5998528   .4108153    -0.75   0.456     .1567078    2.296142
      Black  |   1.409513   .8353221     0.58   0.562     .4411841    4.503168
      Mixed  |    .388911   .3279336    -1.12   0.263     .0744918    2.030448
      Other  |   .3388874   .2849581    -1.29   0.198     .0652095    1.761164
             |
     age_cat |
41 - 60 y..  |   1.377165   .8354011     0.53   0.598     .4194101    4.522023
61 - 80 y..  |   2.622234   1.548241     1.63   0.103     .8243243    8.341514
  >80 years  |   2.815017   2.376042     1.23   0.220       .53829    14.72128
             |
        male |
       Male  |   .9188421   .4209411    -0.18   0.853     .3743582    2.255249
             |
urban_rura~n |
      Urban  |   1.293651   .5891536     0.57   0.572     .5298631    3.158426
             |
         imd |
          1  |   4.79e+08   4.41e+08    21.74   0.000     7.91e+07    2.91e+09
          2  |   1.66e+09   1.33e+09    26.54   0.000     3.46e+08    7.96e+09
          3  |   4.70e+08   4.32e+08    21.73   0.000     7.76e+07    2.85e+09
          4  |   6.51e+08   5.68e+08    23.28   0.000     1.18e+08    3.60e+09
          5  |   3.58e+08          .        .       .            .           .
             |
  1.shielded |   1.85e-15   1.00e-07    -0.00   1.000            0           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_t1dm_eth.ster saved
file ./output/tempdata/surv_model2_t1dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.15651         0.51        1         0.4731
      3.eth5      |      0.16490         0.47        1         0.4908
      4.eth5      |      0.21626         1.01        1         0.3147
      5.eth5      |      0.43239         3.83        1         0.0503
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.36401         2.53        1         0.1115
      2.age_cat   |     -0.17710         0.67        1         0.4139
      3.age_cat   |     -0.08540         0.14        1         0.7114
      0b.male     |            .            .        1             .
      1.male      |     -0.29815         1.72        1         0.1892
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.47569         4.97        1         0.0258
      0b.imd      |            .            .        1             .
      1.imd       |      0.18055         0.65        1         0.4195
      2.imd       |      0.04004         0.03        1         0.8594
      3.imd       |     -0.08875         0.15        1         0.6940
      4.imd       |      0.14364         0.43        1         0.5121
      5.imd       |            .            .        1             .
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.10480         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     18.54       14         0.1833
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

 t2dm_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        952       95.20       95.20
          1 |         48        4.80      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  952
(48 real changes made)

                id:  patient_id
     failure event:  t2dm_admit != 0 & t2dm_admit < .
obs. time interval:  (t2dm_end[_n-1], t2dm_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         25  observations end on or before enter()
------------------------------------------------------------------------------
        975  observations remaining, representing
        975  subjects
         24  failures in single-failure-per-subject data
  1,983.537  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  t2dm_admit
   analysis time _t:  (t2dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_t2dm_pan_eth.svg not found)
(file ./output/graphs/km_t2dm_pan_eth.svg written in SVG format)

         failure _d:  t2dm_admit
   analysis time _t:  (t2dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -164.40875
Iteration 1:   log likelihood = -163.44206
Iteration 2:   log likelihood = -163.41804
Iteration 3:   log likelihood = -163.41799
Refining estimates:
Iteration 0:   log likelihood = -163.41799

Cox regression -- Breslow method for ties

No. of subjects =          975                  Number of obs    =         975
No. of failures =           24
Time at risk    =  1983.537303
                                                LR chi2(4)       =        1.98
Log likelihood  =   -163.41799                  Prob > chi2      =      0.7392

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.298656   1.625402     1.18   0.239     .5748852    9.191086
      Black  |   1.900484    1.38793     0.88   0.379     .4541811    7.952423
      Mixed  |   1.661662    1.26912     0.66   0.506     .3718986    7.424393
      Other  |   2.303827   1.629057     1.18   0.238     .5761792    9.211751
------------------------------------------------------------------------------
file ./output/tempdata/crude_t2dm_eth.ster saved
file ./output/tempdata/surv_crude_t2dm_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.10680         0.27        1         0.6013
      3.eth5      |      0.03643         0.03        1         0.8585
      4.eth5      |     -0.00742         0.00        1         0.9710
      5.eth5      |     -0.25256         1.53        1         0.2166
      ------------+---------------------------------------------------
      global test |                      3.49        4         0.4790
      ----------------------------------------------------------------

         failure _d:  t2dm_admit
   analysis time _t:  (t2dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -144.75024
Iteration 1:   log likelihood = -138.19537
Iteration 2:   log likelihood = -137.81465
Iteration 3:   log likelihood = -137.71836
Iteration 4:   log likelihood = -137.68334
Iteration 5:   log likelihood = -137.67049
Iteration 6:   log likelihood = -137.66576
Iteration 7:   log likelihood = -137.66403
Iteration 8:   log likelihood = -137.66339
Iteration 9:   log likelihood = -137.66315
Iteration 10:  log likelihood = -137.66307
Iteration 11:  log likelihood = -137.66303
Iteration 12:  log likelihood = -137.66302
Iteration 13:  log likelihood = -137.66302
Iteration 14:  log likelihood = -137.66302
Iteration 15:  log likelihood = -137.66302
Iteration 16:  log likelihood = -137.66302
Iteration 17:  log likelihood = -137.66302
Iteration 18:  log likelihood = -137.66302
Iteration 19:  log likelihood = -137.66302
Iteration 20:  log likelihood = -137.66302
Iteration 21:  log likelihood = -137.66302
Iteration 22:  log likelihood = -137.66302
Iteration 23:  log likelihood = -137.66302
Iteration 24:  log likelihood = -137.66302
Iteration 25:  log likelihood = -137.66302
Iteration 26:  log likelihood = -137.66302
Iteration 27:  log likelihood = -137.66302
Iteration 28:  log likelihood = -137.66302
Iteration 29:  log likelihood = -137.66302
Iteration 30:  log likelihood = -137.66302
Iteration 31:  log likelihood = -137.66302
Iteration 32:  log likelihood = -137.66302
Refining estimates:
Iteration 0:   log likelihood = -137.66302
Iteration 1:   log likelihood = -137.66302

Cox regression -- Breslow method for ties

No. of subjects =          746                  Number of obs    =         746
No. of failures =           22
Time at risk    =  1511.392197
                                                LR chi2(8)       =       14.17
Log likelihood  =   -137.66302                  Prob > chi2      =      0.0773

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.174889   1.541547     1.10   0.273     .5421398    8.724951
      Black  |   1.389366   1.063003     0.43   0.667      .310144     6.22401
      Mixed  |   1.132469   .9251474     0.15   0.879     .2283782    5.615623
      Other  |   2.216744   1.569437     1.12   0.261     .5534412    8.878907
             |
     age_cat |
41 - 60 y..  |   4.665547   3.013695     2.38   0.017     1.315442    16.54754
61 - 80 y..  |   4.251446   2.938124     2.09   0.036     1.097189    16.47373
  >80 years  |   1.04e-14   1.44e-07    -0.00   1.000            0           .
             |
        male |
       Male  |   1.638436   .7193799     1.12   0.261     .6929415    3.874024
------------------------------------------------------------------------------
file ./output/tempdata/model1_t2dm_eth.ster saved
file ./output/tempdata/surv_model1_t2dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.10565         0.25        1         0.6144
      3.eth5      |      0.03127         0.02        1         0.8858
      4.eth5      |     -0.08089         0.14        1         0.7051
      5.eth5      |     -0.26585         1.51        1         0.2192
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.03926         0.03        1         0.8536
      2.age_cat   |      0.01458         0.00        1         0.9456
      3.age_cat   |      0.04585         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |      0.01310         0.00        1         0.9502
      ------------+---------------------------------------------------
      global test |                      2.90        8         0.9406
      ----------------------------------------------------------------

         failure _d:  t2dm_admit
   analysis time _t:  (t2dm_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -144.75024
Iteration 1:   log likelihood = -139.87253
Iteration 2:   log likelihood = -135.18889
Iteration 3:   log likelihood = -134.62266
Iteration 4:   log likelihood = -134.55626
Iteration 5:   log likelihood = -134.54421
Iteration 6:   log likelihood = -134.53992
Iteration 7:   log likelihood = -134.53834
Iteration 8:   log likelihood = -134.53776
Iteration 9:   log likelihood = -134.53754
Iteration 10:  log likelihood = -134.53746
Iteration 11:  log likelihood = -134.53743
Iteration 12:  log likelihood = -134.53742
Iteration 13:  log likelihood = -134.53742
Iteration 14:  log likelihood = -134.53742
Iteration 15:  log likelihood = -134.53742
Iteration 16:  log likelihood = -134.53742
Iteration 17:  log likelihood = -134.53742
Iteration 18:  log likelihood = -134.53742
Iteration 19:  log likelihood = -134.53742
Iteration 20:  log likelihood = -134.53742
Iteration 21:  log likelihood = -134.53742
Iteration 22:  log likelihood = -134.53742
Iteration 23:  log likelihood = -134.53742
Iteration 24:  log likelihood = -134.53742
Iteration 25:  log likelihood = -134.53742
Iteration 26:  log likelihood = -134.53742
Iteration 27:  log likelihood = -134.53742
Iteration 28:  log likelihood = -134.53742
Iteration 29:  log likelihood = -134.53742
Iteration 30:  log likelihood = -134.53742
Iteration 31:  log likelihood = -134.53742
Iteration 32:  log likelihood = -134.53742
Iteration 33:  log likelihood = -134.53742
Refining estimates:
Iteration 0:   log likelihood = -134.53742
Iteration 1:   log likelihood = -134.53742

Cox regression -- Breslow method for ties

No. of subjects =          746                  Number of obs    =         746
No. of failures =           22
Time at risk    =  1511.392197
                                                LR chi2(15)      =       20.43
Log likelihood  =   -134.53742                  Prob > chi2      =      0.1562

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |    1.89609   1.356383     0.89   0.371     .4666001    7.705005
      Black  |    1.25583   .9775806     0.29   0.770     .2731032    5.774773
      Mixed  |   .8418177   .7054408    -0.21   0.837     .1628972    4.350333
      Other  |   2.080124   1.493312     1.02   0.308     .5093489    8.494996
             |
     age_cat |
41 - 60 y..  |   4.569278    2.96797     2.34   0.019     1.279235    16.32092
61 - 80 y..  |   4.276079    2.97232     2.09   0.037     1.094894    16.70011
  >80 years  |   3.83e-15   9.21e-08    -0.00   1.000            0           .
             |
        male |
       Male  |   1.601606   .7140623     1.06   0.291     .6684279    3.837573
             |
urban_rura~n |
      Urban  |   1.353745   .5871759     0.70   0.485     .5785424     3.16766
             |
         imd |
          1  |   .3618917   .2809411    -1.31   0.190     .0790278    1.657208
          2  |   .4241398   .3129786    -1.16   0.245     .0998609    1.801451
          3  |   .2631184   .2188022    -1.61   0.108     .0515602    1.342726
          4  |   .3340485   .2487223    -1.47   0.141     .0776303    1.437435
          5  |   .1880161   .1734154    -1.81   0.070     .0308386    1.146292
             |
  1.shielded |   7.316293    7.80928     1.86   0.062     .9030957    59.27184
------------------------------------------------------------------------------
file ./output/tempdata/model2_t2dm_eth.ster saved
file ./output/tempdata/surv_model2_t2dm_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.10006         0.21        1         0.6430
      3.eth5      |      0.04880         0.05        1         0.8268
      4.eth5      |     -0.00467         0.00        1         0.9835
      5.eth5      |     -0.27175         1.41        1         0.2347
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.06688         0.10        1         0.7529
      2.age_cat   |     -0.00722         0.00        1         0.9728
      3.age_cat   |      0.03604         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |      0.00712         0.00        1         0.9726
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.44066         4.23        1         0.0397
      0b.imd      |            .            .        1             .
      1.imd       |     -0.06611         0.10        1         0.7516
      2.imd       |      0.00483         0.00        1         0.9816
      3.imd       |      0.22771         1.16        1         0.2809
      4.imd       |      0.19703         0.97        1         0.3258
      5.imd       |     -0.13079         0.40        1         0.5292
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.15806         0.52        1         0.4706
      ------------+---------------------------------------------------
      global test |                     12.43       15         0.6464
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

dm_keto_adm |
         it |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        952       95.20       95.20
          1 |         48        4.80      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  952
(48 real changes made)

                id:  patient_id
     failure event:  dm_keto_admit != 0 & dm_keto_admit < .
obs. time interval:  (dm_keto_end[_n-1], dm_keto_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         27  observations end on or before enter()
------------------------------------------------------------------------------
        973  observations remaining, representing
        973  subjects
         22  failures in single-failure-per-subject data
  1,985.177  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  dm_keto_admit
   analysis time _t:  (dm_keto_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_dm_keto_pan_eth.svg not found)
(file ./output/graphs/km_dm_keto_pan_eth.svg written in SVG format)

         failure _d:  dm_keto_admit
   analysis time _t:  (dm_keto_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -150.72097
Iteration 1:   log likelihood = -149.71012
Iteration 2:   log likelihood =  -149.6984
Iteration 3:   log likelihood =  -149.6984
Refining estimates:
Iteration 0:   log likelihood =  -149.6984

Cox regression -- no ties

No. of subjects =          973                  Number of obs    =         973
No. of failures =           22
Time at risk    =  1985.177276
                                                LR chi2(4)       =        2.05
Log likelihood  =    -149.6984                  Prob > chi2      =      0.7275

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .4746343   .3275305    -1.08   0.280     .1227358    1.835469
      Black  |   .6401808   .4012555    -0.71   0.477     .1874057    2.186868
      Mixed  |    .814618   .4769947    -0.35   0.726     .2585461     2.56667
      Other  |   .4608829    .318041    -1.12   0.262     .1191798     1.78229
------------------------------------------------------------------------------
file ./output/tempdata/crude_dm_keto_eth.ster saved
file ./output/tempdata/surv_crude_dm_keto_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.22081         1.07        1         0.3005
      3.eth5      |     -0.16122         0.57        1         0.4501
      4.eth5      |      0.20994         0.97        1         0.3251
      5.eth5      |      0.27724         1.69        1         0.1939
      ------------+---------------------------------------------------
      global test |                      6.39        4         0.1717
      ----------------------------------------------------------------

         failure _d:  dm_keto_admit
   analysis time _t:  (dm_keto_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -111.86612
Iteration 1:   log likelihood = -109.51124
Iteration 2:   log likelihood = -109.44693
Iteration 3:   log likelihood = -109.44673
Refining estimates:
Iteration 0:   log likelihood = -109.44673

Cox regression -- no ties

No. of subjects =          742                  Number of obs    =         742
No. of failures =           17
Time at risk    =  1512.542094
                                                LR chi2(8)       =        4.84
Log likelihood  =   -109.44673                  Prob > chi2      =      0.7747

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .5596603   .4106362    -0.79   0.429     .1328549    2.357608
      Black  |   .7881403   .5301556    -0.35   0.723     .2108768    2.945631
      Mixed  |   .5825648   .4259791    -0.74   0.460     .1389743    2.442048
      Other  |   .3708612    .310907    -1.18   0.237     .0717161    1.917811
             |
     age_cat |
41 - 60 y..  |    2.27935   1.396817     1.34   0.179     .6857775    7.575981
61 - 80 y..  |   1.275197   .9750148     0.32   0.751     .2849371    5.706969
  >80 years  |   3.319256   2.881457     1.38   0.167     .6054944    18.19581
             |
        male |
       Male  |   1.186766   .5798554     0.35   0.726     .4554778     3.09217
------------------------------------------------------------------------------
file ./output/tempdata/model1_dm_keto_eth.ster saved
file ./output/tempdata/surv_model1_dm_keto_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.42911         3.03        1         0.0816
      3.eth5      |     -0.35792         2.21        1         0.1372
      4.eth5      |     -0.12050         0.24        1         0.6260
      5.eth5      |      0.08525         0.12        1         0.7275
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.35417         2.18        1         0.1402
      2.age_cat   |      0.28587         1.41        1         0.2355
      3.age_cat   |      0.06967         0.08        1         0.7720
      0b.male     |            .            .        1             .
      1.male      |     -0.01932         0.01        1         0.9361
      ------------+---------------------------------------------------
      global test |                      8.08        8         0.4255
      ----------------------------------------------------------------

         failure _d:  dm_keto_admit
   analysis time _t:  (dm_keto_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -111.86612
Iteration 1:   log likelihood = -108.39069
Iteration 2:   log likelihood = -108.26223
Iteration 3:   log likelihood = -108.24953
Iteration 4:   log likelihood = -108.24496
Iteration 5:   log likelihood = -108.24328
Iteration 6:   log likelihood = -108.24266
Iteration 7:   log likelihood = -108.24244
Iteration 8:   log likelihood = -108.24235
Iteration 9:   log likelihood = -108.24232
Iteration 10:  log likelihood = -108.24231
Iteration 11:  log likelihood = -108.24231
Iteration 12:  log likelihood = -108.24231
Iteration 13:  log likelihood = -108.24231
Iteration 14:  log likelihood =  -108.2423
Iteration 15:  log likelihood =  -108.2423
Iteration 16:  log likelihood =  -108.2423
Iteration 17:  log likelihood =  -108.2423
Iteration 18:  log likelihood =  -108.2423
Iteration 19:  log likelihood =  -108.2423
Iteration 20:  log likelihood =  -108.2423
Iteration 21:  log likelihood =  -108.2423
Iteration 22:  log likelihood =  -108.2423
Iteration 23:  log likelihood =  -108.2423
Iteration 24:  log likelihood =  -108.2423
Iteration 25:  log likelihood =  -108.2423
Iteration 26:  log likelihood =  -108.2423
Iteration 27:  log likelihood =  -108.2423
Iteration 28:  log likelihood =  -108.2423
Iteration 29:  log likelihood =  -108.2423
Iteration 30:  log likelihood =  -108.2423
Iteration 31:  log likelihood =  -108.2423
Iteration 32:  log likelihood =  -108.2423
Iteration 33:  log likelihood =  -108.2423
Iteration 34:  log likelihood =  -108.2423
Iteration 35:  log likelihood =  -108.2423
Iteration 36:  log likelihood =  -108.2423
Iteration 37:  log likelihood =  -108.2423
Iteration 38:  log likelihood =  -108.2423
Iteration 39:  log likelihood =  -108.2423
Iteration 40:  log likelihood =  -108.2423
Iteration 41:  log likelihood =  -108.2423
Iteration 42:  log likelihood =  -108.2423
Refining estimates:
Iteration 0:   log likelihood =  -108.2423

Cox regression -- no ties

No. of subjects =          742                  Number of obs    =         742
No. of failures =           17
Time at risk    =  1512.542094
                                                LR chi2(14)      =        7.25
Log likelihood  =    -108.2423                  Prob > chi2      =      0.9247

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .5156294   .3817059    -0.89   0.371     .1208418     2.20018
      Black  |   .7567136   .5122726    -0.41   0.680     .2007675    2.852132
      Mixed  |   .5518476    .407941    -0.80   0.421     .1295947    2.349908
      Other  |   .3391879   .2853512    -1.29   0.199     .0652144    1.764157
             |
     age_cat |
41 - 60 y..  |   2.195979   1.347215     1.28   0.200     .6598159    7.308587
61 - 80 y..  |   1.292914   .9937173     0.33   0.738     .2866464    5.831663
  >80 years  |   3.596406   3.126291     1.47   0.141     .6545373    19.76073
             |
        male |
       Male  |   1.146153   .5635102     0.28   0.781     .4372666     3.00427
             |
urban_rura~n |
      Urban  |   1.055631   .5296642     0.11   0.914     .3948397    2.822303
             |
         imd |
          1  |   .4972324   .6124589    -0.57   0.571     .0444738    5.559232
          2  |   1.040892   1.171736     0.04   0.972     .1146055    9.453795
          3  |   .4761506   .5882297    -0.60   0.548     .0422846     5.36175
          4  |   1.159118   1.281494     0.13   0.894     .1327573    10.12037
          5  |   .7215347   .8413305    -0.28   0.780      .073406    7.092233
             |
  1.shielded |   6.40e-19          .        .       .            .           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_dm_keto_eth.ster saved
file ./output/tempdata/surv_model2_dm_keto_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.46214         3.64        1         0.0564
      3.eth5      |     -0.35133         2.15        1         0.1428
      4.eth5      |     -0.10975         0.22        1         0.6398
      5.eth5      |      0.04746         0.04        1         0.8486
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.33999         2.02        1         0.1551
      2.age_cat   |      0.31014         1.77        1         0.1838
      3.age_cat   |      0.08169         0.11        1         0.7381
      0b.male     |            .            .        1             .
      1.male      |     -0.04780         0.04        1         0.8342
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.16724         0.54        1         0.4620
      0b.imd      |            .            .        1             .
      1.imd       |      0.02344         0.01        1         0.9211
      2.imd       |      0.41931         3.21        1         0.0731
      3.imd       |      0.11769         0.25        1         0.6204
      4.imd       |      0.30351         1.52        1         0.2171
      5.imd       |      0.15062         0.40        1         0.5245
      0b.shielded |            .            .        1             .
      1.shielded  |            .            .        1             .
      ------------+---------------------------------------------------
      global test |                     16.28       14         0.2967
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

asthma_admi |
          t |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        952       95.20       95.20
          1 |         48        4.80      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  952
(48 real changes made)

                id:  patient_id
     failure event:  asthma_admit != 0 & asthma_admit < .
obs. time interval:  (asthma_end[_n-1], asthma_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         21  observations end on or before enter()
------------------------------------------------------------------------------
        979  observations remaining, representing
        979  subjects
         28  failures in single-failure-per-subject data
  1,984.589  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  asthma_admit
   analysis time _t:  (asthma_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_asthma_pan_eth.svg not found)
(file ./output/graphs/km_asthma_pan_eth.svg written in SVG format)

         failure _d:  asthma_admit
   analysis time _t:  (asthma_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -191.91965
Iteration 1:   log likelihood = -186.43978
Iteration 2:   log likelihood = -185.23335
Iteration 3:   log likelihood = -184.82825
Iteration 4:   log likelihood = -184.68245
Iteration 5:   log likelihood = -184.62922
Iteration 6:   log likelihood =  -184.6097
Iteration 7:   log likelihood = -184.60252
Iteration 8:   log likelihood = -184.59988
Iteration 9:   log likelihood = -184.59891
Iteration 10:  log likelihood = -184.59856
Iteration 11:  log likelihood = -184.59842
Iteration 12:  log likelihood = -184.59838
Iteration 13:  log likelihood = -184.59836
Iteration 14:  log likelihood = -184.59835
Iteration 15:  log likelihood = -184.59835
Iteration 16:  log likelihood = -184.59835
Iteration 17:  log likelihood = -184.59835
Iteration 18:  log likelihood = -184.59835
Iteration 19:  log likelihood = -184.59835
Iteration 20:  log likelihood = -184.59835
Iteration 21:  log likelihood = -184.59835
Iteration 22:  log likelihood = -184.59835
Iteration 23:  log likelihood = -184.59835
Iteration 24:  log likelihood = -184.59835
Iteration 25:  log likelihood = -184.59835
Iteration 26:  log likelihood = -184.59835
Iteration 27:  log likelihood = -184.59835
Iteration 28:  log likelihood = -184.59835
Iteration 29:  log likelihood = -184.59835
Iteration 30:  log likelihood = -184.59835
Iteration 31:  log likelihood = -184.59835
Iteration 32:  log likelihood = -184.59835
Refining estimates:
Iteration 0:   log likelihood = -184.59835
Iteration 1:   log likelihood = -184.59835

Cox regression -- no ties

No. of subjects =          979                  Number of obs    =         979
No. of failures =           28
Time at risk    =  1984.588638
                                                LR chi2(4)       =       14.64
Log likelihood  =   -184.59835                  Prob > chi2      =      0.0055

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .8876062    .421031    -0.25   0.802     .3503141    2.248966
      Black  |   2.38e-15   1.63e-08    -0.00   1.000            0           .
      Mixed  |   .7167962   .3701534    -0.64   0.519     .2605166    1.972223
      Other  |   .4383234   .2593175    -1.39   0.163     .1374717    1.397578
------------------------------------------------------------------------------
file ./output/tempdata/crude_asthma_eth.ster saved
file ./output/tempdata/surv_crude_asthma_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.33699         3.18        1         0.0745
      3.eth5      |     -0.33360         0.00        1         1.0000
      4.eth5      |     -0.31172         2.72        1         0.0993
      5.eth5      |     -0.04750         0.06        1         0.8016
      ------------+---------------------------------------------------
      global test |                      4.61        4         0.3300
      ----------------------------------------------------------------

         failure _d:  asthma_admit
   analysis time _t:  (asthma_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -118.48398
Iteration 1:   log likelihood = -113.15874
Iteration 2:   log likelihood = -112.26695
Iteration 3:   log likelihood = -112.04486
Iteration 4:   log likelihood = -111.96507
Iteration 5:   log likelihood =  -111.9359
Iteration 6:   log likelihood =  -111.9252
Iteration 7:   log likelihood = -111.92126
Iteration 8:   log likelihood = -111.91982
Iteration 9:   log likelihood = -111.91929
Iteration 10:  log likelihood = -111.91909
Iteration 11:  log likelihood = -111.91902
Iteration 12:  log likelihood = -111.91899
Iteration 13:  log likelihood = -111.91898
Iteration 14:  log likelihood = -111.91898
Iteration 15:  log likelihood = -111.91898
Iteration 16:  log likelihood = -111.91898
Iteration 17:  log likelihood = -111.91898
Iteration 18:  log likelihood = -111.91898
Iteration 19:  log likelihood = -111.91898
Iteration 20:  log likelihood = -111.91898
Iteration 21:  log likelihood = -111.91898
Iteration 22:  log likelihood = -111.91898
Iteration 23:  log likelihood = -111.91898
Iteration 24:  log likelihood = -111.91898
Iteration 25:  log likelihood = -111.91898
Iteration 26:  log likelihood = -111.91898
Iteration 27:  log likelihood = -111.91898
Iteration 28:  log likelihood = -111.91898
Iteration 29:  log likelihood = -111.91898
Iteration 30:  log likelihood = -111.91898
Iteration 31:  log likelihood = -111.91898
Iteration 32:  log likelihood = -111.91898
Iteration 33:  log likelihood = -111.91898
Iteration 34:  log likelihood = -111.91898
Iteration 35:  log likelihood = -111.91898
Iteration 36:  log likelihood = -111.91898
Iteration 37:  log likelihood = -111.91898
Iteration 38:  log likelihood = -111.91898
Iteration 39:  log likelihood = -111.91898
Refining estimates:
Iteration 0:   log likelihood = -111.91898
Iteration 1:   log likelihood = -111.91898
Iteration 2:   log likelihood = -111.91898

Cox regression -- no ties

No. of subjects =          746                  Number of obs    =         746
No. of failures =           18
Time at risk    =  1516.796715
                                                LR chi2(8)       =       13.13
Log likelihood  =   -111.91898                  Prob > chi2      =      0.1075

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.546565   .8873168     0.76   0.447     .5023486    4.761364
      Black  |   8.27e-19   4.18e-10    -0.00   1.000            0           .
      Mixed  |   .4143591    .347258    -1.05   0.293     .0801713    2.141584
      Other  |   .5986907   .4383847    -0.70   0.484     .1425343    2.514696
             |
     age_cat |
41 - 60 y..  |   .9356434   .5672644    -0.11   0.913     .2851292    3.070288
61 - 80 y..  |   1.686265   .9754172     0.90   0.366     .5426871    5.239646
  >80 years  |   1.085455   1.177193     0.08   0.940     .1295599    9.093966
             |
        male |
       Male  |   .9407834   .4490554    -0.13   0.898      .369142     2.39765
------------------------------------------------------------------------------
file ./output/tempdata/model1_asthma_eth.ster saved
file ./output/tempdata/surv_model1_asthma_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.43002         3.31        1         0.0690
      3.eth5      |     -0.37087         0.00        1         1.0000
      4.eth5      |     -0.20957         0.81        1         0.3683
      5.eth5      |     -0.06516         0.08        1         0.7832
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.07995         0.11        1         0.7358
      2.age_cat   |      0.15497         0.43        1         0.5109
      3.age_cat   |      0.14821         0.41        1         0.5213
      0b.male     |            .            .        1             .
      1.male      |      0.28601         1.35        1         0.2454
      ------------+---------------------------------------------------
      global test |                      6.22        8         0.6223
      ----------------------------------------------------------------

         failure _d:  asthma_admit
   analysis time _t:  (asthma_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -118.48398
Iteration 1:   log likelihood = -108.27962
Iteration 2:   log likelihood = -103.17329
Iteration 3:   log likelihood = -102.52012
Iteration 4:   log likelihood = -102.33275
Iteration 5:   log likelihood = -102.26497
Iteration 6:   log likelihood = -102.24013
Iteration 7:   log likelihood = -102.23101
Iteration 8:   log likelihood = -102.22765
Iteration 9:   log likelihood = -102.22642
Iteration 10:  log likelihood = -102.22596
Iteration 11:  log likelihood =  -102.2258
Iteration 12:  log likelihood = -102.22573
Iteration 13:  log likelihood = -102.22571
Iteration 14:  log likelihood =  -102.2257
Iteration 15:  log likelihood =  -102.2257
Iteration 16:  log likelihood =  -102.2257
Iteration 17:  log likelihood =  -102.2257
Iteration 18:  log likelihood =  -102.2257
Iteration 19:  log likelihood =  -102.2257
Iteration 20:  log likelihood =  -102.2257
Iteration 21:  log likelihood =  -102.2257
Iteration 22:  log likelihood =  -102.2257
Iteration 23:  log likelihood =  -102.2257
Iteration 24:  log likelihood =  -102.2257
Iteration 25:  log likelihood =  -102.2257
Iteration 26:  log likelihood =  -102.2257
Iteration 27:  log likelihood =  -102.2257
Iteration 28:  log likelihood =  -102.2257
Iteration 29:  log likelihood =  -102.2257
Iteration 30:  log likelihood =  -102.2257
Iteration 31:  log likelihood =  -102.2257
Iteration 32:  log likelihood =  -102.2257
Iteration 33:  log likelihood =  -102.2257
Iteration 34:  log likelihood =  -102.2257
Iteration 35:  log likelihood =  -102.2257
Iteration 36:  log likelihood =  -102.2257
Iteration 37:  log likelihood =  -102.2257
Iteration 38:  log likelihood =  -102.2257
Iteration 39:  log likelihood =  -102.2257
Refining estimates:
Iteration 0:   log likelihood =  -102.2257
Iteration 1:   log likelihood =  -102.2257

Cox regression -- no ties

No. of subjects =          746                  Number of obs    =         746
No. of failures =           18
Time at risk    =  1516.796715
                                                LR chi2(14)      =       32.52
Log likelihood  =    -102.2257                  Prob > chi2      =      0.0034

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.453927   .8489284     0.64   0.522     .4629533    4.566125
      Black  |   3.89e-18   8.90e-10    -0.00   1.000            0           .
      Mixed  |   .2746096   .2418027    -1.47   0.142     .0488883    1.542504
      Other  |   .4435501   .3347641    -1.08   0.281     .1010435    1.947049
             |
     age_cat |
41 - 60 y..  |   1.129482   .7005191     0.20   0.844     .3349295    3.808951
61 - 80 y..  |   1.746537    1.02877     0.95   0.344     .5505425    5.540701
  >80 years  |    1.47738   1.630553     0.35   0.724     .1698395    12.85126
             |
        male |
       Male  |   .8301611   .4036436    -0.38   0.702      .320102    2.152962
             |
urban_rura~n |
      Urban  |   .1548132   .1191887    -2.42   0.015     .0342357    .7000632
             |
         imd |
          1  |   5.52e+08   5.55e+08    20.01   0.000     7.68e+07    3.96e+09
          2  |   2.70e+09   2.17e+09    27.06   0.000     5.61e+08    1.30e+10
          3  |   7.91e+08   7.34e+08    22.08   0.000     1.28e+08    4.88e+09
          4  |   7.65e+08   7.16e+08    21.85   0.000     1.22e+08    4.79e+09
          5  |   6.09e+08          .        .       .            .           .
             |
  1.shielded |   24.10036   27.83636     2.76   0.006      2.50536     231.834
------------------------------------------------------------------------------
file ./output/tempdata/model2_asthma_eth.ster saved
file ./output/tempdata/surv_model2_asthma_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.38305         2.50        1         0.1141
      3.eth5      |     -0.25840         0.00        1         1.0000
      4.eth5      |     -0.07232         0.12        1         0.7315
      5.eth5      |     -0.01663         0.01        1         0.9429
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.00957         0.00        1         0.9681
      2.age_cat   |      0.12603         0.29        1         0.5911
      3.age_cat   |      0.10512         0.23        1         0.6328
      0b.male     |            .            .        1             .
      1.male      |      0.23980         1.03        1         0.3102
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.31862         2.25        1         0.1338
      0b.imd      |            .            .        1             .
      1.imd       |     -0.01588         0.00        1         0.9458
      2.imd       |     -0.18452         0.68        1         0.4093
      3.imd       |     -0.12446         0.28        1         0.5987
      4.imd       |     -0.07919         0.11        1         0.7392
      5.imd       |            .            .        1             .
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.24270         1.38        1         0.2400
      ------------+---------------------------------------------------
      global test |                     11.30       14         0.6621
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

depress_adm |
         it |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        952       95.20       95.20
          1 |         48        4.80      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  952
(48 real changes made)

                id:  patient_id
     failure event:  depress_admit != 0 & depress_admit < .
obs. time interval:  (depress_end[_n-1], depress_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         23  observations end on or before enter()
------------------------------------------------------------------------------
        977  observations remaining, representing
        977  subjects
         26  failures in single-failure-per-subject data
  1,981.615  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  depress_admit
   analysis time _t:  (depress_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_depress_pan_eth.svg not found)
(file ./output/graphs/km_depress_pan_eth.svg written in SVG format)

         failure _d:  depress_admit
   analysis time _t:  (depress_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -178.21667
Iteration 1:   log likelihood = -175.10929
Iteration 2:   log likelihood = -174.89015
Iteration 3:   log likelihood = -174.89008
Refining estimates:
Iteration 0:   log likelihood = -174.89008

Cox regression -- no ties

No. of subjects =          977                  Number of obs    =         977
No. of failures =           26
Time at risk    =  1981.615332
                                                LR chi2(4)       =        6.65
Log likelihood  =   -174.89008                  Prob > chi2      =      0.1554

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .4009598   .2341117    -1.57   0.118     .1276741    1.259212
      Black  |   .5097693   .2749503    -1.25   0.212     .1771201    1.467167
      Mixed  |   .2140065   .1645084    -2.01   0.045     .0474353    .9654994
      Other  |   .3903261   .2279038    -1.61   0.107     .1242875    1.225823
------------------------------------------------------------------------------
file ./output/tempdata/crude_depress_eth.ster saved
file ./output/tempdata/surv_crude_depress_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.14228         0.53        1         0.4685
      3.eth5      |      0.10314         0.28        1         0.5995
      4.eth5      |     -0.23479         1.43        1         0.2314
      5.eth5      |      0.16672         0.72        1         0.3959
      ------------+---------------------------------------------------
      global test |                      3.79        4         0.4348
      ----------------------------------------------------------------

         failure _d:  depress_admit
   analysis time _t:  (depress_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -151.50499
Iteration 1:   log likelihood = -147.43191
Iteration 2:   log likelihood = -147.03678
Iteration 3:   log likelihood = -147.03619
Refining estimates:
Iteration 0:   log likelihood = -147.03619

Cox regression -- no ties

No. of subjects =          749                  Number of obs    =         749
No. of failures =           23
Time at risk    =  1513.511294
                                                LR chi2(8)       =        8.94
Log likelihood  =   -147.03619                  Prob > chi2      =      0.3476

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .3848745   .2290708    -1.60   0.109     .1198666    1.235777
      Black  |   .2914827    .192493    -1.87   0.062     .0798888    1.063506
      Mixed  |   .1983048   .1538139    -2.09   0.037     .0433615    .9069064
      Other  |   .3606922   .2139231    -1.72   0.086      .112797     1.15339
             |
     age_cat |
41 - 60 y..  |   .7753364   .3827376    -0.52   0.606     .2946473    2.040224
61 - 80 y..  |   .6549699   .3882296    -0.71   0.475     .2049635    2.092985
  >80 years  |   1.375921    1.07112     0.41   0.682     .2991947     6.32751
             |
        male |
       Male  |   1.326573   .5612932     0.67   0.504     .5788614    3.040097
------------------------------------------------------------------------------
file ./output/tempdata/model1_depress_eth.ster saved
file ./output/tempdata/surv_model1_depress_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.06967         0.11        1         0.7383
      3.eth5      |      0.20075         0.94        1         0.3330
      4.eth5      |     -0.19284         0.87        1         0.3505
      5.eth5      |      0.25612         1.49        1         0.2220
      0b.age_cat  |            .            .        1             .
      1.age_cat   |     -0.03431         0.03        1         0.8675
      2.age_cat   |      0.08127         0.16        1         0.6921
      3.age_cat   |     -0.19027         0.87        1         0.3519
      0b.male     |            .            .        1             .
      1.male      |     -0.02290         0.01        1         0.9135
      ------------+---------------------------------------------------
      global test |                      5.40        8         0.7140
      ----------------------------------------------------------------

         failure _d:  depress_admit
   analysis time _t:  (depress_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -151.50499
Iteration 1:   log likelihood = -143.68178
Iteration 2:   log likelihood = -142.87556
Iteration 3:   log likelihood = -142.84149
Iteration 4:   log likelihood = -142.83399
Iteration 5:   log likelihood = -142.83126
Iteration 6:   log likelihood = -142.83025
Iteration 7:   log likelihood = -142.82988
Iteration 8:   log likelihood = -142.82975
Iteration 9:   log likelihood =  -142.8297
Iteration 10:  log likelihood = -142.82968
Iteration 11:  log likelihood = -142.82967
Iteration 12:  log likelihood = -142.82967
Iteration 13:  log likelihood = -142.82967
Iteration 14:  log likelihood = -142.82967
Iteration 15:  log likelihood = -142.82967
Iteration 16:  log likelihood = -142.82967
Iteration 17:  log likelihood = -142.82967
Iteration 18:  log likelihood = -142.82967
Iteration 19:  log likelihood = -142.82967
Iteration 20:  log likelihood = -142.82967
Iteration 21:  log likelihood = -142.82967
Iteration 22:  log likelihood = -142.82967
Iteration 23:  log likelihood = -142.82967
Iteration 24:  log likelihood = -142.82967
Iteration 25:  log likelihood = -142.82967
Iteration 26:  log likelihood = -142.82967
Iteration 27:  log likelihood = -142.82967
Iteration 28:  log likelihood = -142.82967
Iteration 29:  log likelihood = -142.82967
Iteration 30:  log likelihood = -142.82967
Iteration 31:  log likelihood = -142.82967
Refining estimates:
Iteration 0:   log likelihood = -142.82967
Iteration 1:   log likelihood = -142.82967
Iteration 2:   log likelihood = -142.82967

Cox regression -- no ties

No. of subjects =          749                  Number of obs    =         749
No. of failures =           23
Time at risk    =  1513.511294
                                                LR chi2(15)      =       17.35
Log likelihood  =   -142.82967                  Prob > chi2      =      0.2983

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .3624538   .2192489    -1.68   0.093      .110754    1.186167
      Black  |   .2685304   .1796982    -1.96   0.049     .0723397    .9968046
      Mixed  |   .1877642   .1469549    -2.14   0.033     .0404962    .8705857
      Other  |   .3372523     .20187    -1.82   0.069     .1043396    1.090086
             |
     age_cat |
41 - 60 y..  |   .8092406   .4019374    -0.43   0.670     .3057025    2.142182
61 - 80 y..  |   .6589931   .3963912    -0.69   0.488     .2027096    2.142335
  >80 years  |   1.286779   1.004834     0.32   0.747     .2784893    5.945653
             |
        male |
       Male  |    1.39136   .5932782     0.77   0.439      .603234    3.209174
             |
urban_rura~n |
      Urban  |   .8986307   .3974495    -0.24   0.809     .3776669    2.138226
             |
         imd |
          1  |   .3646606   .3217201    -1.14   0.253     .0647024    2.055215
          2  |   .3846899   .3379611    -1.09   0.277     .0687553    2.152363
          3  |   .6811555   .5531292    -0.47   0.636     .1386858    3.345496
          4  |   .0820556   .1015132    -2.02   0.043     .0072621    .9271549
          5  |   .3428386    .302541    -1.21   0.225      .060805    1.933037
             |
  1.shielded |   3.96e-15   1.19e-07    -0.00   1.000            0           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_depress_eth.ster saved
file ./output/tempdata/surv_model2_depress_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.03010         0.02        1         0.8880
      3.eth5      |      0.21153         1.14        1         0.2866
      4.eth5      |     -0.16286         0.55        1         0.4597
      5.eth5      |      0.30136         2.06        1         0.1512
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.00258         0.00        1         0.9900
      2.age_cat   |      0.13633         0.49        1         0.4858
      3.age_cat   |     -0.16370         0.65        1         0.4191
      0b.male     |            .            .        1             .
      1.male      |     -0.01051         0.00        1         0.9598
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.37015         3.37        1         0.0666
      0b.imd      |            .            .        1             .
      1.imd       |      0.51104         5.83        1         0.0158
      2.imd       |      0.28444         1.89        1         0.1689
      3.imd       |      0.26124         1.49        1         0.2224
      4.imd       |      0.20470         0.90        1         0.3440
      5.imd       |      0.22187         1.14        1         0.2853
      0b.shielded |            .            .        1             .
      1.shielded  |     -0.13516         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     15.31       15         0.4296
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

  anx_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        951       95.10       95.10
          1 |         49        4.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  951
(49 real changes made)

                id:  patient_id
     failure event:  anx_admit != 0 & anx_admit < .
obs. time interval:  (anx_end[_n-1], anx_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         26  observations end on or before enter()
------------------------------------------------------------------------------
        974  observations remaining, representing
        974  subjects
         24  failures in single-failure-per-subject data
  1,987.236  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  anx_admit
   analysis time _t:  (anx_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_anx_pan_eth.svg not found)
(file ./output/graphs/km_anx_pan_eth.svg written in SVG format)

         failure _d:  anx_admit
   analysis time _t:  (anx_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -164.3068
Iteration 1:   log likelihood = -163.59634
Iteration 2:   log likelihood = -163.58118
Iteration 3:   log likelihood = -163.58118
Refining estimates:
Iteration 0:   log likelihood = -163.58118

Cox regression -- no ties

No. of subjects =          974                  Number of obs    =         974
No. of failures =           24
Time at risk    =   1987.23614
                                                LR chi2(4)       =        1.45
Log likelihood  =   -163.58118                  Prob > chi2      =      0.8352

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.376949   .9236862     0.48   0.633     .3697548    5.127689
      Black  |   1.954021   1.224756     1.07   0.285     .5720139    6.675008
      Mixed  |   1.192194   .8430109     0.25   0.804      .298164    4.766933
      Other  |   1.121909   .7933102     0.16   0.871     .2805862     4.48589
------------------------------------------------------------------------------
file ./output/tempdata/crude_anx_eth.ster saved
file ./output/tempdata/surv_crude_anx_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.20809         1.04        1         0.3082
      3.eth5      |      0.08981         0.19        1         0.6599
      4.eth5      |     -0.01459         0.01        1         0.9431
      5.eth5      |     -0.12704         0.39        1         0.5337
      ------------+---------------------------------------------------
      global test |                      3.16        4         0.5318
      ----------------------------------------------------------------

         failure _d:  anx_admit
   analysis time _t:  (anx_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -118.47413
Iteration 1:   log likelihood = -117.52127
Iteration 2:   log likelihood = -117.48285
Iteration 3:   log likelihood = -117.48274
Refining estimates:
Iteration 0:   log likelihood = -117.48274

Cox regression -- no ties

No. of subjects =          746                  Number of obs    =         746
No. of failures =           18
Time at risk    =   1520.72553
                                                LR chi2(8)       =        1.98
Log likelihood  =   -117.48274                  Prob > chi2      =      0.9815

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.249005   .9583621     0.29   0.772     .2776109    5.619421
      Black  |   1.687638   1.236546     0.71   0.475      .401418     7.09515
      Mixed  |    1.03755    .848364     0.05   0.964     .2089367    5.152325
      Other  |   .9903441    .810393    -0.01   0.991     .1991832    4.924017
             |
     age_cat |
41 - 60 y..  |   1.536837   .9004201     0.73   0.463     .4874342    4.845513
61 - 80 y..  |   1.373749   .9227374     0.47   0.636      .368266    5.124522
  >80 years  |   2.281586   1.913169     0.98   0.325     .4410444    11.80297
             |
        male |
       Male  |   1.039218   .4931387     0.08   0.935     .4100034    2.634063
------------------------------------------------------------------------------
file ./output/tempdata/model1_anx_eth.ster saved
file ./output/tempdata/surv_model1_anx_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.22832         1.00        1         0.3181
      3.eth5      |     -0.03408         0.02        1         0.8880
      4.eth5      |     -0.22344         0.90        1         0.3423
      5.eth5      |     -0.33437         1.99        1         0.1589
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.59881         6.46        1         0.0110
      2.age_cat   |      0.41307         2.97        1         0.0847
      3.age_cat   |      0.66059         7.49        1         0.0062
      0b.male     |            .            .        1             .
      1.male      |     -0.11577         0.26        1         0.6110
      ------------+---------------------------------------------------
      global test |                     13.60        8         0.0927
      ----------------------------------------------------------------

         failure _d:  anx_admit
   analysis time _t:  (anx_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -118.47413
Iteration 1:   log likelihood = -115.05627
Iteration 2:   log likelihood = -114.75768
Iteration 3:   log likelihood = -114.66772
Iteration 4:   log likelihood = -114.63493
Iteration 5:   log likelihood = -114.62289
Iteration 6:   log likelihood = -114.61847
Iteration 7:   log likelihood = -114.61684
Iteration 8:   log likelihood = -114.61625
Iteration 9:   log likelihood = -114.61603
Iteration 10:  log likelihood = -114.61594
Iteration 11:  log likelihood = -114.61591
Iteration 12:  log likelihood =  -114.6159
Iteration 13:  log likelihood =  -114.6159
Iteration 14:  log likelihood =  -114.6159
Iteration 15:  log likelihood =  -114.6159
Iteration 16:  log likelihood =  -114.6159
Iteration 17:  log likelihood =  -114.6159
Iteration 18:  log likelihood =  -114.6159
Iteration 19:  log likelihood =  -114.6159
Iteration 20:  log likelihood =  -114.6159
Iteration 21:  log likelihood =  -114.6159
Iteration 22:  log likelihood =  -114.6159
Iteration 23:  log likelihood =  -114.6159
Iteration 24:  log likelihood =  -114.6159
Iteration 25:  log likelihood =  -114.6159
Iteration 26:  log likelihood =  -114.6159
Iteration 27:  log likelihood =  -114.6159
Iteration 28:  log likelihood =  -114.6159
Iteration 29:  log likelihood =  -114.6159
Iteration 30:  log likelihood =  -114.6159
Iteration 31:  log likelihood =  -114.6159
Iteration 32:  log likelihood =  -114.6159
Iteration 33:  log likelihood =  -114.6159
Iteration 34:  log likelihood =  -114.6159
Iteration 35:  log likelihood =  -114.6159
Iteration 36:  log likelihood =  -114.6159
Iteration 37:  log likelihood =  -114.6159
Iteration 38:  log likelihood =  -114.6159
Refining estimates:
Iteration 0:   log likelihood =  -114.6159
Iteration 1:   log likelihood =  -114.6159

Cox regression -- no ties

No. of subjects =          746                  Number of obs    =         746
No. of failures =           18
Time at risk    =   1520.72553
                                                LR chi2(14)      =        7.72
Log likelihood  =    -114.6159                  Prob > chi2      =      0.9036

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.215443   .9424736     0.25   0.801     .2658886    5.556095
      Black  |   1.635967   1.199616     0.67   0.502     .3886942    6.885585
      Mixed  |   1.107211   .9086614     0.12   0.901     .2216511    5.530839
      Other  |   .9633944   .7901136    -0.05   0.964     .1930651    4.807335
             |
     age_cat |
41 - 60 y..  |   1.492543   .8775092     0.68   0.496      .471499    4.724685
61 - 80 y..  |   1.469378   .9909603     0.57   0.568      .391811    5.510495
  >80 years  |   2.394975   2.018538     1.04   0.300     .4590814    12.49431
             |
        male |
       Male  |    1.02115   .4877144     0.04   0.965     .4004471     2.60396
             |
urban_rura~n |
      Urban  |   1.984899   .9496042     1.43   0.152     .7771616    5.069504
             |
         imd |
          1  |   1.38e+09   1.27e+09    22.86   0.000     2.27e+08    8.40e+09
          2  |   1.86e+09   1.63e+09    24.44   0.000     3.36e+08    1.03e+10
          3  |   1.72e+09   1.50e+09    24.47   0.000     3.14e+08    9.46e+09
          4  |   2.00e+09   1.69e+09    25.47   0.000     3.86e+08    1.04e+10
          5  |   9.45e+08          .        .       .            .           .
             |
  1.shielded |   1.01e-17   7.32e-09    -0.00   1.000            0           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_anx_eth.ster saved
file ./output/tempdata/surv_model2_anx_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.20193         0.67        1         0.4140
      3.eth5      |     -0.02395         0.01        1         0.9222
      4.eth5      |     -0.22360         0.90        1         0.3418
      5.eth5      |     -0.31488         1.81        1         0.1781
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.57699         6.07        1         0.0137
      2.age_cat   |      0.40128         2.86        1         0.0909
      3.age_cat   |      0.66162         7.34        1         0.0067
      0b.male     |            .            .        1             .
      1.male      |     -0.12759         0.31        1         0.5788
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.01461         0.00        1         0.9500
      0b.imd      |            .            .        1             .
      1.imd       |     -0.06306         0.07        1         0.7931
      2.imd       |     -0.20720         0.66        1         0.4176
      3.imd       |     -0.16533         0.45        1         0.5031
      4.imd       |     -0.05035         0.04        1         0.8366
      5.imd       |            .            .        1             .
      0b.shielded |            .            .        1             .
      1.shielded  |      0.25263         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     14.68       14         0.4005
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

  smi_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        951       95.10       95.10
          1 |         49        4.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  951
(49 real changes made)

                id:  patient_id
     failure event:  smi_admit != 0 & smi_admit < .
obs. time interval:  (smi_end[_n-1], smi_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         28  observations end on or before enter()
------------------------------------------------------------------------------
        972  observations remaining, representing
        972  subjects
         22  failures in single-failure-per-subject data
  1,986.242  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  smi_admit
   analysis time _t:  (smi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_smi_pan_eth.svg not found)
(file ./output/graphs/km_smi_pan_eth.svg written in SVG format)

         failure _d:  smi_admit
   analysis time _t:  (smi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -150.58579
Iteration 1:   log likelihood = -147.38661
Iteration 2:   log likelihood = -147.06086
Iteration 3:   log likelihood = -147.04461
Iteration 4:   log likelihood = -147.04452
Refining estimates:
Iteration 0:   log likelihood = -147.04452

Cox regression -- no ties

No. of subjects =          972                  Number of obs    =         972
No. of failures =           22
Time at risk    =    1986.2423
                                                LR chi2(4)       =        7.08
Log likelihood  =   -147.04452                  Prob > chi2      =      0.1316

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |    5.63162    6.16915     1.58   0.115     .6579393    48.20376
      Black  |   8.113633   8.673883     1.96   0.050     .9982469    65.94666
      Mixed  |   3.584079   4.138546     1.11   0.269     .3728145     34.4558
      Other  |   6.692282   7.228498     1.76   0.078     .8056946    55.58761
------------------------------------------------------------------------------
file ./output/tempdata/crude_smi_eth.ster saved
file ./output/tempdata/surv_crude_smi_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.06849         0.10        1         0.7479
      3.eth5      |      0.02495         0.01        1         0.9068
      4.eth5      |     -0.05632         0.07        1         0.7916
      5.eth5      |     -0.02687         0.02        1         0.8997
      ------------+---------------------------------------------------
      global test |                      1.08        4         0.8970
      ----------------------------------------------------------------

         failure _d:  smi_admit
   analysis time _t:  (smi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -111.85812
Iteration 1:   log likelihood = -108.72827
Iteration 2:   log likelihood = -107.66746
Iteration 3:   log likelihood = -107.64624
Iteration 4:   log likelihood = -107.64621
Refining estimates:
Iteration 0:   log likelihood = -107.64621

Cox regression -- no ties

No. of subjects =          744                  Number of obs    =         744
No. of failures =           17
Time at risk    =  1517.360712
                                                LR chi2(8)       =        8.42
Log likelihood  =   -107.64621                  Prob > chi2      =      0.3932

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   4.342247   4.769681     1.34   0.181     .5043406    37.38567
      Black  |   5.085183   5.591391     1.48   0.139     .5893478    43.87746
      Mixed  |   1.977779   2.425814     0.56   0.578     .1787104    21.88798
      Other  |   3.820662   4.279322     1.20   0.231     .4253559    34.31822
             |
     age_cat |
41 - 60 y..  |   1.347103   .8177571     0.49   0.624      .409902    4.427123
61 - 80 y..  |   1.001066   .7320908     0.00   0.999     .2387646    4.197163
  >80 years  |   3.270829   2.402481     1.61   0.107     .7752388    13.80004
             |
        male |
       Male  |    .566983   .2892651    -1.11   0.266     .2085938    1.541128
------------------------------------------------------------------------------
file ./output/tempdata/model1_smi_eth.ster saved
file ./output/tempdata/surv_model1_smi_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.09227         0.15        1         0.6952
      3.eth5      |     -0.02121         0.01        1         0.9268
      4.eth5      |     -0.18713         0.62        1         0.4297
      5.eth5      |     -0.03323         0.02        1         0.8890
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.52221         4.60        1         0.0320
      2.age_cat   |      0.14337         0.33        1         0.5628
      3.age_cat   |     -0.00275         0.00        1         0.9908
      0b.male     |            .            .        1             .
      1.male      |      0.02757         0.01        1         0.9059
      ------------+---------------------------------------------------
      global test |                      9.00        8         0.3425
      ----------------------------------------------------------------

         failure _d:  smi_admit
   analysis time _t:  (smi_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -111.85812
Iteration 1:   log likelihood = -110.43985
Iteration 2:   log likelihood = -105.93272
Iteration 3:   log likelihood = -105.76653
Iteration 4:   log likelihood = -105.76279
Iteration 5:   log likelihood = -105.76161
Iteration 6:   log likelihood = -105.76118
Iteration 7:   log likelihood = -105.76102
Iteration 8:   log likelihood = -105.76096
Iteration 9:   log likelihood = -105.76094
Iteration 10:  log likelihood = -105.76093
Iteration 11:  log likelihood = -105.76093
Iteration 12:  log likelihood = -105.76093
Iteration 13:  log likelihood = -105.76093
Iteration 14:  log likelihood = -105.76093
Iteration 15:  log likelihood = -105.76093
Iteration 16:  log likelihood = -105.76093
Iteration 17:  log likelihood = -105.76093
Iteration 18:  log likelihood = -105.76093
Iteration 19:  log likelihood = -105.76093
Iteration 20:  log likelihood = -105.76093
Iteration 21:  log likelihood = -105.76093
Iteration 22:  log likelihood = -105.76093
Iteration 23:  log likelihood = -105.76093
Iteration 24:  log likelihood = -105.76093
Iteration 25:  log likelihood = -105.76093
Iteration 26:  log likelihood = -105.76093
Iteration 27:  log likelihood = -105.76093
Iteration 28:  log likelihood = -105.76093
Iteration 29:  log likelihood = -105.76093
Iteration 30:  log likelihood = -105.76093
Refining estimates:
Iteration 0:   log likelihood = -105.76093
Iteration 1:   log likelihood = -105.76093
Iteration 2:   log likelihood = -105.76093

Cox regression -- no ties

No. of subjects =          744                  Number of obs    =         744
No. of failures =           17
Time at risk    =  1517.360712
                                                LR chi2(15)      =       12.19
Log likelihood  =   -105.76093                  Prob > chi2      =      0.6643

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   4.105474   4.539983     1.28   0.202     .4699736    35.86354
      Black  |   4.655594    5.14129     1.39   0.164     .5345298    40.54884
      Mixed  |   1.829704   2.251838     0.49   0.623     .1639825     20.4157
      Other  |   3.798196   4.269033     1.19   0.235     .4196219    34.37927
             |
     age_cat |
41 - 60 y..  |   1.313544   .7993803     0.45   0.654     .3985022    4.329705
61 - 80 y..  |   .9800353   .7205146    -0.03   0.978     .2319769    4.140366
  >80 years  |   3.010391   2.237925     1.48   0.138     .7011964    12.92428
             |
        male |
       Male  |   .6027888   .3098083    -0.98   0.325     .2201319    1.650621
             |
urban_rura~n |
      Urban  |   .8516244   .4400179    -0.31   0.756     .3093489    2.344485
             |
         imd |
          1  |   .3017688   .2481513    -1.46   0.145      .060216    1.512295
          2  |   .1968286    .181483    -1.76   0.078     .0323035    1.199296
          3  |    .260041   .2140932    -1.64   0.102     .0517896    1.305692
          4  |   .2884699   .2386621    -1.50   0.133     .0569993    1.459929
          5  |   .2893979   .2403481    -1.49   0.135     .0568281    1.473763
             |
  1.shielded |   1.09e-14   3.02e-07    -0.00   1.000            0           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_smi_eth.ster saved
file ./output/tempdata/surv_model2_smi_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.09697         0.17        1         0.6819
      3.eth5      |     -0.00336         0.00        1         0.9886
      4.eth5      |     -0.17564         0.56        1         0.4550
      5.eth5      |     -0.01407         0.00        1         0.9524
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.56091         4.90        1         0.0268
      2.age_cat   |      0.11170         0.22        1         0.6427
      3.age_cat   |     -0.04710         0.04        1         0.8392
      0b.male     |            .            .        1             .
      1.male      |     -0.02477         0.01        1         0.9124
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|     -0.20059         0.69        1         0.4075
      0b.imd      |            .            .        1             .
      1.imd       |      0.33163         1.93        1         0.1645
      2.imd       |      0.24798         1.10        1         0.2935
      3.imd       |      0.36822         2.29        1         0.1303
      4.imd       |      0.22950         0.98        1         0.3213
      5.imd       |     -0.12925         0.28        1         0.5972
      0b.shielded |            .            .        1             .
      1.shielded  |      0.37275         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                     16.74       15         0.3349
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

   sh_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        950       95.00       95.00
          1 |         50        5.00      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  950
(50 real changes made)

                id:  patient_id
     failure event:  sh_admit != 0 & sh_admit < .
obs. time interval:  (sh_end[_n-1], sh_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
         26  observations end on or before enter()
------------------------------------------------------------------------------
        974  observations remaining, representing
        974  subjects
         25  failures in single-failure-per-subject data
  1,985.336  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  2.102669

         failure _d:  sh_admit
   analysis time _t:  (sh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_sh_pan_eth.svg not found)
(file ./output/graphs/km_sh_pan_eth.svg written in SVG format)

         failure _d:  sh_admit
   analysis time _t:  (sh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -171.03231
Iteration 1:   log likelihood = -169.91805
Iteration 2:   log likelihood = -169.86318
Iteration 3:   log likelihood = -169.86315
Refining estimates:
Iteration 0:   log likelihood = -169.86315

Cox regression -- no ties

No. of subjects =          974                  Number of obs    =         974
No. of failures =           25
Time at risk    =  1985.336071
                                                LR chi2(4)       =        2.34
Log likelihood  =   -169.86315                  Prob > chi2      =      0.6738

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .9026331   .6055068    -0.15   0.879     .2423851    3.361372
      Black  |   1.860909   1.060892     1.09   0.276     .6087804    5.688392
      Mixed  |   .9601779   .6441083    -0.06   0.952     .2578381    3.575661
      Other  |   .8945753   .6001003    -0.17   0.868     .2402219    3.331357
------------------------------------------------------------------------------
file ./output/tempdata/crude_sh_eth.ster saved
file ./output/tempdata/surv_crude_sh_eth16.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |      0.09274         0.22        1         0.6427
      3.eth5      |     -0.12992         0.42        1         0.5161
      4.eth5      |     -0.01926         0.01        1         0.9233
      5.eth5      |      0.11444         0.33        1         0.5674
      ------------+---------------------------------------------------
      global test |                      2.08        4         0.7208
      ----------------------------------------------------------------

         failure _d:  sh_admit
   analysis time _t:  (sh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -98.524542
Iteration 1:   log likelihood = -95.984845
Iteration 2:   log likelihood = -95.632339
Iteration 3:   log likelihood = -95.551317
Iteration 4:   log likelihood = -95.522079
Iteration 5:   log likelihood = -95.511353
Iteration 6:   log likelihood = -95.507412
Iteration 7:   log likelihood = -95.505963
Iteration 8:   log likelihood = -95.505429
Iteration 9:   log likelihood = -95.505233
Iteration 10:  log likelihood = -95.505161
Iteration 11:  log likelihood = -95.505135
Iteration 12:  log likelihood = -95.505125
Iteration 13:  log likelihood = -95.505121
Iteration 14:  log likelihood =  -95.50512
Iteration 15:  log likelihood =  -95.50512
Iteration 16:  log likelihood = -95.505119
Iteration 17:  log likelihood = -95.505119
Iteration 18:  log likelihood = -95.505119
Iteration 19:  log likelihood = -95.505119
Iteration 20:  log likelihood = -95.505119
Iteration 21:  log likelihood = -95.505119
Iteration 22:  log likelihood = -95.505119
Iteration 23:  log likelihood = -95.505119
Iteration 24:  log likelihood = -95.505119
Iteration 25:  log likelihood = -95.505119
Iteration 26:  log likelihood = -95.505119
Iteration 27:  log likelihood = -95.505119
Iteration 28:  log likelihood = -95.505119
Iteration 29:  log likelihood = -95.505119
Iteration 30:  log likelihood = -95.505119
Iteration 31:  log likelihood = -95.505119
Iteration 32:  log likelihood = -95.505119
Iteration 33:  log likelihood = -95.505119
Refining estimates:
Iteration 0:   log likelihood = -95.505119
Iteration 1:   log likelihood = -95.505119
Iteration 2:   log likelihood = -95.505119

Cox regression -- no ties

No. of subjects =          741                  Number of obs    =         741
No. of failures =           15
Time at risk    =  1512.733744
                                                LR chi2(8)       =        6.04
Log likelihood  =   -95.505119                  Prob > chi2      =      0.6429

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |    2.98545   3.451027     0.95   0.344      .309788    28.77101
      Black  |   5.871282   6.439321     1.61   0.107     .6841931    50.38336
      Mixed  |   3.210136   3.708032     1.01   0.313     .3336565    30.88498
      Other  |   3.070533   3.547247     0.97   0.332     .3190505    29.55073
             |
     age_cat |
41 - 60 y..  |   .9115527   .5531731    -0.15   0.879     .2774806    2.994546
61 - 80 y..  |   1.105268   .7148621     0.15   0.877     .3111212    3.926497
  >80 years  |   5.09e-16   2.11e-08    -0.00   1.000            0           .
             |
        male |
       Male  |   .6705101   .3571353    -0.75   0.453      .236063    1.904508
------------------------------------------------------------------------------
file ./output/tempdata/model1_sh_eth.ster saved
file ./output/tempdata/surv_model1_sh_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.03559         0.02        1         0.8901
      3.eth5      |     -0.13593         0.27        1         0.6018
      4.eth5      |     -0.03506         0.02        1         0.8919
      5.eth5      |      0.05550         0.05        1         0.8310
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.31546         1.58        1         0.2083
      2.age_cat   |      0.22655         0.80        1         0.3724
      3.age_cat   |      0.33714         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |     -0.18045         0.47        1         0.4918
      ------------+---------------------------------------------------
      global test |                      3.51        8         0.8981
      ----------------------------------------------------------------

         failure _d:  sh_admit
   analysis time _t:  (sh_end-origin)/365.25
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -98.524542
Iteration 1:   log likelihood = -91.199315
Iteration 2:   log likelihood = -90.086033
Iteration 3:   log likelihood = -89.789159
Iteration 4:   log likelihood = -89.682366
Iteration 5:   log likelihood = -89.643223
Iteration 6:   log likelihood = -89.628842
Iteration 7:   log likelihood = -89.623554
Iteration 8:   log likelihood = -89.621609
Iteration 9:   log likelihood = -89.620893
Iteration 10:  log likelihood =  -89.62063
Iteration 11:  log likelihood = -89.620533
Iteration 12:  log likelihood = -89.620498
Iteration 13:  log likelihood = -89.620485
Iteration 14:  log likelihood =  -89.62048
Iteration 15:  log likelihood = -89.620478
Iteration 16:  log likelihood = -89.620477
Iteration 17:  log likelihood = -89.620477
Iteration 18:  log likelihood = -89.620477
Iteration 19:  log likelihood = -89.620477
Iteration 20:  log likelihood = -89.620477
Iteration 21:  log likelihood = -89.620477
Iteration 22:  log likelihood = -89.620477
Iteration 23:  log likelihood = -89.620477
Iteration 24:  log likelihood = -89.620477
Iteration 25:  log likelihood = -89.620477
Iteration 26:  log likelihood = -89.620477
Iteration 27:  log likelihood = -89.620477
Iteration 28:  log likelihood = -89.620477
Iteration 29:  log likelihood = -89.620477
Iteration 30:  log likelihood = -89.620477
Iteration 31:  log likelihood = -89.620477
Iteration 32:  log likelihood = -89.620477
Iteration 33:  log likelihood = -89.620477
Iteration 34:  log likelihood = -89.620477
Refining estimates:
Iteration 0:   log likelihood = -89.620477
Iteration 1:   log likelihood = -89.620477

Cox regression -- no ties

No. of subjects =          741                  Number of obs    =         741
No. of failures =           15
Time at risk    =  1512.733744
                                                LR chi2(15)      =       17.81
Log likelihood  =   -89.620477                  Prob > chi2      =      0.2729

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.881064   3.350225     0.91   0.363     .2949439    28.14275
      Black  |   6.027906   6.618731     1.64   0.102     .7007036    51.85595
      Mixed  |   3.039536   3.526907     0.96   0.338     .3126951    29.54565
      Other  |   3.729142   4.337247     1.13   0.258     .3815956    36.44303
             |
     age_cat |
41 - 60 y..  |   .8449972   .5143012    -0.28   0.782     .2563173    2.785689
61 - 80 y..  |   .9449751   .6178514    -0.09   0.931     .2623498    3.403768
  >80 years  |   5.30e-16   2.11e-08    -0.00   1.000            0           .
             |
        male |
       Male  |   .6507256   .3462047    -0.81   0.419     .2293688    1.846127
             |
urban_rura~n |
      Urban  |   .5454811   .3223329    -1.03   0.305     .1713137     1.73687
             |
         imd |
          1  |   1.618084   1.781257     0.44   0.662     .1870515    13.99718
          2  |   .8441446   .9814899    -0.15   0.884     .0864414    8.243504
          3  |   4.03e-16   1.08e-08    -0.00   1.000            0           .
          4  |   1.405545   1.547395     0.31   0.757      .162457    12.16049
          5  |   .2810403    .399865    -0.89   0.372     .0172853    4.569416
             |
  1.shielded |   6.03e-16   6.31e-08    -0.00   1.000            0           .
------------------------------------------------------------------------------
file ./output/tempdata/model2_sh_eth.ster saved
file ./output/tempdata/surv_model2_sh_eth.dta saved

      Test of proportional-hazards assumption

      Time:  Time
      ----------------------------------------------------------------
                  |       rho            chi2       df       Prob>chi2
      ------------+---------------------------------------------------
      1b.eth5     |            .            .        1             .
      2.eth5      |     -0.03282         0.02        1         0.8923
      3.eth5      |     -0.12813         0.27        1         0.6028
      4.eth5      |     -0.03491         0.02        1         0.8853
      5.eth5      |      0.04422         0.03        1         0.8666
      0b.age_cat  |            .            .        1             .
      1.age_cat   |      0.33185         1.62        1         0.2027
      2.age_cat   |      0.26105         1.04        1         0.3071
      3.age_cat   |      0.24897         0.00        1         1.0000
      0b.male     |            .            .        1             .
      1.male      |     -0.19759         0.61        1         0.4362
      0b.urban_r~n|            .            .        1             .
      1.urban_ru~n|      0.19846         0.67        1         0.4121
      0b.imd      |            .            .        1             .
      1.imd       |     -0.05260         0.05        1         0.8226
      2.imd       |      0.04804         0.03        1         0.8554
      3.imd       |     -0.08696         0.00        1         1.0000
      4.imd       |     -0.23166         0.88        1         0.3474
      5.imd       |      0.11751         0.22        1         0.6393
      0b.shielded |            .            .        1             .
      1.shielded  |      0.19497         0.00        1         1.0000
      ------------+---------------------------------------------------
      global test |                      8.34       15         0.9092
      ----------------------------------------------------------------
(output written to ./output/tables/estout_table_eth_pan.txt)

. 
. file close tablecontent

. 
. 
. log close
      name:  <unnamed>
       log:  /workspace/logs/cox_model_checks.log
  log type:  text
 closed on:   7 Jun 2022, 13:57:18
-------------------------------------------------------------------------------
