
. cap mkdir ./output/graphs

. cap mkdir ./output/tempdata

. cap mkdir ./output/tables

. 
. di "`outcome'"
cvd

. 
. * open file to write results to
. file open tablecontent using ./output/tables/`outcome'_cox_models.txt, write 
> text replace
(note: file ./output/tables/cvd_cox_models.txt not found)

. file write tablecontent ("period") _tab ("ethnic_group") _tab ("denominator")
>  _tab ("events") _tab ("total_person_wks") _tab ("Rate") _tab ("unadj_hr") _t
> ab ///
> ("unadj_ci") _tab ("unadj_lci") _tab ("unadj_uci") _tab ("p_adj_hr") _tab ("p
> _adj_ci") _tab ("p_adj_lci") _tab ("p_adj_uci") _tab ("f_adj_hr") _tab ("f_ad
> j_ci") _tab ("f_adj_lci") _tab ("f_adj_uci") _tab  _n

. 
. foreach period in pre pandemic wave1 easing1 wave2 easing2 wave3 easing3 {
  2.     use ./output/prep_survival_`period', clear
  3.     describe
  4.     * Drop events that occur on index date
.     drop if `outcome'_admit_date==index_date
  5. 
.     * Update study population for diabetes and respiratory outcomes
.     drop if has_t1_diabetes==0 & "`outcome'"=="t1dm"
  6.     drop if has_t2_diabetes==0 & "`outcome'"=="t2dm"
  7.     drop if diabetes_subgroup==0 & "`outcome'"=="dm_keto"
  8.     drop if has_asthma==0 & "`outcome'"=="asthma"
  9.     drop if has_copd==0 & "`outcome'"=="copd"
 10. 
.     * Cox model for each outcome category
.     * Generate flags and end dates for each outcome
.     gen `outcome'_admit=(`outcome'_admit_date!=.)
 11.     tab `outcome'_admit
 12.     count if `outcome'_admit_date!=.
 13.     if r(N) > 10 {
 14.         gen `outcome'_end = end_date
 15.         replace `outcome'_end = `outcome'_admit_date if `outcome'_admit==1
 16. 
.         stset `outcome'_end, fail(`outcome'_admit) id(patient_id) enter(index
> _date) origin(index_date) 
 17.         * Kaplan-Meier plot
.         sts graph, by(eth5) ylabel(.75(.05)1)
 18.         graph export ./output/graphs/km_`outcome'_`period'_eth.svg, as(svg
> ) replace
 19.         * Cox model - crude
.         stcox i.eth5, strata(stp)
 20.         estimates save "./output/tempdata/crude_`outcome'_eth", replace 
 21.         eststo model1
 22.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_crude_`outcome'_eth", replace) idstr("crude_`outcome'_eth") 
 23.         *estat phtest, detail
.         * Cox model - age and gender adjusted
.         stcox i.eth5 i.age_cat i.male, strata(stp)
 24.         estimates save "./output/tempdata/model1_`outcome'_eth", replace 
 25.         eststo model2
 26.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_model1_`outcome'_eth", replace) idstr("model1_`outcome'_eth") 
 27.         *estat phtest, detail
.         * Cox model - fully adjusted
.         stcox i.eth5 i.age_cat i.male i.urban_rural_bin i.imd i.shielded, str
> ata(stp)
 28.         estimates save "./output/tempdata/model2_`outcome'_eth", replace 
 29.         eststo model3
 30.         parmest, label eform format(estimate p lb ub) saving("./output/tem
> pdata/surv_model2_`outcome'_eth", replace) idstr("model2_`outcome'_eth") 
 31.         *estat phtest, detail
.         esttab model1 model2 model3 using "./output/tables/`outcome'_estout_t
> able_eth_`period'.txt", b(a2) ci(2) label wide compress eform ///
>         title ("`outcome'") ///
>         varlabels(`e(labels)') ///
>         stats(N_outcome) ///
>         append 
 32.         eststo clear
 33.     * Write results to table
.         * eth16 labelled columns
. 
.         local lab1: label eth5 1
 34.         local lab2: label eth5 2
 35.         local lab3: label eth5 3
 36.         local lab4: label eth5 4
 37.         local lab5: label eth5 5
 38.         /* counts */
.         
.         * First row, eth16 = 1 (White British) reference cat
.         qui safecount if eth5==1
 39.         local denominator = r(N)
 40.         qui safecount if eth5 == 1 & `outcome'_admit == 1
 41.         local event = r(N)
 42.         bysort eth5: egen total_follow_up = total(_t)
 43.         qui su total_follow_up if eth5 == 1
 44.         local person_mth = r(mean)/30
 45.         local rate = 100000*(`event'/`person_mth')
 46.         if `event'>10 & `event'!=. {
 47.             file write tablecontent  ("`period'") _tab ("`lab1'") _tab (`d
> enominator') _tab (`event') _tab %10.0f (`person_mth') _tab %3.2f (`rate') _t
> ab
 48.             file write tablecontent ("1.00") _tab _tab ("1.00") _tab _tab 
> _tab _tab ("1.00") _n
 49.             }
 50.         else {
 51.             file write tablecontent ("`period'") _tab ("`lab`eth''") _tab 
> ("redact") _n
 52.             continue
 53.         }
 54.     * outcomesequent ethnic groups
.         forvalues eth=2/5 {
 55.             qui safecount if eth5==`eth'
 56.             local denominator = r(N)
 57.             qui safecount if eth5 == `eth' & `outcome'_admit == 1
 58.             local event = r(N)
 59.             qui su total_follow_up if eth5 == `eth'
 60.             local person_mth = r(mean)/30
 61.             local rate = 100000*(`event'/`person_mth')
 62.             if `event'>10 & `event'!=. {
 63.                 file write tablecontent ("`period'") _tab ("`lab`eth''") _
> tab (`denominator') _tab (`event') _tab %10.0f (`person_mth') _tab %3.2f (`ra
> te') _tab  
 64.                 cap estimates use "./output/tempdata/crude_`outcome'_eth" 
 65.                 cap lincom `eth'.eth5, eform
 66.                 file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4
> .2f (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub))
>  _tab
 67.                 cap estimates clear
 68.                 cap estimates use "./output/tempdata/model1_`outcome'_eth"
>  
 69.                 cap lincom `eth'.eth5, eform
 70.                 file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4
> .2f (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub))
>   _tab
 71.                 cap estimates clear
 72.                 cap estimates use "./output/tempdata/model2_`outcome'_eth"
>  
 73.                 cap lincom `eth'.eth5, eform
 74.                 file write tablecontent  %4.2f (r(estimate)) _tab ("(") %4
> .2f (r(lb)) (" - ") %4.2f (r(ub)) (")") _tab %4.2f (r(lb)) _tab %4.2f (r(ub))
>  _n
 75.                 cap estimates clear
 76.             }
 77.             else {
 78.                 file write tablecontent ("`period'") _tab ("`lab`eth''") _
> tab ("redact") _n
 79.                 continue
 80.             }
 81.         }  //end ethnic group
 82. drop total_follow_up
 83.     }
 84. else { 
 85.     file write tablecontent ("`period'") _tab ("redact") _n
 86.     continue
 87. }
 88. } //end outcomes

Contains data from ./output/prep_survival_pre.dta
  obs:         1,000                          
 vars:            46                          10 Aug 2022 09:10
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
self_harm_pri~n str10   %10s                  
stp             str4    %9s                   
age             int     %8.0g                 
ethnicity       byte    %8.0g                 
has_msoa        byte    %8.0g                 
imd             byte    %8.0g                 
shielded        byte    %8.0g                 
has_t1_diabetes byte    %8.0g                 
has_t2_diabetes byte    %8.0g                 
diabetes_subg~p byte    %8.0g                 
cvd_subgroup    byte    %8.0g                 
has_asthma      byte    %8.0g                 
has_copd        byte    %8.0g                 
resp_subgroup   byte    %8.0g                 
mh_subgroup     byte    %8.0g                 
urban_rural     byte    %8.0g                 
patient_id      int     %8.0g                 
dereg_dateA     float   %dD/N/CY              
mi_admit_date   float   %dD/N/CY              
stroke_admit_~e float   %dD/N/CY              
hf_admit_date   float   %dD/N/CY              
vte_admit_date  float   %dD/N/CY              
t1dm_admit_date float   %dD/N/CY              
t2dm_admit_date float   %dD/N/CY              
dm_keto_admit~e float   %dD/N/CY              
asthma_admit_~e float   %dD/N/CY              
depress_admit~e float   %dD/N/CY              
anx_admit_date  float   %dD/N/CY              
smi_admit_date  float   %dD/N/CY              
cvd_admit_date  float   %dD/N/CY              
dm_admit_date   float   %dD/N/CY              
copd_admit_date float   %dD/N/CY              
mh_admit_date   float   %dD/N/CY              
date_died       float   %dD/N/CY              
lrti_admit_date float   %dD/N/CY              
copd_any_date   float   %dD/N/CY              
lrti_copd       float   %9.0g                 
index_date      float   %dD/N/CY              
end_study       float   %dD/N/CY              
end_date        float   %dD/N/CY              
eth5            float   %11.0g     eth5       
male            float   %9.0g      male       
region          float   %24.0g     region     region of England
urban_rural_5   float   %27.0g     urban_rural_5
                                              Rural Urban in five categories
urban_rural_bin float   %9.0g      urban_rural_bin
                                              Rural-Urban
age_cat         float   %13.0g     age        
-------------------------------------------------------------------------------
Sorted by: 
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        916       91.60       91.60
          1 |         84        8.40      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  84
(84 real changes made)

                id:  patient_id
     failure event:  cvd_admit != 0 & cvd_admit < .
obs. time interval:  (cvd_end[_n-1], cvd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         84  failures in single-failure-per-subject data
    718,026  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =       752

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_cvd_pre_eth.svg not found)
(file ./output/graphs/km_cvd_pre_eth.svg written in SVG format)

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -9.8060952
Iteration 1:   log likelihood = -8.7833179
Iteration 2:   log likelihood = -8.5504959
Iteration 3:   log likelihood = -8.4760999
Iteration 4:   log likelihood = -8.4497642
Iteration 5:   log likelihood = -8.4402058
Iteration 6:   log likelihood = -8.4367067
Iteration 7:   log likelihood = -8.4354218
Iteration 8:   log likelihood = -8.4349494
Iteration 9:   log likelihood = -8.4347757
Iteration 10:  log likelihood = -8.4347118
Iteration 11:  log likelihood = -8.4346883
Iteration 12:  log likelihood = -8.4346796
Iteration 13:  log likelihood = -8.4346764
Iteration 14:  log likelihood = -8.4346753
Iteration 15:  log likelihood = -8.4346748
Iteration 16:  log likelihood = -8.4346747
Iteration 17:  log likelihood = -8.4346746
Iteration 18:  log likelihood = -8.4346746
Iteration 19:  log likelihood = -8.4346746
Iteration 20:  log likelihood = -8.4346746
Iteration 21:  log likelihood = -8.4346746
Iteration 22:  log likelihood = -8.4346746
Iteration 23:  log likelihood = -8.4346746
Iteration 24:  log likelihood = -8.4346746
Iteration 25:  log likelihood = -8.4346746
Iteration 26:  log likelihood = -8.4346746
Iteration 27:  log likelihood = -8.4346746
Iteration 28:  log likelihood = -8.4346746
Iteration 29:  log likelihood = -8.4346746
Iteration 30:  log likelihood = -8.4346746
Iteration 31:  log likelihood = -8.4346746
Iteration 32:  log likelihood = -8.4346746
Iteration 33:  log likelihood = -8.4346746
Iteration 34:  log likelihood = -8.4346746
Iteration 35:  log likelihood = -8.4346746
Refining estimates:
Iteration 0:   log likelihood = -8.4346746
Iteration 1:   log likelihood = -8.4346746

Stratified Cox regr. -- no ties

No. of subjects =        1,000                  Number of obs    =          50
No. of failures =           84
Time at risk    =       718026
                                                LR chi2(4)       =        2.74
Log likelihood  =   -8.4346746                  Prob > chi2      =      0.6017

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.01e-16   9.18e-09    -0.00   1.000            0           .
      Black  |   .6667641   .8632225    -0.31   0.754     .0527192    8.432875
      Mixed  |   .6740517    .852918    -0.31   0.755     .0564439    8.049511
      Other  |   7.82e-17   9.40e-09    -0.00   1.000            0           .
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/crude_cvd_eth.ster not found)
file ./output/tempdata/crude_cvd_eth.ster saved
(note: file ./output/tempdata/surv_crude_cvd_eth.dta not found)
file ./output/tempdata/surv_crude_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -8.7795575
Iteration 1:   log likelihood = -6.7427442
Iteration 2:   log likelihood = -6.3934369
Iteration 3:   log likelihood = -6.3022324
Iteration 4:   log likelihood = -6.2707644
Iteration 5:   log likelihood = -6.2593317
Iteration 6:   log likelihood = -6.2551454
Iteration 7:   log likelihood = -6.2536079
Iteration 8:   log likelihood = -6.2530427
Iteration 9:   log likelihood = -6.2528348
Iteration 10:  log likelihood = -6.2527583
Iteration 11:  log likelihood = -6.2527302
Iteration 12:  log likelihood = -6.2527198
Iteration 13:  log likelihood =  -6.252716
Iteration 14:  log likelihood = -6.2527146
Iteration 15:  log likelihood = -6.2527141
Iteration 16:  log likelihood = -6.2527139
Iteration 17:  log likelihood = -6.2527139
Iteration 18:  log likelihood = -6.2527138
Iteration 19:  log likelihood = -6.2527138
Iteration 20:  log likelihood = -6.2527138
Iteration 21:  log likelihood = -6.2527138
Iteration 22:  log likelihood = -6.2527138
Iteration 23:  log likelihood = -6.2527138
Iteration 24:  log likelihood = -6.2527138
Iteration 25:  log likelihood = -6.2527138
Iteration 26:  log likelihood = -6.2527138
Iteration 27:  log likelihood = -6.2527138
Iteration 28:  log likelihood = -6.2527138
Iteration 29:  log likelihood = -6.2527138
Iteration 30:  log likelihood = -6.2527138
Iteration 31:  log likelihood = -6.2527138
Iteration 32:  log likelihood = -6.2527138
Iteration 33:  log likelihood = -6.2527138
Iteration 34:  log likelihood = -6.2527138
Iteration 35:  log likelihood = -6.2527138
Iteration 36:  log likelihood = -6.2527138
Iteration 37:  log likelihood = -6.2527138
Iteration 38:  log likelihood = -6.2527138
Refining estimates:
Iteration 0:   log likelihood = -6.2527138
Iteration 1:   log likelihood = -6.2527138

Stratified Cox regr. -- no ties

No. of subjects =          788                  Number of obs    =          43
No. of failures =           65
Time at risk    =       568126
                                                LR chi2(8)       =        5.05
Log likelihood  =   -6.2527138                  Prob > chi2      =      0.7518

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   5.65e-18   3.47e-09    -0.00   1.000            0           .
      Black  |     .59224   .8235064    -0.38   0.706     .0388067    9.038341
      Mixed  |   2.026811   3.568718     0.40   0.688      .064277    63.91031
      Other  |   7.28e-18   4.56e-09    -0.00   1.000            0           .
             |
     age_cat |
41 - 60 y..  |   1.923964   2.635009     0.48   0.633     .1313454    28.18248
61 - 80 y..  |   8.06e-18   4.50e-09    -0.00   1.000            0           .
  >80 years  |   8.09e-18   4.74e-09    -0.00   1.000            0           .
             |
        male |
       Male  |   3.425221   5.474589     0.77   0.441     .1493476    78.55588
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/model1_cvd_eth.ster not found)
file ./output/tempdata/model1_cvd_eth.ster saved
(note: file ./output/tempdata/surv_model1_cvd_eth.dta not found)
file ./output/tempdata/surv_model1_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: 5.imd omitted because of collinearity
note: 1.shielded omitted because of collinearity
Iteration 0:   log likelihood = -8.7795575
Iteration 1:   log likelihood = -1.1317466
Iteration 2:   log likelihood = -.34100438
Iteration 3:   log likelihood = -.11948595
Iteration 4:   log likelihood = -.04306892
Iteration 5:   log likelihood =  -.0157109
Iteration 6:   log likelihood =  -.0057606
Iteration 7:   log likelihood = -.00211657
Iteration 8:   log likelihood = -.00077828
Iteration 9:   log likelihood = -.00028627
Iteration 10:  log likelihood =  -.0001053
Iteration 11:  log likelihood = -.00003874
Iteration 12:  log likelihood = -.00001425
Iteration 13:  log likelihood = -5.243e-06
Iteration 14:  log likelihood = -1.929e-06
Iteration 15:  log likelihood = -7.064e-07
Iteration 16:  log likelihood = -2.572e-07
Iteration 17:  log likelihood = -8.700e-08
Iteration 18:  log likelihood =  1.143e-07
Iteration 19:  log likelihood =  .00010081
Iteration 20:  log likelihood =   .0028443
Iteration 21:  log likelihood =  .03636699
Iteration 22:  log likelihood =  .35482072
Iteration 23:  log likelihood =  .35482072  (backed up)
Iteration 24:  log likelihood =  .35482072  (backed up)
Iteration 25:  log likelihood =  .35482072  (backed up)
Iteration 26:  log likelihood =  .35482072  (backed up)
Iteration 27:  log likelihood =  .35482072  (backed up)
Refining estimates:
Iteration 0:   log likelihood = -7.251e-09
Iteration 1:   log likelihood = -2.667e-09
Iteration 2:   log likelihood = -9.813e-10
Iteration 3:   log likelihood = -3.610e-10
Iteration 4:   log likelihood = -1.328e-10
Iteration 5:   log likelihood = -4.886e-11
Iteration 6:   log likelihood = -1.798e-11
Iteration 7:   log likelihood = -6.612e-12
Iteration 8:   log likelihood = -2.423e-12
Iteration 9:   log likelihood = -8.988e-13
Iteration 10:  log likelihood = -3.411e-13
Iteration 11:  log likelihood = -1.172e-13
Iteration 12:  log likelihood = -3.908e-14
Iteration 13:  log likelihood = -1.421e-14
Iteration 14:  log likelihood = -3.553e-15
Iteration 15:  log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =          788                  Number of obs    =          43
No. of failures =           65
Time at risk    =       568126
                                                LR chi2(12)      =       17.56
Log likelihood  =            0                  Prob > chi2      =      0.1297

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   8.34e-16   2.31e-06    -0.00   1.000            0           .
      Black  |   2.57e-20   3.85e-12    -0.00   1.000            0           .
      Mixed  |   6.31e-19   1.77e-09    -0.00   1.000            0           .
      Other  |   1.76e-30   1.04e-21    -0.00   1.000            0           .
             |
     age_cat |
41 - 60 y..  |   6.33e+11   2.23e+20     0.00   1.000            0           .
61 - 80 y..  |   .0000234   9123.059    -0.00   1.000            0           .
  >80 years  |   115.6512          .        .       .            .           .
             |
        male |
       Male  |   894.5266   3.33e+11     0.00   1.000            0           .
             |
urban_rura~n |
      Urban  |   3.93e+15   6.57e+23     0.00   1.000            0           .
             |
         imd |
          1  |   5.97e+13   1.69e+23     0.00   1.000            0           .
          2  |   7.56e+17   5.21e+26     0.00   1.000            0           .
          3  |   .3889961   1.19e+08    -0.00   1.000            0           .
          4  |   3.00e+35   8.36e+43     0.00   1.000            0           .
          5  |          1  (omitted)
             |
  1.shielded |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/tempdata/model2_cvd_eth.ster not found)
file ./output/tempdata/model2_cvd_eth.ster saved
(note: file ./output/tempdata/surv_model2_cvd_eth.dta not found)
file ./output/tempdata/surv_model2_cvd_eth.dta saved
(note: file ./output/tables/cvd_estout_table_eth_pre.txt not found)
(output written to ./output/tables/cvd_estout_table_eth_pre.txt)

Contains data from ./output/prep_survival_pandemic.dta
  obs:         1,000                          
 vars:            46                          10 Aug 2022 09:10
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
self_harm_pri~n str10   %10s                  
stp             str4    %9s                   
age             int     %8.0g                 
ethnicity       byte    %8.0g                 
has_msoa        byte    %8.0g                 
imd             byte    %8.0g                 
shielded        byte    %8.0g                 
has_t1_diabetes byte    %8.0g                 
has_t2_diabetes byte    %8.0g                 
diabetes_subg~p byte    %8.0g                 
cvd_subgroup    byte    %8.0g                 
has_asthma      byte    %8.0g                 
has_copd        byte    %8.0g                 
resp_subgroup   byte    %8.0g                 
mh_subgroup     byte    %8.0g                 
urban_rural     byte    %8.0g                 
patient_id      int     %8.0g                 
dereg_dateA     float   %dD/N/CY              
mi_admit_date   float   %dD/N/CY              
stroke_admit_~e float   %dD/N/CY              
hf_admit_date   float   %dD/N/CY              
vte_admit_date  float   %dD/N/CY              
t1dm_admit_date float   %dD/N/CY              
t2dm_admit_date float   %dD/N/CY              
dm_keto_admit~e float   %dD/N/CY              
asthma_admit_~e float   %dD/N/CY              
depress_admit~e float   %dD/N/CY              
anx_admit_date  float   %dD/N/CY              
smi_admit_date  float   %dD/N/CY              
cvd_admit_date  float   %dD/N/CY              
dm_admit_date   float   %dD/N/CY              
copd_admit_date float   %dD/N/CY              
mh_admit_date   float   %dD/N/CY              
date_died       float   %dD/N/CY              
lrti_admit_date float   %dD/N/CY              
copd_any_date   float   %dD/N/CY              
lrti_copd       float   %9.0g                 
index_date      float   %dD/N/CY              
end_study       float   %dD/N/CY              
end_date        float   %dD/N/CY              
eth5            float   %11.0g     eth5       
male            float   %9.0g      male       
region          float   %24.0g     region     region of England
urban_rural_5   float   %27.0g     urban_rural_5
                                              Rural Urban in five categories
urban_rural_bin float   %9.0g      urban_rural_bin
                                              Rural-Urban
age_cat         float   %13.0g     age        
-------------------------------------------------------------------------------
Sorted by: 
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        915       91.50       91.50
          1 |         85        8.50      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  85
(85 real changes made)

                id:  patient_id
     failure event:  cvd_admit != 0 & cvd_admit < .
obs. time interval:  (cvd_end[_n-1], cvd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         85  failures in single-failure-per-subject data
    704,848  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =       768

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_cvd_pandemic_eth.svg not found)
(file ./output/graphs/km_cvd_pandemic_eth.svg written in SVG format)

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -17.141295
Iteration 1:   log likelihood = -15.791332
Iteration 2:   log likelihood =  -15.51556
Iteration 3:   log likelihood =  -15.43026
Iteration 4:   log likelihood =  -15.39964
Iteration 5:   log likelihood =  -15.38847
Iteration 6:   log likelihood = -15.384374
Iteration 7:   log likelihood = -15.382869
Iteration 8:   log likelihood = -15.382315
Iteration 9:   log likelihood = -15.382112
Iteration 10:  log likelihood = -15.382037
Iteration 11:  log likelihood = -15.382009
Iteration 12:  log likelihood = -15.381999
Iteration 13:  log likelihood = -15.381995
Iteration 14:  log likelihood = -15.381994
Iteration 15:  log likelihood = -15.381993
Iteration 16:  log likelihood = -15.381993
Iteration 17:  log likelihood = -15.381993
Iteration 18:  log likelihood = -15.381993
Iteration 19:  log likelihood = -15.381993
Iteration 20:  log likelihood = -15.381993
Iteration 21:  log likelihood = -15.381993
Iteration 22:  log likelihood = -15.381993
Iteration 23:  log likelihood = -15.381993
Iteration 24:  log likelihood = -15.381993
Iteration 25:  log likelihood = -15.381993
Iteration 26:  log likelihood = -15.381993
Iteration 27:  log likelihood = -15.381993
Iteration 28:  log likelihood = -15.381993
Iteration 29:  log likelihood = -15.381993
Iteration 30:  log likelihood = -15.381993
Iteration 31:  log likelihood = -15.381993
Iteration 32:  log likelihood = -15.381993
Iteration 33:  log likelihood = -15.381993
Iteration 34:  log likelihood = -15.381993
Iteration 35:  log likelihood = -15.381993
Iteration 36:  log likelihood = -15.381993
Iteration 37:  log likelihood = -15.381993
Iteration 38:  log likelihood = -15.381993
Iteration 39:  log likelihood = -15.381993
Iteration 40:  log likelihood = -15.381993
Iteration 41:  log likelihood = -15.381993
Iteration 42:  log likelihood = -15.381993
Iteration 43:  log likelihood = -15.381993
Refining estimates:
Iteration 0:   log likelihood = -15.381993
Iteration 1:   log likelihood = -15.381993

Stratified Cox regr. -- no ties

No. of subjects =        1,000                  Number of obs    =          50
No. of failures =           85
Time at risk    =       704848
                                                LR chi2(3)       =        3.52
Log likelihood  =   -15.381993                  Prob > chi2      =      0.3184

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .3688788   .4572864    -0.80   0.421     .0324846    4.188796
      Black  |   3.18e-20          .        .       .            .           .
      Mixed  |   .6075077   .7465212    -0.41   0.685     .0546479    6.753522
      Other  |   .7742667   .7758305    -0.26   0.798      .108635    5.518375
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_cvd_eth.ster saved
file ./output/tempdata/surv_crude_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =  -11.17128
Iteration 1:   log likelihood = -6.9176937
Iteration 2:   log likelihood = -6.5100411
Iteration 3:   log likelihood = -5.9558487
Iteration 4:   log likelihood = -5.9208635
Iteration 5:   log likelihood = -5.9128544
Iteration 6:   log likelihood = -5.9099253
Iteration 7:   log likelihood = -5.9088484
Iteration 8:   log likelihood = -5.9084523
Iteration 9:   log likelihood = -5.9083066
Iteration 10:  log likelihood =  -5.908253
Iteration 11:  log likelihood = -5.9082333
Iteration 12:  log likelihood =  -5.908226
Iteration 13:  log likelihood = -5.9082234
Iteration 14:  log likelihood = -5.9082224
Iteration 15:  log likelihood =  -5.908222
Iteration 16:  log likelihood = -5.9082219
Iteration 17:  log likelihood = -5.9082218
Iteration 18:  log likelihood = -5.9082218
Iteration 19:  log likelihood = -5.9082218
Iteration 20:  log likelihood = -5.9082218
Iteration 21:  log likelihood = -5.9082218
Iteration 22:  log likelihood = -5.9082218
Iteration 23:  log likelihood = -5.9082218
Iteration 24:  log likelihood = -5.9082218
Iteration 25:  log likelihood = -5.9082218
Iteration 26:  log likelihood = -5.9082218
Iteration 27:  log likelihood = -5.9082218
Iteration 28:  log likelihood = -5.9082218
Iteration 29:  log likelihood = -5.9082218
Iteration 30:  log likelihood = -5.9082218
Iteration 31:  log likelihood = -5.9082218
Iteration 32:  log likelihood = -5.9082218
Iteration 33:  log likelihood = -5.9082218
Iteration 34:  log likelihood = -5.9082218
Iteration 35:  log likelihood = -5.9082218
Refining estimates:
Iteration 0:   log likelihood = -5.9082218
Iteration 1:   log likelihood = -5.9082218
Iteration 2:   log likelihood = -5.9082218
Iteration 3:   log likelihood = -5.9082218
Iteration 4:   log likelihood = -5.9082218

Stratified Cox regr. -- no ties

No. of subjects =          790                  Number of obs    =          37
No. of failures =           61
Time at risk    =       561002
                                                LR chi2(8)       =       10.53
Log likelihood  =   -5.9082218                  Prob > chi2      =      0.2300

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.17e-18   5.69e-10    -0.00   1.000            0           .
      Black  |   4.38e-19   2.85e-10    -0.00   1.000            0           .
      Mixed  |   .5553261   .8397784    -0.39   0.697     .0286642    10.75863
      Other  |   .1360355    .244608    -1.11   0.267     .0040095    4.615441
             |
     age_cat |
41 - 60 y..  |   3.684413   6.368567     0.75   0.451     .1244666    109.0646
61 - 80 y..  |   22.38629   37.98133     1.83   0.067     .8050173    622.5284
  >80 years  |   3.68e-17   3.18e-08    -0.00   1.000            0           .
             |
        male |
       Male  |   1.636347   2.528419     0.32   0.750     .0791831    33.81569
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model1_cvd_eth.ster saved
file ./output/tempdata/surv_model1_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: 1.shielded omitted because of collinearity
Iteration 0:   log likelihood =  -11.17128
Iteration 1:   log likelihood = -5.9155496
Iteration 2:   log likelihood = -5.0480402
Iteration 3:   log likelihood = -4.3219907
Iteration 4:   log likelihood = -4.2107668
Iteration 5:   log likelihood = -4.1759885
Iteration 6:   log likelihood = -4.1627905
Iteration 7:   log likelihood =  -4.157841
Iteration 8:   log likelihood = -4.1559989
Iteration 9:   log likelihood = -4.1553166
Iteration 10:  log likelihood = -4.1550646
Iteration 11:  log likelihood = -4.1549716
Iteration 12:  log likelihood = -4.1549373
Iteration 13:  log likelihood = -4.1549247
Iteration 14:  log likelihood = -4.1549201
Iteration 15:  log likelihood = -4.1549184
Iteration 16:  log likelihood = -4.1549177
Iteration 17:  log likelihood = -4.1549175
Iteration 18:  log likelihood = -4.1549174
Iteration 19:  log likelihood = -4.1549174
Iteration 20:  log likelihood = -4.1549174
Iteration 21:  log likelihood = -4.1549174
Iteration 22:  log likelihood = -4.1549174
Iteration 23:  log likelihood = -4.1549174
Iteration 24:  log likelihood = -4.1549174
Iteration 25:  log likelihood = -4.1549174
Iteration 26:  log likelihood = -4.1549174
Iteration 27:  log likelihood = -4.1549174
Iteration 28:  log likelihood = -4.1549174
Iteration 29:  log likelihood = -4.1549174
Iteration 30:  log likelihood = -4.1549174
Iteration 31:  log likelihood = -4.1549174
Iteration 32:  log likelihood = -4.1549174
Iteration 33:  log likelihood = -4.1549174
Iteration 34:  log likelihood = -4.1549174
Iteration 35:  log likelihood = -4.1549174
Iteration 36:  log likelihood = -4.1549174
Refining estimates:
Iteration 0:   log likelihood = -4.1549174
Iteration 1:   log likelihood = -4.1549174

Stratified Cox regr. -- no ties

No. of subjects =          790                  Number of obs    =          37
No. of failures =           61
Time at risk    =       561002
                                                LR chi2(9)       =       14.03
Log likelihood  =   -4.1549174                  Prob > chi2      =      0.1212

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   5.05e-22   6.30e-14    -0.00   1.000            0           .
      Black  |   2.58e-23   5.22e-15    -0.00   1.000            0           .
      Mixed  |   5.91e-10          .        .       .            .           .
      Other  |   2.193303          .        .       .            .           .
             |
     age_cat |
41 - 60 y..  |   .0008394   .0018266    -3.25   0.001     .0000118    .0597352
61 - 80 y..  |    2707595    5178212     7.74   0.000     63779.42    1.15e+08
  >80 years  |   5.14e-17   2.41e-08    -0.00   1.000            0           .
             |
        male |
       Male  |   8646.915   16537.02     4.74   0.000     203.6846      367083
             |
urban_rura~n |
      Urban  |   6.73e-07          .        .       .            .           .
             |
         imd |
          1  |   .0004242   .0007484    -4.40   0.000     .0000134    .0134725
          2  |   154.4044          .        .       .            .           .
          3  |   .0001974          .        .       .            .           .
          4  |   3.45e-18   5.35e-10    -0.00   1.000            0           .
          5  |   6.70e-18   1.18e-09    -0.00   1.000            0           .
             |
  1.shielded |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model2_cvd_eth.ster saved
file ./output/tempdata/surv_model2_cvd_eth.dta saved
(note: file ./output/tables/cvd_estout_table_eth_pandemic.txt not found)
(output written to ./output/tables/cvd_estout_table_eth_pandemic.txt)

Contains data from ./output/prep_survival_wave1.dta
  obs:         1,000                          
 vars:            46                          10 Aug 2022 09:10
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
self_harm_pri~n str10   %10s                  
stp             str4    %9s                   
age             byte    %8.0g                 
ethnicity       byte    %8.0g                 
has_msoa        byte    %8.0g                 
imd             byte    %8.0g                 
shielded        byte    %8.0g                 
has_t1_diabetes byte    %8.0g                 
has_t2_diabetes byte    %8.0g                 
diabetes_subg~p byte    %8.0g                 
cvd_subgroup    byte    %8.0g                 
has_asthma      byte    %8.0g                 
has_copd        byte    %8.0g                 
resp_subgroup   byte    %8.0g                 
mh_subgroup     byte    %8.0g                 
urban_rural     byte    %8.0g                 
patient_id      int     %8.0g                 
dereg_dateA     float   %dD/N/CY              
mi_admit_date   float   %dD/N/CY              
stroke_admit_~e float   %dD/N/CY              
hf_admit_date   float   %dD/N/CY              
vte_admit_date  float   %dD/N/CY              
t1dm_admit_date float   %dD/N/CY              
t2dm_admit_date float   %dD/N/CY              
dm_keto_admit~e float   %dD/N/CY              
asthma_admit_~e float   %dD/N/CY              
depress_admit~e float   %dD/N/CY              
anx_admit_date  float   %dD/N/CY              
smi_admit_date  float   %dD/N/CY              
cvd_admit_date  float   %dD/N/CY              
dm_admit_date   float   %dD/N/CY              
copd_admit_date float   %dD/N/CY              
mh_admit_date   float   %dD/N/CY              
date_died       float   %dD/N/CY              
lrti_admit_date float   %dD/N/CY              
copd_any_date   float   %dD/N/CY              
lrti_copd       float   %9.0g                 
index_date      float   %dD/N/CY              
end_study       float   %dD/N/CY              
end_date        float   %dD/N/CY              
eth5            float   %11.0g     eth5       
male            float   %9.0g      male       
region          float   %24.0g     region     region of England
urban_rural_5   float   %27.0g     urban_rural_5
                                              Rural Urban in five categories
urban_rural_bin float   %9.0g      urban_rural_bin
                                              Rural-Urban
age_cat         float   %13.0g     age        
-------------------------------------------------------------------------------
Sorted by: 
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        991       99.10       99.10
          1 |          9        0.90      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  9

Contains data from ./output/prep_survival_easing1.dta
  obs:         1,000                          
 vars:            46                          10 Aug 2022 09:10
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
self_harm_pri~n str10   %10s                  
stp             str4    %9s                   
age             int     %8.0g                 
ethnicity       byte    %8.0g                 
has_msoa        byte    %8.0g                 
imd             byte    %8.0g                 
shielded        byte    %8.0g                 
has_t1_diabetes byte    %8.0g                 
has_t2_diabetes byte    %8.0g                 
diabetes_subg~p byte    %8.0g                 
cvd_subgroup    byte    %8.0g                 
has_asthma      byte    %8.0g                 
has_copd        byte    %8.0g                 
resp_subgroup   byte    %8.0g                 
mh_subgroup     byte    %8.0g                 
urban_rural     byte    %8.0g                 
patient_id      int     %8.0g                 
dereg_dateA     float   %dD/N/CY              
mi_admit_date   float   %dD/N/CY              
stroke_admit_~e float   %dD/N/CY              
hf_admit_date   float   %dD/N/CY              
vte_admit_date  float   %dD/N/CY              
t1dm_admit_date float   %dD/N/CY              
t2dm_admit_date float   %dD/N/CY              
dm_keto_admit~e float   %dD/N/CY              
asthma_admit_~e float   %dD/N/CY              
depress_admit~e float   %dD/N/CY              
anx_admit_date  float   %dD/N/CY              
smi_admit_date  float   %dD/N/CY              
cvd_admit_date  float   %dD/N/CY              
dm_admit_date   float   %dD/N/CY              
copd_admit_date float   %dD/N/CY              
mh_admit_date   float   %dD/N/CY              
date_died       float   %dD/N/CY              
lrti_admit_date float   %dD/N/CY              
copd_any_date   float   %dD/N/CY              
lrti_copd       float   %9.0g                 
index_date      float   %dD/N/CY              
end_study       float   %dD/N/CY              
end_date        float   %dD/N/CY              
eth5            float   %11.0g     eth5       
male            float   %9.0g      male       
region          float   %24.0g     region     region of England
urban_rural_5   float   %27.0g     urban_rural_5
                                              Rural Urban in five categories
urban_rural_bin float   %9.0g      urban_rural_bin
                                              Rural-Urban
age_cat         float   %13.0g     age        
-------------------------------------------------------------------------------
Sorted by: 
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        988       98.80       98.80
          1 |         12        1.20      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  12
(12 real changes made)

                id:  patient_id
     failure event:  cvd_admit != 0 & cvd_admit < .
obs. time interval:  (cvd_end[_n-1], cvd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         12  failures in single-failure-per-subject data
     96,841  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =        98

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_cvd_easing1_eth.svg not found)
(file ./output/graphs/km_cvd_easing1_eth.svg written in SVG format)

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -3.2580965
Iteration 1:   log likelihood = -1.3945293
Iteration 2:   log likelihood = -1.3893067
Iteration 3:   log likelihood = -1.3874003
Iteration 4:   log likelihood = -1.3867009
Iteration 5:   log likelihood = -1.3864439
Iteration 6:   log likelihood = -1.3863494
Iteration 7:   log likelihood = -1.3863146
Iteration 8:   log likelihood = -1.3863018
Iteration 9:   log likelihood = -1.3862971
Iteration 10:  log likelihood = -1.3862954
Iteration 11:  log likelihood = -1.3862947
Iteration 12:  log likelihood = -1.3862945
Iteration 13:  log likelihood = -1.3862944
Iteration 14:  log likelihood = -1.3862944
Iteration 15:  log likelihood = -1.3862944
Iteration 16:  log likelihood = -1.3862944
Iteration 17:  log likelihood = -1.3862944
Iteration 18:  log likelihood = -1.3862944
Iteration 19:  log likelihood = -1.3862944
Iteration 20:  log likelihood = -1.3862944
Iteration 21:  log likelihood = -1.3862944
Iteration 22:  log likelihood = -1.3862944
Iteration 23:  log likelihood = -1.3862944
Iteration 24:  log likelihood = -1.3862944
Iteration 25:  log likelihood = -1.3862944
Iteration 26:  log likelihood = -1.3862944
Iteration 27:  log likelihood = -1.3862944
Iteration 28:  log likelihood = -1.3862944
Iteration 29:  log likelihood = -1.3862944
Iteration 30:  log likelihood = -1.3862944
Refining estimates:
Iteration 0:   log likelihood = -1.3862944
Iteration 1:   log likelihood = -1.3862944

Stratified Cox regr. -- no ties

No. of subjects =        1,000                  Number of obs    =          50
No. of failures =           12
Time at risk    =        96841
                                                LR chi2(4)       =        3.74
Log likelihood  =   -1.3862944                  Prob > chi2      =      0.4418

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   7.20e+15   6.85e+23     0.00   1.000            0           .
      Black  |          1   1.18e+08    -0.00   1.000            0           .
      Mixed  |          1   1.15e+08    -0.00   1.000            0           .
      Other  |          1   1.37e+08    -0.00   1.000            0           .
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_cvd_eth.ster saved
file ./output/tempdata/surv_crude_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -3.1780538
Iteration 1:   log likelihood = -.70742698
Iteration 2:   log likelihood = -.69840681
Iteration 3:   log likelihood = -.69508558
Iteration 4:   log likelihood = -.69386104
Iteration 5:   log likelihood = -.69340992
Iteration 6:   log likelihood = -.69324386
Iteration 7:   log likelihood = -.69318275
Iteration 8:   log likelihood = -.69316027
Iteration 9:   log likelihood = -.69315199
Iteration 10:  log likelihood = -.69314895
Iteration 11:  log likelihood = -.69314783
Iteration 12:  log likelihood = -.69314742
Iteration 13:  log likelihood = -.69314727
Iteration 14:  log likelihood = -.69314721
Iteration 15:  log likelihood = -.69314719
Iteration 16:  log likelihood = -.69314718
Iteration 17:  log likelihood = -.69314718
Iteration 18:  log likelihood = -.69314718
Iteration 19:  log likelihood = -.69314718
Iteration 20:  log likelihood = -.69314718
Iteration 21:  log likelihood = -.69314718
Iteration 22:  log likelihood = -.69314718
Iteration 23:  log likelihood = -.69314718
Iteration 24:  log likelihood = -.69314718
Iteration 25:  log likelihood = -.69314718
Iteration 26:  log likelihood = -.69314718
Iteration 27:  log likelihood = -.69314718
Iteration 28:  log likelihood = -.69314718
Iteration 29:  log likelihood = -.69314718
Iteration 30:  log likelihood = -.69314718
Iteration 31:  log likelihood = -.69314718
Refining estimates:
Iteration 0:   log likelihood = -.69314718
Iteration 1:   log likelihood = -.69314718

Stratified Cox regr. -- no ties

No. of subjects =          793                  Number of obs    =          43
No. of failures =            7
Time at risk    =        77000
                                                LR chi2(4)       =        4.97
Log likelihood  =   -.69314718                  Prob > chi2      =      0.2904

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   183.2808   2.30e+10     0.00   1.000            0           .
      Black  |    3.03141          .        .       .            .           .
      Mixed  |   9.71e-14   .0000182    -0.00   1.000            0           .
      Other  |   2.85e-14   4.82e-06    -0.00   1.000            0           .
             |
     age_cat |
41 - 60 y..  |   15.06495          .        .       .            .           .
61 - 80 y..  |   3.43e+15   2.78e+23     0.00   1.000            0           .
  >80 years  |          1  (omitted)
             |
        male |
       Male  |   15.44339          .        .       .            .           .
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model1_cvd_eth.ster saved
file ./output/tempdata/surv_model1_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: 1.shielded omitted because of collinearity
Iteration 0:   log likelihood = -3.1780538
Iteration 1:   log likelihood = -.00109544
Iteration 2:   log likelihood =  -.0004044
Iteration 3:   log likelihood = -.00014911
Iteration 4:   log likelihood = -.00005494
Iteration 5:   log likelihood = -.00002023
Iteration 6:   log likelihood = -7.449e-06
Iteration 7:   log likelihood = -2.742e-06
Iteration 8:   log likelihood = -1.010e-06
Iteration 9:   log likelihood = -3.716e-07
Iteration 10:  log likelihood = -1.368e-07
Iteration 11:  log likelihood = -5.033e-08
Iteration 12:  log likelihood = -1.852e-08
Iteration 13:  log likelihood = -6.816e-09
Iteration 14:  log likelihood = -2.508e-09
Iteration 15:  log likelihood = -9.228e-10
Iteration 16:  log likelihood = -3.396e-10
Iteration 17:  log likelihood = -1.249e-10
Iteration 18:  log likelihood = -4.597e-11
Iteration 19:  log likelihood = -1.691e-11
Iteration 20:  log likelihood = -6.224e-12
Iteration 21:  log likelihood = -2.288e-12
Iteration 22:  log likelihood = -8.455e-13
Iteration 23:  log likelihood = -3.126e-13
Iteration 24:  log likelihood = -1.137e-13
Iteration 25:  log likelihood = -4.263e-14
Iteration 26:  log likelihood = -1.421e-14
Iteration 27:  log likelihood = -7.105e-15
Iteration 28:  log likelihood =          0
Refining estimates:
Iteration 0:   log likelihood =          0
Iteration 1:   log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =          793                  Number of obs    =          43
No. of failures =            7
Time at risk    =        77000
                                                LR chi2(9)       =        6.36
Log likelihood  =            0                  Prob > chi2      =      0.7038

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   1.59e+23   2.23e+31     0.00   1.000            0           .
      Black  |   2.46e+14          .        .       .            .           .
      Mixed  |   1.11e+13   2.89e+21     0.00   1.000            0           .
      Other  |   8.65e+20   8.51e+29     0.00   1.000            0           .
             |
     age_cat |
41 - 60 y..  |   7.89e+07          .        .       .            .           .
61 - 80 y..  |   1.60e+07   1.68e+15     0.00   1.000            0           .
  >80 years  |          1  (omitted)
             |
        male |
       Male  |   4.09e-12          .        .       .            .           .
             |
urban_rura~n |
      Urban  |   3.23e+08   3.42e+16     0.00   1.000            0           .
             |
         imd |
          1  |   1.52e-10   .0592313    -0.00   1.000            0           .
          2  |   4.47e-12          .        .       .            .           .
          3  |   .0000575    8872.18    -0.00   1.000            0           .
          4  |   2.62e-14   4.98e-06    -0.00   1.000            0           .
          5  |   5.74e-19   5.77e-10    -0.00   1.000            0           .
             |
  1.shielded |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model2_cvd_eth.ster saved
file ./output/tempdata/surv_model2_cvd_eth.dta saved
(note: file ./output/tables/cvd_estout_table_eth_easing1.txt not found)
(output written to ./output/tables/cvd_estout_table_eth_easing1.txt)

Contains data from ./output/prep_survival_wave2.dta
  obs:         1,000                          
 vars:            46                          10 Aug 2022 09:10
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
self_harm_pri~n str10   %10s                  
stp             str4    %9s                   
age             byte    %8.0g                 
ethnicity       byte    %8.0g                 
has_msoa        byte    %8.0g                 
imd             byte    %8.0g                 
shielded        byte    %8.0g                 
has_t1_diabetes byte    %8.0g                 
has_t2_diabetes byte    %8.0g                 
diabetes_subg~p byte    %8.0g                 
cvd_subgroup    byte    %8.0g                 
has_asthma      byte    %8.0g                 
has_copd        byte    %8.0g                 
resp_subgroup   byte    %8.0g                 
mh_subgroup     byte    %8.0g                 
urban_rural     byte    %8.0g                 
patient_id      int     %8.0g                 
dereg_dateA     float   %dD/N/CY              
mi_admit_date   float   %dD/N/CY              
stroke_admit_~e float   %dD/N/CY              
hf_admit_date   float   %dD/N/CY              
vte_admit_date  float   %dD/N/CY              
t1dm_admit_date float   %dD/N/CY              
t2dm_admit_date float   %dD/N/CY              
dm_keto_admit~e float   %dD/N/CY              
asthma_admit_~e float   %dD/N/CY              
depress_admit~e float   %dD/N/CY              
anx_admit_date  float   %dD/N/CY              
smi_admit_date  float   %dD/N/CY              
cvd_admit_date  float   %dD/N/CY              
dm_admit_date   float   %dD/N/CY              
copd_admit_date float   %dD/N/CY              
mh_admit_date   float   %dD/N/CY              
date_died       float   %dD/N/CY              
lrti_admit_date float   %dD/N/CY              
copd_any_date   float   %dD/N/CY              
lrti_copd       float   %9.0g                 
index_date      float   %dD/N/CY              
end_study       float   %dD/N/CY              
end_date        float   %dD/N/CY              
eth5            float   %11.0g     eth5       
male            float   %9.0g      male       
region          float   %24.0g     region     region of England
urban_rural_5   float   %27.0g     urban_rural_5
                                              Rural Urban in five categories
urban_rural_bin float   %9.0g      urban_rural_bin
                                              Rural-Urban
age_cat         float   %13.0g     age        
-------------------------------------------------------------------------------
Sorted by: 
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        972       97.20       97.20
          1 |         28        2.80      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  28
(28 real changes made)

                id:  patient_id
     failure event:  cvd_admit != 0 & cvd_admit < .
obs. time interval:  (cvd_end[_n-1], cvd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         28  failures in single-failure-per-subject data
    223,189  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =       229

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_cvd_wave2_eth.svg not found)
(file ./output/graphs/km_cvd_wave2_eth.svg written in SVG format)

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -3.0910425
Iteration 1:   log likelihood = -1.4045178
Iteration 2:   log likelihood = -1.3929146
Iteration 3:   log likelihood = -1.3887188
Iteration 4:   log likelihood = -1.3871848
Iteration 5:   log likelihood = -1.3866217
Iteration 6:   log likelihood = -1.3864148
Iteration 7:   log likelihood = -1.3863387
Iteration 8:   log likelihood = -1.3863107
Iteration 9:   log likelihood = -1.3863004
Iteration 10:  log likelihood = -1.3862966
Iteration 11:  log likelihood = -1.3862952
Iteration 12:  log likelihood = -1.3862947
Iteration 13:  log likelihood = -1.3862945
Iteration 14:  log likelihood = -1.3862944
Iteration 15:  log likelihood = -1.3862944
Iteration 16:  log likelihood = -1.3862944
Iteration 17:  log likelihood = -1.3862944
Iteration 18:  log likelihood = -1.3862944
Iteration 19:  log likelihood = -1.3862944
Iteration 20:  log likelihood = -1.3862944
Iteration 21:  log likelihood = -1.3862944
Iteration 22:  log likelihood = -1.3862944
Iteration 23:  log likelihood = -1.3862944
Iteration 24:  log likelihood = -1.3862944
Iteration 25:  log likelihood = -1.3862944
Iteration 26:  log likelihood = -1.3862944
Iteration 27:  log likelihood = -1.3862944
Iteration 28:  log likelihood = -1.3862944
Iteration 29:  log likelihood = -1.3862944
Iteration 30:  log likelihood = -1.3862944
Iteration 31:  log likelihood = -1.3862944
Refining estimates:
Iteration 0:   log likelihood = -1.3862944
Iteration 1:   log likelihood = -1.3862944

Stratified Cox regr. -- no ties

No. of subjects =        1,000                  Number of obs    =          50
No. of failures =           28
Time at risk    =       223189
                                                LR chi2(4)       =        3.41
Log likelihood  =   -1.3862944                  Prob > chi2      =      0.4918

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |          1   1.07e+08    -0.00   1.000            0           .
      Black  |          1   1.24e+08    -0.00   1.000            0           .
      Mixed  |   7.32e+15   5.46e+23     0.00   1.000            0           .
      Other  |          1   1.24e+08    -0.00   1.000            0           .
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_cvd_eth.ster saved
file ./output/tempdata/surv_crude_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood = -2.8903718
Iteration 1:   log likelihood = -.75475224
Iteration 2:   log likelihood = -.71510107
Iteration 3:   log likelihood = -.70113375
Iteration 4:   log likelihood =  -.6960734
Iteration 5:   log likelihood = -.69422208
Iteration 6:   log likelihood =  -.6935424
Iteration 7:   log likelihood = -.69329254
Iteration 8:   log likelihood = -.69320065
Iteration 9:   log likelihood = -.69316685
Iteration 10:  log likelihood = -.69315442
Iteration 11:  log likelihood = -.69314984
Iteration 12:  log likelihood = -.69314816
Iteration 13:  log likelihood = -.69314754
Iteration 14:  log likelihood = -.69314731
Iteration 15:  log likelihood = -.69314723
Iteration 16:  log likelihood =  -.6931472
Iteration 17:  log likelihood = -.69314719
Iteration 18:  log likelihood = -.69314718
Iteration 19:  log likelihood = -.69314718
Iteration 20:  log likelihood = -.69314718
Iteration 21:  log likelihood = -.69314718
Iteration 22:  log likelihood = -.69314718
Iteration 23:  log likelihood = -.69314718
Iteration 24:  log likelihood = -.69314718
Iteration 25:  log likelihood = -.69314718
Iteration 26:  log likelihood = -.69314718
Iteration 27:  log likelihood = -.69314718
Iteration 28:  log likelihood = -.69314718
Iteration 29:  log likelihood = -.69314718
Iteration 30:  log likelihood = -.69314718
Iteration 31:  log likelihood = -.69314718
Iteration 32:  log likelihood = -.69314718
Iteration 33:  log likelihood = -.69314718
Refining estimates:
Iteration 0:   log likelihood = -.69314718
Iteration 1:   log likelihood = -.69314718

Stratified Cox regr. -- no ties

No. of subjects =          783                  Number of obs    =          43
No. of failures =           22
Time at risk    =       174629
                                                LR chi2(7)       =        4.39
Log likelihood  =   -.69314718                  Prob > chi2      =      0.7334

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   2.214655   3.62e+08     0.00   1.000            0           .
      Black  |   .6947605   2.51e+08    -0.00   1.000            0           .
      Mixed  |   3.79e+16          .        .       .            .           .
      Other  |   .6025167   3.07e+08    -0.00   1.000            0           .
             |
     age_cat |
41 - 60 y..  |   .4320582   1.31e+08    -0.00   1.000            0           .
61 - 80 y..  |   1.64e-16   1.28e-08    -0.00   1.000            0           .
  >80 years  |   .6025167   3.07e+08    -0.00   1.000            0           .
             |
        male |
       Male  |   .5759496   1.17e+08    -0.00   1.000            0           .
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model1_cvd_eth.ster saved
file ./output/tempdata/surv_model1_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: 1.shielded omitted because of collinearity
Iteration 0:   log likelihood = -2.8903718
Iteration 1:   log likelihood = -4.298e-06
Iteration 2:   log likelihood = -1.585e-06
Iteration 3:   log likelihood = -5.838e-07
Iteration 4:   log likelihood = -2.150e-07
Iteration 5:   log likelihood = -7.917e-08
Iteration 6:   log likelihood = -2.914e-08
Iteration 7:   log likelihood = -1.072e-08
Iteration 8:   log likelihood = -3.945e-09
Iteration 9:   log likelihood = -1.451e-09
Iteration 10:  log likelihood = -5.339e-10
Iteration 11:  log likelihood = -1.964e-10
Iteration 12:  log likelihood = -7.226e-11
Iteration 13:  log likelihood = -2.658e-11
Iteration 14:  log likelihood = -9.777e-12
Iteration 15:  log likelihood = -3.595e-12
Iteration 16:  log likelihood = -1.322e-12
Iteration 17:  log likelihood = -4.903e-13
Iteration 18:  log likelihood = -1.776e-13
Iteration 19:  log likelihood = -6.395e-14
Iteration 20:  log likelihood = -2.132e-14
Iteration 21:  log likelihood = -1.421e-14
Iteration 22:  log likelihood =          0
Refining estimates:
Iteration 0:   log likelihood =          0
Iteration 1:   log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =          783                  Number of obs    =          43
No. of failures =           22
Time at risk    =       174629
                                                LR chi2(11)      =        5.78
Log likelihood  =            0                  Prob > chi2      =      0.8876

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |   .0213209          .        .       .            .           .
      Black  |   .1663893   3.81e+07    -0.00   1.000            0           .
      Mixed  |   1.007717   1.13e+08     0.00   1.000            0           .
      Other  |   5.74e-17   1.37e-08    -0.00   1.000            0           .
             |
     age_cat |
41 - 60 y..  |    50.8241   1.05e+10     0.00   1.000            0           .
61 - 80 y..  |   .3971043   4.82e+07    -0.00   1.000            0           .
  >80 years  |    .114923   3.17e+07    -0.00   1.000            0           .
             |
        male |
       Male  |    94.2215   3.73e+10     0.00   1.000            0           .
             |
urban_rura~n |
      Urban  |   2.38e+15   3.08e+23     0.00   1.000            0           .
             |
         imd |
          1  |   5.59e+13   6.59e+21     0.00   1.000            0           .
          2  |   2.95e+11   1.25e+20     0.00   1.000            0           .
          3  |   4.94e+12          .        .       .            .           .
          4  |   .5128346          .        .       .            .           .
          5  |   .0001473   83584.49    -0.00   1.000            0           .
             |
  1.shielded |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model2_cvd_eth.ster saved
file ./output/tempdata/surv_model2_cvd_eth.dta saved
(note: file ./output/tables/cvd_estout_table_eth_wave2.txt not found)
(output written to ./output/tables/cvd_estout_table_eth_wave2.txt)

Contains data from ./output/prep_survival_easing2.dta
  obs:         1,000                          
 vars:            46                          10 Aug 2022 09:10
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
self_harm_pri~n str10   %10s                  
stp             str4    %9s                   
age             byte    %8.0g                 
ethnicity       byte    %8.0g                 
has_msoa        byte    %8.0g                 
imd             byte    %8.0g                 
shielded        byte    %8.0g                 
has_t1_diabetes byte    %8.0g                 
has_t2_diabetes byte    %8.0g                 
diabetes_subg~p byte    %8.0g                 
cvd_subgroup    byte    %8.0g                 
has_asthma      byte    %8.0g                 
has_copd        byte    %8.0g                 
resp_subgroup   byte    %8.0g                 
mh_subgroup     byte    %8.0g                 
urban_rural     byte    %8.0g                 
patient_id      int     %8.0g                 
dereg_dateA     float   %dD/N/CY              
mi_admit_date   float   %dD/N/CY              
stroke_admit_~e float   %dD/N/CY              
hf_admit_date   float   %dD/N/CY              
vte_admit_date  float   %dD/N/CY              
t1dm_admit_date float   %dD/N/CY              
t2dm_admit_date float   %dD/N/CY              
dm_keto_admit~e float   %dD/N/CY              
asthma_admit_~e float   %dD/N/CY              
depress_admit~e float   %dD/N/CY              
anx_admit_date  float   %dD/N/CY              
smi_admit_date  float   %dD/N/CY              
cvd_admit_date  float   %dD/N/CY              
dm_admit_date   float   %dD/N/CY              
copd_admit_date float   %dD/N/CY              
mh_admit_date   float   %dD/N/CY              
date_died       float   %dD/N/CY              
lrti_admit_date float   %dD/N/CY              
copd_any_date   float   %dD/N/CY              
lrti_copd       float   %9.0g                 
index_date      float   %dD/N/CY              
end_study       float   %dD/N/CY              
end_date        float   %dD/N/CY              
eth5            float   %11.0g     eth5       
male            float   %9.0g      male       
region          float   %24.0g     region     region of England
urban_rural_5   float   %27.0g     urban_rural_5
                                              Rural Urban in five categories
urban_rural_bin float   %9.0g      urban_rural_bin
                                              Rural-Urban
age_cat         float   %13.0g     age        
-------------------------------------------------------------------------------
Sorted by: 
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        995       99.50       99.50
          1 |          5        0.50      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  5

Contains data from ./output/prep_survival_wave3.dta
  obs:         1,000                          
 vars:            46                          10 Aug 2022 09:10
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
self_harm_pri~n str10   %10s                  
stp             str4    %9s                   
age             int     %8.0g                 
ethnicity       byte    %8.0g                 
has_msoa        byte    %8.0g                 
imd             byte    %8.0g                 
shielded        byte    %8.0g                 
has_t1_diabetes byte    %8.0g                 
has_t2_diabetes byte    %8.0g                 
diabetes_subg~p byte    %8.0g                 
cvd_subgroup    byte    %8.0g                 
has_asthma      byte    %8.0g                 
has_copd        byte    %8.0g                 
resp_subgroup   byte    %8.0g                 
mh_subgroup     byte    %8.0g                 
urban_rural     byte    %8.0g                 
patient_id      int     %8.0g                 
dereg_dateA     float   %dD/N/CY              
mi_admit_date   float   %dD/N/CY              
stroke_admit_~e float   %dD/N/CY              
hf_admit_date   float   %dD/N/CY              
vte_admit_date  float   %dD/N/CY              
t1dm_admit_date float   %dD/N/CY              
t2dm_admit_date float   %dD/N/CY              
dm_keto_admit~e float   %dD/N/CY              
asthma_admit_~e float   %dD/N/CY              
depress_admit~e float   %dD/N/CY              
anx_admit_date  float   %dD/N/CY              
smi_admit_date  float   %dD/N/CY              
cvd_admit_date  float   %dD/N/CY              
dm_admit_date   float   %dD/N/CY              
copd_admit_date float   %dD/N/CY              
mh_admit_date   float   %dD/N/CY              
date_died       float   %dD/N/CY              
lrti_admit_date float   %dD/N/CY              
copd_any_date   float   %dD/N/CY              
lrti_copd       float   %9.0g                 
index_date      float   %dD/N/CY              
end_study       float   %dD/N/CY              
end_date        float   %dD/N/CY              
eth5            float   %11.0g     eth5       
male            float   %9.0g      male       
region          float   %24.0g     region     region of England
urban_rural_5   float   %27.0g     urban_rural_5
                                              Rural Urban in five categories
urban_rural_bin float   %9.0g      urban_rural_bin
                                              Rural-Urban
age_cat         float   %13.0g     age        
-------------------------------------------------------------------------------
Sorted by: 
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        978       97.80       97.80
          1 |         22        2.20      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  22
(22 real changes made)

                id:  patient_id
     failure event:  cvd_admit != 0 & cvd_admit < .
obs. time interval:  (cvd_end[_n-1], cvd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         22  failures in single-failure-per-subject data
    195,838  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =       200

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_cvd_wave3_eth.svg not found)
(file ./output/graphs/km_cvd_wave3_eth.svg written in SVG format)

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =          0
Refining estimates:
Iteration 0:   log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =        1,000                  Number of obs    =          50
No. of failures =           22
Time at risk    =       195838
                                                LR chi2(0)       =        0.00
Log likelihood  =            0                  Prob > chi2      =           .

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |          1  (omitted)
      Black  |          1  (omitted)
      Mixed  |          1  (omitted)
      Other  |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_cvd_eth.ster saved
file ./output/tempdata/surv_crude_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =          0
Refining estimates:
Iteration 0:   log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =          774                  Number of obs    =          40
No. of failures =           15
Time at risk    =       151937
                                                LR chi2(0)       =        0.00
Log likelihood  =            0                  Prob > chi2      =           .

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |          1  (omitted)
      Black  |          1  (omitted)
      Mixed  |          1  (omitted)
      Other  |          1  (omitted)
             |
     age_cat |
41 - 60 y..  |          1  (omitted)
61 - 80 y..  |          1  (omitted)
  >80 years  |          1  (omitted)
             |
        male |
       Male  |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model1_cvd_eth.ster saved
file ./output/tempdata/surv_model1_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: 5.imd omitted because of collinearity
note: 1.shielded omitted because of collinearity
Iteration 0:   log likelihood =          0
Refining estimates:
Iteration 0:   log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =          774                  Number of obs    =          40
No. of failures =           15
Time at risk    =       151937
                                                LR chi2(0)       =        0.00
Log likelihood  =            0                  Prob > chi2      =           .

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |          1  (omitted)
      Black  |          1  (omitted)
      Mixed  |          1  (omitted)
      Other  |          1  (omitted)
             |
     age_cat |
41 - 60 y..  |          1  (omitted)
61 - 80 y..  |          1  (omitted)
  >80 years  |          1  (omitted)
             |
        male |
       Male  |          1  (omitted)
             |
urban_rura~n |
      Urban  |          1  (omitted)
             |
         imd |
          1  |          1  (omitted)
          2  |          1  (omitted)
          3  |          1  (omitted)
          4  |          1  (omitted)
          5  |          1  (omitted)
             |
  1.shielded |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model2_cvd_eth.ster saved
file ./output/tempdata/surv_model2_cvd_eth.dta saved
(note: file ./output/tables/cvd_estout_table_eth_wave3.txt not found)
(output written to ./output/tables/cvd_estout_table_eth_wave3.txt)

Contains data from ./output/prep_survival_easing3.dta
  obs:         1,000                          
 vars:            46                          10 Aug 2022 09:10
-------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
-------------------------------------------------------------------------------
self_harm_pri~n str10   %10s                  
stp             str4    %9s                   
age             byte    %8.0g                 
ethnicity       byte    %8.0g                 
has_msoa        byte    %8.0g                 
imd             byte    %8.0g                 
shielded        byte    %8.0g                 
has_t1_diabetes byte    %8.0g                 
has_t2_diabetes byte    %8.0g                 
diabetes_subg~p byte    %8.0g                 
cvd_subgroup    byte    %8.0g                 
has_asthma      byte    %8.0g                 
has_copd        byte    %8.0g                 
resp_subgroup   byte    %8.0g                 
mh_subgroup     byte    %8.0g                 
urban_rural     byte    %8.0g                 
patient_id      int     %8.0g                 
dereg_dateA     float   %dD/N/CY              
mi_admit_date   float   %dD/N/CY              
stroke_admit_~e float   %dD/N/CY              
hf_admit_date   float   %dD/N/CY              
vte_admit_date  float   %dD/N/CY              
t1dm_admit_date float   %dD/N/CY              
t2dm_admit_date float   %dD/N/CY              
dm_keto_admit~e float   %dD/N/CY              
asthma_admit_~e float   %dD/N/CY              
depress_admit~e float   %dD/N/CY              
anx_admit_date  float   %dD/N/CY              
smi_admit_date  float   %dD/N/CY              
cvd_admit_date  float   %dD/N/CY              
dm_admit_date   float   %dD/N/CY              
copd_admit_date float   %dD/N/CY              
mh_admit_date   float   %dD/N/CY              
date_died       float   %dD/N/CY              
lrti_admit_date float   %dD/N/CY              
copd_any_date   float   %dD/N/CY              
lrti_copd       float   %9.0g                 
index_date      float   %dD/N/CY              
end_study       float   %dD/N/CY              
end_date        float   %dD/N/CY              
eth5            float   %11.0g     eth5       
male            float   %9.0g      male       
region          float   %24.0g     region     region of England
urban_rural_5   float   %27.0g     urban_rural_5
                                              Rural Urban in five categories
urban_rural_bin float   %9.0g      urban_rural_bin
                                              Rural-Urban
age_cat         float   %13.0g     age        
-------------------------------------------------------------------------------
Sorted by: 
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)
(0 observations deleted)

  cvd_admit |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        984       98.40       98.40
          1 |         16        1.60      100.00
------------+-----------------------------------
      Total |      1,000      100.00
  16
(16 real changes made)

                id:  patient_id
     failure event:  cvd_admit != 0 & cvd_admit < .
obs. time interval:  (cvd_end[_n-1], cvd_end]
 enter on or after:  time index_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time index_date

------------------------------------------------------------------------------
      1,000  total observations
          0  exclusions
------------------------------------------------------------------------------
      1,000  observations remaining, representing
      1,000  subjects
         16  failures in single-failure-per-subject data
    133,834  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =       136

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id
(note: file ./output/graphs/km_cvd_easing3_eth.svg not found)
(file ./output/graphs/km_cvd_easing3_eth.svg written in SVG format)

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =          0
Refining estimates:
Iteration 0:   log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =        1,000                  Number of obs    =          50
No. of failures =           16
Time at risk    =       133834
                                                LR chi2(0)       =        0.00
Log likelihood  =            0                  Prob > chi2      =           .

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |          1  (omitted)
      Black  |          1  (omitted)
      Mixed  |          1  (omitted)
      Other  |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/crude_cvd_eth.ster saved
file ./output/tempdata/surv_crude_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

Iteration 0:   log likelihood =          0
Refining estimates:
Iteration 0:   log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =          773                  Number of obs    =          37
No. of failures =           13
Time at risk    =       103311
                                                LR chi2(0)       =        0.00
Log likelihood  =            0                  Prob > chi2      =           .

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |          1  (omitted)
      Black  |          1  (omitted)
      Mixed  |          1  (omitted)
      Other  |          1  (omitted)
             |
     age_cat |
41 - 60 y..  |          1  (omitted)
61 - 80 y..  |          1  (omitted)
  >80 years  |          1  (omitted)
             |
        male |
       Male  |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model1_cvd_eth.ster saved
file ./output/tempdata/surv_model1_cvd_eth.dta saved

         failure _d:  cvd_admit
   analysis time _t:  (cvd_end-origin)
             origin:  time index_date
  enter on or after:  time index_date
                 id:  patient_id

note: 1.shielded omitted because of collinearity
Iteration 0:   log likelihood =          0
Refining estimates:
Iteration 0:   log likelihood =          0

Stratified Cox regr. -- no ties

No. of subjects =          773                  Number of obs    =          37
No. of failures =           13
Time at risk    =       103311
                                                LR chi2(0)       =        0.00
Log likelihood  =            0                  Prob > chi2      =           .

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        eth5 |
South Asian  |          1  (omitted)
      Black  |          1  (omitted)
      Mixed  |          1  (omitted)
      Other  |          1  (omitted)
             |
     age_cat |
41 - 60 y..  |          1  (omitted)
61 - 80 y..  |          1  (omitted)
  >80 years  |          1  (omitted)
             |
        male |
       Male  |          1  (omitted)
             |
urban_rura~n |
      Urban  |          1  (omitted)
             |
         imd |
          1  |          1  (omitted)
          2  |          1  (omitted)
          3  |          1  (omitted)
          4  |          1  (omitted)
          5  |          1  (omitted)
             |
  1.shielded |          1  (omitted)
------------------------------------------------------------------------------
                                                             Stratified by stp
file ./output/tempdata/model2_cvd_eth.ster saved
file ./output/tempdata/surv_model2_cvd_eth.dta saved
(note: file ./output/tables/cvd_estout_table_eth_easing3.txt not found)
(output written to ./output/tables/cvd_estout_table_eth_easing3.txt)

. file close tablecontent

. 
. log close
      name:  <unnamed>
       log:  /workspace/logs/cox_model_cvd.log
  log type:  text
 closed on:  10 Aug 2022, 09:14:59
-------------------------------------------------------------------------------
